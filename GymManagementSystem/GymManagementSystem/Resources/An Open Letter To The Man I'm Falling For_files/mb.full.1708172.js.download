window.MB_DEV_SCRIPT = false;
window.mbswfobject=function(){
var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=false,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=false,isExpressInstallActive=false,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=true,ua=function(){
var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=!+"\v1",playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description
;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){plugin=true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof win.ActiveXObject!=UNDEF){try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(a){
d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}}catch(e){}}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}(),onDomLoad=function(){if(!ua.w3){return}if(typeof doc.readyState!=UNDEF&&doc.readyState=="complete"||typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body)){callDomLoadFunctions()}if(!isDomLoaded){if(typeof doc.addEventListener!=UNDEF){
doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,false)}if(ua.ie&&ua.win){doc.attachEvent(ON_READY_STATE_CHANGE,function attachEventLambda(){if(doc.readyState=="complete"){doc.detachEvent(ON_READY_STATE_CHANGE,attachEventLambda);callDomLoadFunctions()}});if(win==top){(function onDomLoadLambda(){if(isDomLoaded){return}try{doc.documentElement.doScroll("left")}catch(e){setTimeout(onDomLoadLambda,0);return}callDomLoadFunctions()})()}}if(ua.wk){(function onDomLoadLambda2(){
if(isDomLoaded){return}if(!/loaded|complete/.test(doc.readyState)){setTimeout(onDomLoadLambda2,0);return}callDomLoadFunctions()})()}addLoadEvent(callDomLoadFunctions)}}();function callDomLoadFunctions(){if(isDomLoaded){return}try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=true;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{
domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}function main(){if(plugin){testPlayerVersion()}else{matchVersions()}}
function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0];var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function testPlayerVersionLambda(){if(typeof t.GetVariable!=UNDEF){var d=t.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}else if(counter<10){counter++;setTimeout(testPlayerVersionLambda,10);return}b.removeChild(o);t=null;matchVersions()})()
}else{matchVersions()}}function matchVersions(){var rl=regObjArr.length;if(rl>0){for(var i=0;i<rl;i++){var id=regObjArr[i].id;var cb=regObjArr[i].callbackFn;var cbObj={success:false,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj){if(hasPlayerVersion(regObjArr[i].swfVersion)&&!(ua.wk&&ua.wk<312)){setVisibility(id,true);if(cb){cbObj.success=true;cbObj.ref=getObjectById(id);cb(cbObj)}}else if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall
;att.width=obj.getAttribute("width")||"0";att.height=obj.getAttribute("height")||"0";if(obj.getAttribute("class")){att.styleclass=obj.getAttribute("class")}if(obj.getAttribute("align")){att.align=obj.getAttribute("align")}var par={};var p=obj.getElementsByTagName("param");var pl=p.length;for(var j=0;j<pl;j++){if(p[j].getAttribute("name").toLowerCase()!="movie"){par[p[j].getAttribute("name")]=p[j].getAttribute("value")}}showExpressInstall(att,par,id,cb)}else{displayAltContent(obj);if(cb){
cb(cbObj)}}}}else{setVisibility(id,true);if(cb){var o=getObjectById(id);if(o&&typeof o.SetVariable!=UNDEF){cbObj.success=true;cbObj.ref=o}cb(cbObj)}}}}}function getObjectById(objectIdStr){var r=null;var o=getElementById(objectIdStr);if(o&&o.nodeName=="OBJECT"){if(typeof o.SetVariable!=UNDEF){r=o}else{var n=o.getElementsByTagName(OBJECT)[0];if(n){r=n}}}return r}function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)}
function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=true;storedCallbackFn=callbackFn||null;storedCallbackObj={success:false,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){if(obj.nodeName=="OBJECT"){storedAltContent=abstractAltContent(obj);storedAltContentId=null}else{storedAltContent=obj;storedAltContentId=replaceElemIdStr}att.id=EXPRESS_INSTALL_ID;if(typeof att.width==UNDEF||!/%$/.test(att.width)&&parseInt(att.width,10)<310){
att.width="310"}if(typeof att.height==UNDEF||!/%$/.test(att.height)&&parseInt(att.height,10)<137){att.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+win.location.toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+fv}else{par.flashvars=fv}if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div")
;replaceElemIdStr+="SWFObjectNew";newObj.setAttribute("id",replaceElemIdStr);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";(function showExpressInstallLambda(){if(obj.readyState==4){obj.parentNode.removeChild(obj)}else{setTimeout(showExpressInstallLambda,10)}})()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj)
;el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";(function displayAltContentLambda(){if(obj.readyState==4){obj.parentNode.removeChild(obj)}else{setTimeout(displayAltContentLambda,10)}})()}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){
var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312){return r}if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else if(i.toLowerCase()=="styleclass"){
att+=' class="'+attObj[i]+'"'}else if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){
if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){
var obj=getElementById(id);if(obj&&obj.nodeName=="OBJECT"){if(ua.ie&&ua.win){obj.style.display="none";(function removeSWFLambda(){if(obj.readyState==4){removeObjectInIE(id)}else{setTimeout(removeSWFLambda,10)}})()}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}
return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?true:false}function createCSS(sel,decl,media,newStyle){if(ua.ie&&ua.mac){return}
var h=doc.getElementsByTagName("head")[0];if(!h){return}var m=media&&typeof media=="string"?media:"screen";if(newStyle){dynamicStylesheet=null;dynamicStylesheetMedia=null}if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media",m);dynamicStylesheet=h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1]}
dynamicStylesheetMedia=m}if(ua.ie&&ua.win){if(dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT){dynamicStylesheet.addRule(sel,decl)}}else{if(dynamicStylesheet&&typeof doc.createTextNode!=UNDEF){dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}}}function setVisibility(id,isVisible){if(!autoHideShow){return}var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}
function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){
swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr;regObj.callbackFn=callbackFn;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)}else if(callbackFn){callbackFn({success:false,id:objectIdStr})}},getObjectById:function(objectIdStr){if(ua.w3){
return getObjectById(objectIdStr)}},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:false,id:replaceElemIdStr};if(ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr){setVisibility(replaceElemIdStr,false);(function(){widthStr+="";heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){att[i]=attObj[i]}}att.data=swfUrlStr
;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){par[j]=parObj[j]}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}callbackObj.success=true
;callbackObj.ref=obj}else if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr;showExpressInstall(att,par,replaceElemIdStr,callbackFn);return}else{setVisibility(replaceElemIdStr,true)}if(callbackFn){callbackFn(callbackObj)}})()}else if(callbackFn){callbackFn(callbackObj)}},switchOffAutoHideShow:function(){autoHideShow=false},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,
createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){if(ua.w3&&canExpressInstall()){showExpressInstall(att,par,replaceElemIdStr,callbackFn)}},removeSWF:function(objElemIdStr){if(ua.w3){removeSWF(objElemIdStr)}},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){if(ua.w3){createCSS(selStr,declStr,mediaStr,newStyleBoolean)}},
addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q)){q=q.split("?")[1]}if(param==null){return urlEncodeIfNecessary(q)}var pairs=q.split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive){
var obj=getElementById(EXPRESS_INSTALL_ID);if(obj&&storedAltContent){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}if(storedCallbackFn){storedCallbackFn(storedCallbackObj)}}isExpressInstallActive=false}}}}();(function(f){var d,e,p=function(){d=(new(window.UAParser||exports.UAParser)).getResult();e=new Detector;return this};p.prototype={getSoftwareVersion:function(){
return"0.1.11"},getBrowserData:function(){return d},getFingerprint:function(){var b=d.ua,c=this.getScreenPrint(),a=this.getPlugins(),g=this.getFonts(),n=this.isLocalStorage(),f=this.isSessionStorage(),h=this.getTimeZone(),u=this.getLanguage(),m=this.getSystemLanguage(),e=this.isCookie(),C=this.getCanvasPrint();return murmurhash3_32_gc(b+"|"+c+"|"+a+"|"+g+"|"+n+"|"+f+"|"+h+"|"+u+"|"+m+"|"+e+"|"+C,256)},getCustomFingerprint:function(){for(var b="",c=0;c<arguments.length;c++)b+=arguments[c]+"|"
;return murmurhash3_32_gc(b,256)},getUserAgent:function(){return d.ua},getUserAgentLowerCase:function(){return d.ua.toLowerCase()},getBrowser:function(){return d.browser.name},getBrowserVersion:function(){return d.browser.version},getBrowserMajorVersion:function(){return d.browser.major},isIE:function(){return/IE/i.test(d.browser.name)},isChrome:function(){return/Chrome/i.test(d.browser.name)},isFirefox:function(){return/Firefox/i.test(d.browser.name)},isSafari:function(){
return/Safari/i.test(d.browser.name)},isMobileSafari:function(){return/Mobile\sSafari/i.test(d.browser.name)},isOpera:function(){return/Opera/i.test(d.browser.name)},getEngine:function(){return d.engine.name},getEngineVersion:function(){return d.engine.version},getOS:function(){return d.os.name},getOSVersion:function(){return d.os.version},isWindows:function(){return/Windows/i.test(d.os.name)},isMac:function(){return/Mac/i.test(d.os.name)},isLinux:function(){return/Linux/i.test(d.os.name)},
isUbuntu:function(){return/Ubuntu/i.test(d.os.name)},isSolaris:function(){return/Solaris/i.test(d.os.name)},getDevice:function(){return d.device.model},getDeviceType:function(){return d.device.type},getDeviceVendor:function(){return d.device.vendor},getCPU:function(){return d.cpu.architecture},isMobile:function(){var b=d.ua||navigator.vendor||window.opera
;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4))
},isMobileMajor:function(){return this.isMobileAndroid()||this.isMobileBlackBerry()||this.isMobileIOS()||this.isMobileOpera()||this.isMobileWindows()},isMobileAndroid:function(){return d.ua.match(/Android/i)?!0:!1},isMobileOpera:function(){return d.ua.match(/Opera Mini/i)?!0:!1},isMobileWindows:function(){return d.ua.match(/IEMobile/i)?!0:!1},isMobileBlackBerry:function(){return d.ua.match(/BlackBerry/i)?!0:!1},isMobileIOS:function(){return d.ua.match(/iPhone|iPad|iPod/i)?!0:!1},
isIphone:function(){return d.ua.match(/iPhone/i)?!0:!1},isIpad:function(){return d.ua.match(/iPad/i)?!0:!1},isIpod:function(){return d.ua.match(/iPod/i)?!0:!1},getScreenPrint:function(){return"Current Resolution: "+this.getCurrentResolution()+", Available Resolution: "+this.getAvailableResolution()+", Color Depth: "+this.getColorDepth()+", Device XDPI: "+this.getDeviceXDPI()+", Device YDPI: "+this.getDeviceYDPI()},getColorDepth:function(){return screen.colorDepth},
getCurrentResolution:function(){return screen.width+"x"+screen.height},getAvailableResolution:function(){return screen.availWidth+"x"+screen.availHeight},getDeviceXDPI:function(){return screen.deviceXDPI},getDeviceYDPI:function(){return screen.deviceYDPI},getPlugins:function(){for(var b="",c=0;c<navigator.plugins.length;c++)b=c==navigator.plugins.length-1?b+navigator.plugins[c].name:b+(navigator.plugins[c].name+", ");return b},isJava:function(){return navigator.javaEnabled()},
getJavaVersion:function(){return deployJava.getJREs().toString()},isFlash:function(){return navigator.plugins["Shockwave Flash"]?!0:!1},getFlashVersion:function(){return this.isFlash()?(objPlayerVersion=swfobject.getFlashPlayerVersion(),objPlayerVersion.major+"."+objPlayerVersion.minor+"."+objPlayerVersion.release):""},isSilverlight:function(){return navigator.plugins["Silverlight Plug-In"]?!0:!1},getSilverlightVersion:function(){
return this.isSilverlight()?navigator.plugins["Silverlight Plug-In"].description:""},isMimeTypes:function(){return navigator.mimeTypes.length?!0:!1},getMimeTypes:function(){for(var b="",c=0;c<navigator.mimeTypes.length;c++)b=c==navigator.mimeTypes.length-1?b+navigator.mimeTypes[c].description:b+(navigator.mimeTypes[c].description+", ");return b},isFont:function(b){return e.detect(b)},getFonts:function(){
for(var b="Abadi MT Condensed Light;Adobe Fangsong Std;Adobe Hebrew;Adobe Ming Std;Agency FB;Aharoni;Andalus;Angsana New;AngsanaUPC;Aparajita;Arab;Arabic Transparent;Arabic Typesetting;Arial Baltic;Arial Black;Arial CE;Arial CYR;Arial Greek;Arial TUR;Arial;Batang;BatangChe;Bauhaus 93;Bell MT;Bitstream Vera Serif;Bodoni MT;Bookman Old Style;Braggadocio;Broadway;Browallia New;BrowalliaUPC;Calibri Light;Calibri;Californian FB;Cambria Math;Cambria;Candara;Castellar;Casual;Centaur;Century Gothic;Chalkduster;Colonna MT;Comic Sans MS;Consolas;Constantia;Copperplate Gothic Light;Corbel;Cordia New;CordiaUPC;Courier New Baltic;Courier New CE;Courier New CYR;Courier New Greek;Courier New TUR;Courier New;DFKai-SB;DaunPenh;David;DejaVu LGC Sans Mono;Desdemona;DilleniaUPC;DokChampa;Dotum;DotumChe;Ebrima;Engravers MT;Eras Bold ITC;Estrangelo Edessa;EucrosiaUPC;Euphemia;Eurostile;FangSong;Forte;FrankRuehl;Franklin Gothic Heavy;Franklin Gothic Medium;FreesiaUPC;French Script MT;Gabriola;Gautami;Georgia;Gigi;Gisha;Goudy Old Style;Gulim;GulimChe;GungSeo;Gungsuh;GungsuhChe;Haettenschweiler;Harrington;Hei S;HeiT;Heisei Kaku Gothic;Hiragino Sans GB;Impact;Informal Roman;IrisUPC;Iskoola Pota;JasmineUPC;KacstOne;KaiTi;Kalinga;Kartika;Khmer UI;Kino MT;KodchiangUPC;Kokila;Kozuka Gothic Pr6N;Lao UI;Latha;Leelawadee;Levenim MT;LilyUPC;Lohit Gujarati;Loma;Lucida Bright;Lucida Console;Lucida Fax;Lucida Sans Unicode;MS Gothic;MS Mincho;MS PGothic;MS PMincho;MS Reference Sans Serif;MS UI Gothic;MV Boli;Magneto;Malgun Gothic;Mangal;Marlett;Matura MT Script Capitals;Meiryo UI;Meiryo;Menlo;Microsoft Himalaya;Microsoft JhengHei;Microsoft New Tai Lue;Microsoft PhagsPa;Microsoft Sans Serif;Microsoft Tai Le;Microsoft Uighur;Microsoft YaHei;Microsoft Yi Baiti;MingLiU;MingLiU-ExtB;MingLiU_HKSCS;MingLiU_HKSCS-ExtB;Miriam Fixed;Miriam;Mongolian Baiti;MoolBoran;NSimSun;Narkisim;News Gothic MT;Niagara Solid;Nyala;PMingLiU;PMingLiU-ExtB;Palace Script MT;Palatino Linotype;Papyrus;Perpetua;Plantagenet Cherokee;Playbill;Prelude Bold;Prelude Condensed Bold;Prelude Condensed Medium;Prelude Medium;PreludeCompressedWGL Black;PreludeCompressedWGL Bold;PreludeCompressedWGL Light;PreludeCompressedWGL Medium;PreludeCondensedWGL Black;PreludeCondensedWGL Bold;PreludeCondensedWGL Light;PreludeCondensedWGL Medium;PreludeWGL Black;PreludeWGL Bold;PreludeWGL Light;PreludeWGL Medium;Raavi;Rachana;Rockwell;Rod;Sakkal Majalla;Sawasdee;Script MT Bold;Segoe Print;Segoe Script;Segoe UI Light;Segoe UI Semibold;Segoe UI Symbol;Segoe UI;Shonar Bangla;Showcard Gothic;Shruti;SimHei;SimSun;SimSun-ExtB;Simplified Arabic Fixed;Simplified Arabic;Snap ITC;Sylfaen;Symbol;Tahoma;Times New Roman Baltic;Times New Roman CE;Times New Roman CYR;Times New Roman Greek;Times New Roman TUR;Times New Roman;TlwgMono;Traditional Arabic;Trebuchet MS;Tunga;Tw Cen MT Condensed Extra Bold;Ubuntu;Umpush;Univers;Utopia;Utsaah;Vani;Verdana;Vijaya;Vladimir Script;Vrinda;Webdings;Wide Latin;Wingdings".split(";"),c="",a=0;a<b.length;a++)e.detect(b[a])&&(c=a==b.length-1?c+b[a]:c+(b[a]+", "))
;return c},isLocalStorage:function(){try{return!!f.localStorage}catch(b){return!0}},isSessionStorage:function(){try{return!!f.sessionStorage}catch(b){return!0}},isCookie:function(){return navigator.cookieEnabled},getTimeZone:function(){return String(String(new Date).split("(")[1]).split(")")[0]},getLanguage:function(){return navigator.language},getSystemLanguage:function(){return navigator.systemLanguage},isCanvas:function(){var b=document.createElement("canvas");try{
return!(!b.getContext||!b.getContext("2d"))}catch(c){return!1}},getCanvasPrint:function(){var b=document.createElement("canvas"),c;try{c=b.getContext("2d")}catch(a){return""}c.textBaseline="top";c.font="14px 'Arial'";c.textBaseline="alphabetic";c.fillStyle="#f60";c.fillRect(125,1,62,20);c.fillStyle="#069";c.fillText("ClientJS,org <canvas> 1.0",2,15);c.fillStyle="rgba(102, 204, 0, 0.7)";c.fillText("ClientJS,org <canvas> 1.0",4,17);return b.toDataURL()}}
;"object"===typeof module&&"undefined"!==typeof exports&&(module.exports=p);f.ClientJS=p})(window);var deployJava=function(){function f(a){c.debug&&(console.log?console.log(a):alert(a))}function d(a){if(null==a||0==a.length)return"http://java.com/dt-redirect";"&"==a.charAt(0)&&(a=a.substring(1,a.length));return"http://java.com/dt-redirect?"+a}var e=["id","class","title","style"]
;"classid codebase codetype data type archive declare standby height width usemap name tabindex align border hspace vspace".split(" ").concat(e,["lang","dir"],"onclick ondblclick onmousedown onmouseup onmouseover onmousemove onmouseout onkeypress onkeydown onkeyup".split(" "));var p="codebase code name archive object width height alt align hspace vspace".split(" ").concat(e),b;try{b=-1!=document.location.protocol.indexOf("http")?"//java.com/js/webstart.png":"http://java.com/js/webstart.png"
}catch(a){b="http://java.com/js/webstart.png"}var c={debug:null,version:"20120801",firefoxJavaVersion:null,myInterval:null,preInstallJREList:null,returnPage:null,brand:null,locale:null,installType:null,EAInstallEnabled:!1,EarlyAccessURL:null,oldMimeType:"application/npruntime-scriptable-plugin;DeploymentToolkit",mimeType:"application/java-deployment-toolkit",launchButtonPNG:b,browserName:null,browserName2:null,getJREs:function(){var a=[]
;if(this.isPluginInstalled())for(var g=this.getPlugin().jvms,b=0;b<g.getLength();b++)a[b]=g.get(b).version;else g=this.getBrowser(),"MSIE"==g?this.testUsingActiveX("1.7.0")?a[0]="1.7.0":this.testUsingActiveX("1.6.0")?a[0]="1.6.0":this.testUsingActiveX("1.5.0")?a[0]="1.5.0":this.testUsingActiveX("1.4.2")?a[0]="1.4.2":this.testForMSVM()&&(a[0]="1.1"):"Netscape Family"==g&&(this.getJPIVersionUsingMimeType(),
null!=this.firefoxJavaVersion?a[0]=this.firefoxJavaVersion:this.testUsingMimeTypes("1.7")?a[0]="1.7.0":this.testUsingMimeTypes("1.6")?a[0]="1.6.0":this.testUsingMimeTypes("1.5")?a[0]="1.5.0":this.testUsingMimeTypes("1.4.2")?a[0]="1.4.2":"Safari"==this.browserName2&&(this.testUsingPluginsArray("1.7.0")?a[0]="1.7.0":this.testUsingPluginsArray("1.6")?a[0]="1.6.0":this.testUsingPluginsArray("1.5")?a[0]="1.5.0":this.testUsingPluginsArray("1.4.2")&&(a[0]="1.4.2")))
;if(this.debug)for(b=0;b<a.length;++b)f("[getJREs()] We claim to have detected Java SE "+a[b]);return a},installJRE:function(a,g){if(this.isPluginInstalled()&&this.isAutoInstallEnabled(a)){var b=!1;if(b=this.isCallbackSupported()?this.getPlugin().installJRE(a,g):this.getPlugin().installJRE(a))this.refresh(),null!=this.returnPage&&(document.location=this.returnPage);return b}return this.installLatestJRE()},isAutoInstallEnabled:function(a){if(!this.isPluginInstalled())return!1
;"undefined"==typeof a&&(a=null);if("MSIE"!=deployJava.browserName||deployJava.compareVersionToPattern(deployJava.getPlugin().version,["10","0","0"],!1,!0))a=!0;else if(null==a)a=!1;else{var g="1.6.0_33+";if(null==g||0==g.length)a=!0;else{var b=g.charAt(g.length-1);"+"!=b&&"*"!=b&&-1!=g.indexOf("_")&&"_"!=b&&(g+="*",b="*");g=g.substring(0,g.length-1);if(0<g.length){var c=g.charAt(g.length-1);if("."==c||"_"==c)g=g.substring(0,g.length-1)}a="*"==b?0==a.indexOf(g):"+"==b?g<=a:!1}a=!a}return a},
isCallbackSupported:function(){return this.isPluginInstalled()&&this.compareVersionToPattern(this.getPlugin().version,["10","2","0"],!1,!0)},installLatestJRE:function(a){if(this.isPluginInstalled()&&this.isAutoInstallEnabled()){var g=!1;if(g=this.isCallbackSupported()?this.getPlugin().installLatestJRE(a):this.getPlugin().installLatestJRE())this.refresh(),null!=this.returnPage&&(document.location=this.returnPage);return g}a=this.getBrowser();g=navigator.platform.toLowerCase()
;if("true"==this.EAInstallEnabled&&-1!=g.indexOf("win")&&null!=this.EarlyAccessURL)this.preInstallJREList=this.getJREs(),null!=this.returnPage&&(this.myInterval=setInterval("deployJava.poll()",3e3)),location.href=this.EarlyAccessURL;else{if("MSIE"==a)return this.IEInstall();if("Netscape Family"==a&&-1!=g.indexOf("win32"))return this.FFInstall()
;location.href=d((null!=this.returnPage?"&returnPage="+this.returnPage:"")+(null!=this.locale?"&locale="+this.locale:"")+(null!=this.brand?"&brand="+this.brand:""))}return!1},runApplet:function(a,g,b){if("undefined"==b||null==b)b="1.1";var c=b.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$");null==this.returnPage&&(this.returnPage=document.location);null!=c?"?"!=this.getBrowser()?this.versionCheck(b+"+")?this.writeAppletTag(a,g):this.installJRE(b+"+")&&(this.refresh(),
location.href=document.location,this.writeAppletTag(a,g)):this.writeAppletTag(a,g):f("[runApplet()] Invalid minimumVersion argument to runApplet():"+b)},writeAppletTag:function(a,g){var b="<applet ",c="",h=!0;if(null==g||"object"!=typeof g)g={};for(var d in a){var m;a:{m=d.toLowerCase();for(var f=p.length,e=0;e<f;e++)if(p[e]===m){m=!0;break a}m=!1}m?(b+=" "+d+'="'+a[d]+'"',"code"==d&&(h=!1)):g[d]=a[d]}d=!1;for(var q in g){"codebase_lookup"==q&&(d=!0)
;if("object"==q||"java_object"==q||"java_code"==q)h=!1;c+='<param name="'+q+'" value="'+g[q]+'"/>'}d||(c+='<param name="codebase_lookup" value="false"/>');h&&(b+=' code="dummy"');document.write(b+">\n"+c+"\n</applet>")},versionCheck:function(a){var g=0,b=a.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?(\\*|\\+)?$");if(null!=b){for(var c=a=!1,h=[],d=1;d<b.length;++d)"string"==typeof b[d]&&""!=b[d]&&(h[g]=b[d],g++);"+"==h[h.length-1]?(c=!0,a=!1,h.length--):"*"==h[h.length-1]?(c=!1,a=!0,
h.length--):4>h.length&&(c=!1,a=!0);g=this.getJREs();for(d=0;d<g.length;++d)if(this.compareVersionToPattern(g[d],h,a,c))return!0}else g="Invalid versionPattern passed to versionCheck: "+a,f("[versionCheck()] "+g),alert(g);return!1},isWebStartInstalled:function(a){if("?"==this.getBrowser())return!0;if("undefined"==a||null==a)a="1.4.2";var b=!1
;null!=a.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$")?b=this.versionCheck(a+"+"):(f("[isWebStartInstaller()] Invalid minimumVersion argument to isWebStartInstalled(): "+a),b=this.versionCheck("1.4.2+"));return b},getJPIVersionUsingMimeType:function(){for(var a=0;a<navigator.mimeTypes.length;++a){var b=navigator.mimeTypes[a].type.match(/^application\/x-java-applet;jpi-version=(.*)$/);if(null!=b&&(this.firefoxJavaVersion=b[1],"Opera"!=this.browserName2))break}},
launchWebStartApplication:function(a){navigator.userAgent.toLowerCase();this.getJPIVersionUsingMimeType();if(0==this.isWebStartInstalled("1.7.0")&&(0==this.installJRE("1.7.0+")||0==this.isWebStartInstalled("1.7.0")))return!1;var b=null;document.documentURI&&(b=document.documentURI);null==b&&(b=document.URL);var c=this.getBrowser(),d
;"MSIE"==c?d='<object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" width="0" height="0"><PARAM name="launchjnlp" value="'+a+'"><PARAM name="docbase" value="'+b+'"></object>':"Netscape Family"==c&&(d='<embed type="application/x-java-applet;jpi-version='+this.firefoxJavaVersion+'" width="0" height="0" launchjnlp="'+a+'"docbase="'+b+'" />');"undefined"==document.body||null==document.body?(document.write(d),document.location=b):(a=document.createElement("div"),a.id="div1",
a.style.position="relative",a.style.left="-10000px",a.style.margin="0px auto",a.className="dynamicDiv",a.innerHTML=d,document.body.appendChild(a))},createWebStartLaunchButtonEx:function(a,b){null==this.returnPage&&(this.returnPage=a);document.write('<a href="'+("javascript:deployJava.launchWebStartApplication('"+a+"');")+'" onMouseOver="window.status=\'\'; return true;"><img src="'+this.launchButtonPNG+'" border="0" /></a>')},createWebStartLaunchButton:function(a,b){
null==this.returnPage&&(this.returnPage=a);document.write('<a href="'+("javascript:if (!deployJava.isWebStartInstalled(&quot;"+b+"&quot;)) {if (deployJava.installLatestJRE()) {if (deployJava.launch(&quot;"+a+"&quot;)) {}}} else {if (deployJava.launch(&quot;"+a+"&quot;)) {}}")+'" onMouseOver="window.status=\'\'; return true;"><img src="'+this.launchButtonPNG+'" border="0" /></a>')},launch:function(a){document.location=a;return!0},isPluginInstalled:function(){var a=this.getPlugin()
;return a&&a.jvms?!0:!1},isAutoUpdateEnabled:function(){return this.isPluginInstalled()?this.getPlugin().isAutoUpdateEnabled():!1},setAutoUpdateEnabled:function(){return this.isPluginInstalled()?this.getPlugin().setAutoUpdateEnabled():!1},setInstallerType:function(a){this.installType=a;return this.isPluginInstalled()?this.getPlugin().setInstallerType(a):!1},setAdditionalPackages:function(a){return this.isPluginInstalled()?this.getPlugin().setAdditionalPackages(a):!1},setEarlyAccess:function(a){
this.EAInstallEnabled=a},isPlugin2:function(){if(this.isPluginInstalled()&&this.versionCheck("1.6.0_10+"))try{return this.getPlugin().isPlugin2()}catch(a){}return!1},allowPlugin:function(){this.getBrowser();return"Safari"!=this.browserName2&&"Opera"!=this.browserName2},getPlugin:function(){this.refresh();var a=null;this.allowPlugin()&&(a=document.getElementById("deployJavaPlugin"));return a},compareVersionToPattern:function(a,b,c,d){if(void 0==a||void 0==b)return!1
;var h=a.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$");if(null!=h){var f=0;a=[];for(var m=1;m<h.length;++m)"string"==typeof h[m]&&""!=h[m]&&(a[f]=h[m],f++);h=Math.min(a.length,b.length);if(d){for(m=0;m<h;++m){if(a[m]<b[m])return!1;if(a[m]>b[m])break}return!0}for(m=0;m<h;++m)if(a[m]!=b[m])return!1;return c?!0:a.length==b.length}return!1},getBrowser:function(){if(null==this.browserName){var a=navigator.userAgent.toLowerCase();f("[getBrowser()] navigator.userAgent.toLowerCase() -> "+a)
;-1!=a.indexOf("msie")&&-1==a.indexOf("opera")?this.browserName2=this.browserName="MSIE":-1!=a.indexOf("iphone")?(this.browserName="Netscape Family",this.browserName2="iPhone"):-1!=a.indexOf("firefox")&&-1==a.indexOf("opera")?(this.browserName="Netscape Family",this.browserName2="Firefox"):-1!=a.indexOf("chrome")?(this.browserName="Netscape Family",this.browserName2="Chrome"):-1!=a.indexOf("safari")?(this.browserName="Netscape Family",
this.browserName2="Safari"):-1!=a.indexOf("mozilla")&&-1==a.indexOf("opera")?(this.browserName="Netscape Family",this.browserName2="Other"):-1!=a.indexOf("opera")?(this.browserName="Netscape Family",this.browserName2="Opera"):(this.browserName="?",this.browserName2="unknown");f("[getBrowser()] Detected browser name:"+this.browserName+", "+this.browserName2)}return this.browserName},testUsingActiveX:function(a){a="JavaWebStart.isInstalled."+a+".0"
;if("undefined"==typeof ActiveXObject||!ActiveXObject)return f("[testUsingActiveX()] Browser claims to be IE, but no ActiveXObject object?"),!1;try{return null!=new ActiveXObject(a)}catch(b){return!1}},testForMSVM:function(){if("undefined"!=typeof oClientCaps){var a=oClientCaps.getComponentVersion("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}","ComponentID");return""==a||"5,0,5000,0"==a?!1:!0}return!1},testUsingMimeTypes:function(a){
if(!navigator.mimeTypes)return f("[testUsingMimeTypes()] Browser claims to be Netscape family, but no mimeTypes[] array?"),!1;for(var b=0;b<navigator.mimeTypes.length;++b){s=navigator.mimeTypes[b].type;var c=s.match(/^application\/x-java-applet\x3Bversion=(1\.8|1\.7|1\.6|1\.5|1\.4\.2)$/);if(null!=c&&this.compareVersions(c[1],a))return!0}return!1},testUsingPluginsArray:function(a){if(!navigator.plugins||!navigator.plugins.length)return!1
;for(var b=navigator.platform.toLowerCase(),c=0;c<navigator.plugins.length;++c)if(s=navigator.plugins[c].description,-1!=s.search(/^Java Switchable Plug-in (Cocoa)/)){if(this.compareVersions("1.5.0",a))return!0}else if(-1!=s.search(/^Java/)&&-1!=b.indexOf("win")&&(this.compareVersions("1.5.0",a)||this.compareVersions("1.6.0",a)))return!0;return this.compareVersions("1.5.0",a)?!0:!1},IEInstall:function(){
location.href=d((null!=this.returnPage?"&returnPage="+this.returnPage:"")+(null!=this.locale?"&locale="+this.locale:"")+(null!=this.brand?"&brand="+this.brand:""));return!1},done:function(a,b){},FFInstall:function(){location.href=d((null!=this.returnPage?"&returnPage="+this.returnPage:"")+(null!=this.locale?"&locale="+this.locale:"")+(null!=this.brand?"&brand="+this.brand:"")+(null!=this.installType?"&type="+this.installType:""));return!1},compareVersions:function(a,b){
for(var c=a.split("."),d=b.split("."),h=0;h<c.length;++h)c[h]=Number(c[h]);for(h=0;h<d.length;++h)d[h]=Number(d[h]);2==c.length&&(c[2]=0);return c[0]>d[0]?!0:c[0]<d[0]?!1:c[1]>d[1]?!0:c[1]<d[1]?!1:c[2]>d[2]?!0:c[2]<d[2]?!1:!0},enableAlerts:function(){this.browserName=null;this.debug=!0},poll:function(){this.refresh();var a=this.getJREs();0==this.preInstallJREList.length&&0!=a.length&&(clearInterval(this.myInterval),null!=this.returnPage&&(location.href=this.returnPage))
;0!=this.preInstallJREList.length&&0!=a.length&&this.preInstallJREList[0]!=a[0]&&(clearInterval(this.myInterval),null!=this.returnPage&&(location.href=this.returnPage))},writePluginTag:function(){var a=this.getBrowser();"MSIE"==a?document.write('<object classid="clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA" id="deployJavaPlugin" width="0" height="0"></object>'):"Netscape Family"==a&&this.allowPlugin()&&this.writeEmbedTag()},refresh:function(){navigator.plugins.refresh(!1)
;"Netscape Family"==this.getBrowser()&&this.allowPlugin()&&null==document.getElementById("deployJavaPlugin")&&this.writeEmbedTag()},writeEmbedTag:function(){var a=!1;if(null!=navigator.mimeTypes){for(var b=0;b<navigator.mimeTypes.length;b++)navigator.mimeTypes[b].type==this.mimeType&&navigator.mimeTypes[b].enabledPlugin&&(document.write('<embed id="deployJavaPlugin" type="'+this.mimeType+'" hidden="true" />'),a=!0)
;if(!a)for(b=0;b<navigator.mimeTypes.length;b++)navigator.mimeTypes[b].type==this.oldMimeType&&navigator.mimeTypes[b].enabledPlugin&&document.write('<embed id="deployJavaPlugin" type="'+this.oldMimeType+'" hidden="true" />')}}};c.writePluginTag();if(null==c.locale){e=null;if(null==e)try{e=navigator.userLanguage}catch(a){}if(null==e)try{e=navigator.systemLanguage}catch(a){}if(null==e)try{e=navigator.language}catch(a){}null!=e&&(e.replace("-","_"),c.locale=e)}return c}();var Detector=function(){
var f=["monospace","sans-serif","serif"],d=document.getElementsByTagName("body")[0],e=document.createElement("span");e.style.fontSize="72px";e.innerHTML="mmmmmmmmmmlli";var p={},b={},c;for(c in f)e.style.fontFamily=f[c],d.appendChild(e),p[f[c]]=e.offsetWidth,b[f[c]]=e.offsetHeight,d.removeChild(e);this.detect=function(a){var c=!1,n;for(n in f){e.style.fontFamily=a+","+f[n];d.appendChild(e);var v=e.offsetWidth!=p[f[n]]||e.offsetHeight!=b[f[n]];d.removeChild(e);c=c||v}return c}}
;function murmurhash3_32_gc(f,d){var e,p,b,c,a;e=f.length&3;p=f.length-e;b=d;for(a=0;a<p;)c=f.charCodeAt(a)&255|(f.charCodeAt(++a)&255)<<8|(f.charCodeAt(++a)&255)<<16|(f.charCodeAt(++a)&255)<<24,++a,c=3432918353*(c&65535)+((3432918353*(c>>>16)&65535)<<16)&4294967295,c=c<<15|c>>>17,c=461845907*(c&65535)+((461845907*(c>>>16)&65535)<<16)&4294967295,b^=c,b=b<<13|b>>>19,b=5*(b&65535)+((5*(b>>>16)&65535)<<16)&4294967295,b=(b&65535)+27492+(((b>>>16)+58964&65535)<<16);c=0;switch(e){case 3:
c^=(f.charCodeAt(a+2)&255)<<16;case 2:c^=(f.charCodeAt(a+1)&255)<<8;case 1:c^=f.charCodeAt(a)&255,c=3432918353*(c&65535)+((3432918353*(c>>>16)&65535)<<16)&4294967295,c=c<<15|c>>>17,b^=461845907*(c&65535)+((461845907*(c>>>16)&65535)<<16)&4294967295}b^=f.length;b^=b>>>16;b=2246822507*(b&65535)+((2246822507*(b>>>16)&65535)<<16)&4294967295;b^=b>>>13;b=3266489909*(b&65535)+((3266489909*(b>>>16)&65535)<<16)&4294967295;return(b^b>>>16)>>>0}(function(f,d){var e={extend:function(a,b){
for(var c in b)-1!=="browser cpu device engine os".indexOf(c)&&0===b[c].length%2&&(a[c]=b[c].concat(a[c]));return a},has:function(a,b){return"string"===typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):!1},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"===typeof a?a.split(".")[0]:d}},p=function(){for(var a,b=0,c,f,g,e,p,n,r=arguments;b<r.length&&!p;){var l=r[b],t=r[b+1];if("undefined"===typeof a)for(g in a={},t)t.hasOwnProperty(g)&&(e=t[g],
"object"===typeof e?a[e[0]]=d:a[e]=d);for(c=f=0;c<l.length&&!p;)if(p=l[c++].exec(this.getUA()))for(g=0;g<t.length;g++)n=p[++f],e=t[g],"object"===typeof e&&0<e.length?2==e.length?a[e[0]]="function"==typeof e[1]?e[1].call(this,n):e[1]:3==e.length?a[e[0]]="function"!==typeof e[1]||e[1].exec&&e[1].test?n?n.replace(e[1],e[2]):d:n?e[1].call(this,n,e[2]):d:4==e.length&&(a[e[0]]=n?e[3].call(this,n.replace(e[1],e[2])):d):a[e]=n?n:d;b+=2}return a},b=function(a,b){
for(var c in b)if("object"===typeof b[c]&&0<b[c].length)for(var f=0;f<b[c].length;f++){if(e.has(b[c][f],a))return"?"===c?d:c}else if(e.has(b[c],a))return"?"===c?d:c;return a},c={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},a={
browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",b,{
"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"
}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],
cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",e.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",e.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",e.lowerize]]],
device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],["model","vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[["model",b,{
"Fire Phone":["SD","KF"]
}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[["vendor","Sony"],["model","Xperia Phone"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation\s[34portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",b,{
HTC:"APA",Sprint:"Sprint"}],["model",b,{"Evo Shift 4G":"7373KT"
}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type","tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],["model",["vendor","HTC"],["type","tablet"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/(samsung);smarttv/i],["vendor","model",["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/sie-(\w+)*/i],["model",["vendor","Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],["model",["vendor","Acer"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[["type",e.lowerize],"vendor","model"]],
engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv\:([\w\.]+).*(gecko)/i],["version","name"]],
os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",b,c]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",b,c]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],["name","version"],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]
},g=function(b,c){if(!(this instanceof g))return new g(b,c).getResult();var d=b||(f&&f.navigator&&f.navigator.userAgent?f.navigator.userAgent:""),n=c?e.extend(a,c):a;this.getBrowser=function(){var a=p.apply(this,n.browser);a.major=e.major(a.version);return a};this.getCPU=function(){return p.apply(this,n.cpu)};this.getDevice=function(){return p.apply(this,n.device)};this.getEngine=function(){return p.apply(this,n.engine)};this.getOS=function(){return p.apply(this,n.os)};this.getResult=function(){
return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return d};this.setUA=function(a){d=a;return this};this.setUA(d);return this};g.VERSION="0.7.10";g.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"};g.CPU={ARCHITECTURE:"architecture"};g.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",
EMBEDDED:"embedded"};g.ENGINE={NAME:"name",VERSION:"version"};g.OS={NAME:"name",VERSION:"version"};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=g),exports.UAParser=g):"function"===typeof define&&define.amd?define(function(){return g}):f.UAParser=g;var n=f.jQuery||f.Zepto;if("undefined"!==typeof n){var v=new g;n.ua=v.getResult();n.ua.get=function(){return v.getUA()};n.ua.set=function(a){v.setUA(a);a=v.getResult();for(var b in a)n.ua[b]=a[b]}}
})("object"===typeof window?window:this);(function(name,context,definition){"use strict";context[name]=definition()})("mb_fgp",this,function(){"use strict";var Fingerprint2=function(options){if(!(this instanceof Fingerprint2)){return new Fingerprint2(options)}var defaultOptions={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:true,sortPluginsFor:[/palemoon/i],userDefinedFonts:[]};this.options=this.extend(options,defaultOptions)
;this.nativeForEach=Array.prototype.forEach;this.nativeMap=Array.prototype.map};Fingerprint2.prototype={extend:function(source,target){if(source==null){return target}for(var k in source){if(source[k]!=null&&target[k]!==source[k]){target[k]=source[k]}}return target},get:function(done){var keys=[];keys=this.userAgentKey(keys);keys=this.languageKey(keys);keys=this.colorDepthKey(keys);keys=this.pixelRatioKey(keys);keys=this.hardwareConcurrencyKey(keys);keys=this.screenResolutionKey(keys)
;keys=this.availableScreenResolutionKey(keys);keys=this.timezoneOffsetKey(keys);keys=this.sessionStorageKey(keys);keys=this.localStorageKey(keys);keys=this.indexedDbKey(keys);keys=this.addBehaviorKey(keys);keys=this.openDatabaseKey(keys);keys=this.cpuClassKey(keys);keys=this.platformKey(keys);keys=this.doNotTrackKey(keys);keys=this.pluginsKey(keys);keys=this.canvasKey(keys);keys=this.webglKey(keys);keys=this.adBlockKey(keys);keys=this.hasLiedLanguagesKey(keys)
;keys=this.hasLiedResolutionKey(keys);keys=this.hasLiedOsKey(keys);keys=this.hasLiedBrowserKey(keys);keys=this.touchSupportKey(keys);keys=this.customEntropyFunction(keys);var enhancedFPKeys=keys.slice();enhancedFPKeys=this.gpuKey(enhancedFPKeys);enhancedFPKeys=this.codecKey(enhancedFPKeys);var that=this;this.audioKey(keys,enhancedFPKeys,function(newKeys,newEnhancedFPKeys){that.fontsKey(newKeys,newEnhancedFPKeys,function(newKeys,newEnhancedFPKeys){var values=[];that.each(newKeys,function(pair){
var value=pair.value;if(typeof pair.value.join!=="undefined"){value=pair.value.join(";")}values.push(value)});var murmur=that.x64hash128(values.join("~~~"),31);var valuesEnhanced=[];that.each(newEnhancedFPKeys,function(pair){var value=pair.value;if(typeof pair.value.join!=="undefined"){value=pair.value.join(";")}valuesEnhanced.push(value)});var murmurEnhanced=that.x64hash128(valuesEnhanced.join("~~~"),31);return done(murmur,murmurEnhanced,newKeys,newEnhancedFPKeys)})})},
audioKey:function(keys,enhancedFPKeys,done){if(!this.options.excludeAudio&&!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)){return this.getAudioKey(keys,enhancedFPKeys,done)}return done(keys,enhancedFPKeys)},getAudioKey:function(keys,enhancedFPKeys,done){var getOfflineAudioBuffer=function(callback){var context;var CryptoJS=CryptoJS||function(e,m){var p={},j=p.lib={},l=function(){},f=j.Base={extend:function(a){l.prototype=this;var c=new l;a&&c.mixIn(a)
;c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},n=j.WordArray=f.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=m?c:4*a.length},
toString:function(a){return(a||h).stringify(this)},concat:function(a){var c=this.words,q=a.words,d=this.sigBytes;a=a.sigBytes;this.clamp();if(d%4)for(var b=0;b<a;b++)c[d+b>>>2]|=(q[b>>>2]>>>24-8*(b%4)&255)<<24-8*((d+b)%4);else if(65535<q.length)for(b=0;b<a;b+=4)c[d+b>>>2]=q[b>>>2];else c.push.apply(c,q);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=e.ceil(c/4)},clone:function(){var a=f.clone.call(this)
;a.words=this.words.slice(0);return a},random:function(a){for(var c=[],b=0;b<a;b+=4)c.push(4294967296*e.random()|0);return new n.init(c,a)}}),b=p.enc={},h=b.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],d=0;d<a;d++){var f=c[d>>>2]>>>24-8*(d%4)&255;b.push((f>>>4).toString(16));b.push((f&15).toString(16))}return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d+=2)b[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new n.init(b,c/2)}},g=b.Latin1={
stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],d=0;d<a;d++)b.push(String.fromCharCode(c[d>>>2]>>>24-8*(d%4)&255));return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d++)b[d>>>2]|=(a.charCodeAt(d)&255)<<24-8*(d%4);return new n.init(b,c)}},r=b.Utf8={stringify:function(a){try{return decodeURIComponent(escape(g.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data")}},parse:function(a){return g.parse(unescape(encodeURIComponent(a)))}
},k=j.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new n.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=r.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,b=c.words,d=c.sigBytes,f=this.blockSize,h=d/(4*f),h=a?e.ceil(h):e.max((h|0)-this._minBufferSize,0);a=h*f;d=e.min(4*a,d);if(a){for(var g=0;g<a;g+=f)this._doProcessBlock(b,g);g=b.splice(0,a);c.sigBytes-=d}return new n.init(g,d)},clone:function(){
var a=f.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});j.Hasher=k.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){k.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,b){return new a.init(b).finalize(c)}},_createHmacHelper:function(a){
return function(b,f){return new s.HMAC.init(a,f).finalize(b)}}});var s=p.algo={};return p}(Math);(function(){var e=CryptoJS,m=e.lib,p=m.WordArray,j=m.Hasher,l=[],m=e.algo.SHA1=j.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,n){for(var b=this._hash.words,h=b[0],g=b[1],e=b[2],k=b[3],j=b[4],a=0;80>a;a++){if(16>a)l[a]=f[n+a]|0;else{var c=l[a-3]^l[a-8]^l[a-14]^l[a-16];l[a]=c<<1|c>>>31}c=(h<<5|h>>>27)+j+l[a]
;c=20>a?c+((g&e|~g&k)+1518500249):40>a?c+((g^e^k)+1859775393):60>a?c+((g&e|g&k|e&k)-1894007588):c+((g^e^k)-899497514);j=k;k=e;e=g<<30|g>>>2;g=h;h=c}b[0]=b[0]+h|0;b[1]=b[1]+g|0;b[2]=b[2]+e|0;b[3]=b[3]+k|0;b[4]=b[4]+j|0},_doFinalize:function(){var f=this._data,e=f.words,b=8*this._nDataBytes,h=8*f.sigBytes;e[h>>>5]|=128<<24-h%32;e[(h+64>>>9<<4)+14]=Math.floor(b/4294967296);e[(h+64>>>9<<4)+15]=b;f.sigBytes=4*e.length;this._process();return this._hash},clone:function(){var e=j.clone.call(this)
;e._hash=this._hash.clone();return e}});e.SHA1=j._createHelper(m);e.HmacSHA1=j._createHmacHelper(m)})();try{context=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,44100,44100);if(!context){return callback()}var pxiOscillator=context.createOscillator();pxiOscillator.type="triangle";pxiOscillator.frequency.value=1e4;var pxiCompressor=context.createDynamicsCompressor();if(pxiCompressor.threshold){pxiCompressor.threshold.value=-50}if(pxiCompressor.knee){
pxiCompressor.knee.value=40}if(pxiCompressor.ratio){pxiCompressor.ratio.value=12}if(pxiCompressor.reduction){pxiCompressor.reduction.value=-20}if(pxiCompressor.attack){pxiCompressor.attack.value=0}if(pxiCompressor.release){pxiCompressor.release.value=.25}pxiOscillator.connect(pxiCompressor);pxiCompressor.connect(context.destination);context.startRendering();context.oncomplete=function(evnt){var pxi_output=0;var sha1=CryptoJS.algo.SHA1.create();for(var i=0;i<evnt.renderedBuffer.length;i++){
sha1.update(evnt.renderedBuffer.getChannelData(0)[i].toString())}var hash=sha1.finalize();pxi_output=hash.toString(CryptoJS.enc.Hex);pxiCompressor.disconnect();Mb.helpers.log("Memo : "+pxi_output);function a(a,b,c){for(var d in b)"dopplerFactor"===d||"speedOfSound"===d||"currentTime"===d||"number"!==typeof b[d]&&"string"!==typeof b[d]||(a[(c?c:"")+d]=b[d]);return a}var nt_vc_output;try{var nt_vc_context=window.AudioContext||window.webkitAudioContext
;if("function"!==typeof nt_vc_context)nt_vc_output="Not available";else{var f=new nt_vc_context,d=f.createAnalyser();nt_vc_output=a({},f,"ac-");nt_vc_output=a(nt_vc_output,f.destination,"ac-");nt_vc_output=a(nt_vc_output,f.listener,"ac-");nt_vc_output=a(nt_vc_output,d,"an-");nt_vc_output=window.JSON.stringify(nt_vc_output,undefined,2)}}catch(g){nt_vc_output=0}Mb.helpers.log("Audio context : "+nt_vc_output);return callback(pxi_output+nt_vc_output)}}catch(u){return callback()}}
;var pushKey=function(key){key=key||"";enhancedFPKeys.push({key:"audio",value:key});done(keys,enhancedFPKeys)};getOfflineAudioBuffer(pushKey)},customEntropyFunction:function(keys){if(typeof this.options.customFunction==="function"){keys.push({key:"custom",value:this.options.customFunction()})}return keys},userAgentKey:function(keys){if(!this.options.excludeUserAgent){keys.push({key:"user_agent",value:this.getUserAgent()})}return keys},getUserAgent:function(){return navigator.userAgent},
languageKey:function(keys){if(!this.options.excludeLanguage){keys.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""})}return keys},colorDepthKey:function(keys){if(!this.options.excludeColorDepth){keys.push({key:"color_depth",value:screen.colorDepth||-1})}return keys},pixelRatioKey:function(keys){if(!this.options.excludePixelRatio){keys.push({key:"pixel_ratio",value:this.getPixelRatio()})}return keys},
getPixelRatio:function(){return window.devicePixelRatio||""},screenResolutionKey:function(keys){if(!this.options.excludeScreenResolution){return this.getScreenResolution(keys)}return keys},getScreenResolution:function(keys){var resolution;if(this.options.detectScreenOrientation){resolution=screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height]}else{resolution=[screen.width,screen.height]}if(typeof resolution!=="undefined"){keys.push({key:"resolution",
value:resolution})}return keys},availableScreenResolutionKey:function(keys){if(!this.options.excludeAvailableScreenResolution){return this.getAvailableScreenResolution(keys)}return keys},getAvailableScreenResolution:function(keys){var available;if(screen.availWidth&&screen.availHeight){if(this.options.detectScreenOrientation){available=screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]}else{
available=[screen.availHeight,screen.availWidth]}}if(typeof available!=="undefined"){keys.push({key:"available_resolution",value:available})}return keys},timezoneOffsetKey:function(keys){if(!this.options.excludeTimezoneOffset){keys.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()})}return keys},sessionStorageKey:function(keys){if(!this.options.excludeSessionStorage&&this.hasSessionStorage()){keys.push({key:"session_storage",value:1})}return keys},localStorageKey:function(keys){
if(!this.options.excludeSessionStorage&&this.hasLocalStorage()){keys.push({key:"local_storage",value:1})}return keys},indexedDbKey:function(keys){if(!this.options.excludeIndexedDB&&this.hasIndexedDB()){keys.push({key:"indexed_db",value:1})}return keys},addBehaviorKey:function(keys){if(document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior){keys.push({key:"add_behavior",value:1})}return keys},openDatabaseKey:function(keys){
if(!this.options.excludeOpenDatabase&&window.openDatabase){keys.push({key:"open_database",value:1})}return keys},cpuClassKey:function(keys){if(!this.options.excludeCpuClass){keys.push({key:"cpu_class",value:this.getNavigatorCpuClass()})}return keys},platformKey:function(keys){if(!this.options.excludePlatform){keys.push({key:"navigator_platform",value:this.getNavigatorPlatform()})}return keys},doNotTrackKey:function(keys){if(!this.options.excludeDoNotTrack){keys.push({key:"do_not_track",
value:this.getDoNotTrack()})}return keys},canvasKey:function(keys){if(!this.options.excludeCanvas&&this.isCanvasSupported()){keys.push({key:"canvas",value:this.getCanvasFp()})}return keys},webglKey:function(keys){if(this.options.excludeWebGL){return keys}if(!this.isWebGlSupported()){return keys}keys.push({key:"webgl",value:this.getWebglFp()});return keys},adBlockKey:function(keys){if(!this.options.excludeAdBlock){keys.push({key:"adblock",value:this.getAdBlock()})}return keys},
hasLiedLanguagesKey:function(keys){if(!this.options.excludeHasLiedLanguages){keys.push({key:"has_lied_languages",value:this.getHasLiedLanguages()})}return keys},hasLiedResolutionKey:function(keys){if(!this.options.excludeHasLiedResolution){keys.push({key:"has_lied_resolution",value:this.getHasLiedResolution()})}return keys},hasLiedOsKey:function(keys){if(!this.options.excludeHasLiedOs){keys.push({key:"has_lied_os",value:this.getHasLiedOs()})}return keys},hasLiedBrowserKey:function(keys){
if(!this.options.excludeHasLiedBrowser){keys.push({key:"has_lied_browser",value:this.getHasLiedBrowser()})}return keys},audioContextKey:function(keys){if(!this.options.excludeAudioContextKey){keys.push({key:"audio_context",value:this.getAudioContext()})}return keys},gpuKey:function(keys){if(!this.options.excludeGpuKey){keys.push({key:"gpu",value:this.getGpu()})}return keys},codecKey:function(keys){if(!this.options.excludeCodecKey){keys.push({key:"codec",value:this.getCodec()})}return keys},
fontsKey:function(keys,enhancedFPKeys,done){if(this.options.excludeJsFonts){return this.flashFontsKey(keys,enhancedFPKeys,done)}return this.jsFontsKey(keys,enhancedFPKeys,done)},flashFontsKey:function(keys,enhancedFPKeys,done){if(this.options.excludeFlashFonts){return done(keys,enhancedFPKeys)}if(!this.hasSwfObjectLoaded()){return done(keys,enhancedFPKeys)}if(!this.hasMinFlashInstalled()){return done(keys,enhancedFPKeys)}if(typeof this.options.swfPath==="undefined"){
return done(keys,enhancedFPKeys)}this.loadSwfAndDetectFonts(function(fonts){keys.push({key:"swf_fonts",value:fonts.join(";")});enhancedFPKeys.push({key:"swf_fonts",value:fonts.join(";")});done(keys,enhancedFPKeys)})},jsFontsKey:function(keys,enhancedFPKeys,done){var that=this;return setTimeout(function(){var baseFonts=["monospace","sans-serif","serif"]
;var fontList=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"]
;var extendedFontList=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"]
;if(that.options.extendedJsFonts){fontList=fontList.concat(extendedFontList)}fontList=fontList.concat(that.options.userDefinedFonts);var testString="mmmmmmmmmmlli";var testSize="72px";var h=document.getElementsByTagName("body")[0];var baseFontsDiv=document.createElement("div");var fontsDiv=document.createElement("div");var defaultWidth={};var defaultHeight={};var createSpan=function(){var s=document.createElement("span");s.style.position="absolute";s.style.left="-9999px"
;s.style.fontSize=testSize;s.style.lineHeight="normal";s.innerHTML=testString;return s};var createSpanWithFonts=function(fontToDetect,baseFont){var s=createSpan();s.style.fontFamily="'"+fontToDetect+"',"+baseFont;return s};var initializeBaseFontsSpans=function(){var spans=[];for(var index=0,length=baseFonts.length;index<length;index++){var s=createSpan();s.style.fontFamily=baseFonts[index];baseFontsDiv.appendChild(s);spans.push(s)}return spans};var initializeFontsSpans=function(){var spans={}
;for(var i=0,l=fontList.length;i<l;i++){var fontSpans=[];for(var j=0,numDefaultFonts=baseFonts.length;j<numDefaultFonts;j++){var s=createSpanWithFonts(fontList[i],baseFonts[j]);fontsDiv.appendChild(s);fontSpans.push(s)}spans[fontList[i]]=fontSpans}return spans};var isFontAvailable=function(fontSpans){var detected=false;for(var i=0;i<baseFonts.length;i++){detected=fontSpans[i].offsetWidth!==defaultWidth[baseFonts[i]]||fontSpans[i].offsetHeight!==defaultHeight[baseFonts[i]];if(detected){
return detected}}return detected};var baseFontsSpans=initializeBaseFontsSpans();h.appendChild(baseFontsDiv);for(var index=0,length=baseFonts.length;index<length;index++){defaultWidth[baseFonts[index]]=baseFontsSpans[index].offsetWidth;defaultHeight[baseFonts[index]]=baseFontsSpans[index].offsetHeight}var fontsSpans=initializeFontsSpans();h.appendChild(fontsDiv);var available=[];for(var i=0,l=fontList.length;i<l;i++){if(isFontAvailable(fontsSpans[fontList[i]])){available.push(fontList[i])}}
h.removeChild(fontsDiv);h.removeChild(baseFontsDiv);keys.push({key:"js_fonts",value:available});enhancedFPKeys.push({key:"js_fonts",value:available});done(keys,enhancedFPKeys)},1)},pluginsKey:function(keys){if(!this.options.excludePlugins){if(this.isIE()){if(!this.options.excludeIEPlugins){keys.push({key:"ie_plugins",value:this.getIEPlugins()})}}else{keys.push({key:"regular_plugins",value:this.getRegularPlugins()})}}return keys},getRegularPlugins:function(){var plugins=[]
;for(var i=0,l=navigator.plugins.length;i<l;i++){plugins.push(navigator.plugins[i])}if(this.pluginsShouldBeSorted()){plugins=plugins.sort(function(a,b){if(a.name>b.name){return 1}if(a.name<b.name){return-1}return 0})}return this.map(plugins,function(p){var mimeTypes=this.map(p,function(mt){return[mt.type,mt.suffixes].join("~")}).join(",");return[p.name,p.description,mimeTypes].join("::")},this)},getIEPlugins:function(){var result=[]
;if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){
var names=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"]
;result=this.map(names,function(name){try{new ActiveXObject(name);return name}catch(e){return null}})}if(navigator.plugins){result=result.concat(this.getRegularPlugins())}return result},pluginsShouldBeSorted:function(){var should=false;for(var i=0,l=this.options.sortPluginsFor.length;i<l;i++){var re=this.options.sortPluginsFor[i];if(navigator.userAgent.match(re)){should=true;break}}return should},touchSupportKey:function(keys){if(!this.options.excludeTouchSupport){keys.push({key:"touch_support",
value:this.getTouchSupport()})}return keys},hardwareConcurrencyKey:function(keys){if(!this.options.excludeHardwareConcurrency){keys.push({key:"hardware_concurrency",value:this.getHardwareConcurrency()})}return keys},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return true}},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return true}},hasIndexedDB:function(){try{return!!window.indexedDB}catch(e){return true}},getHardwareConcurrency:function(){
if(navigator.hardwareConcurrency){return navigator.hardwareConcurrency}return"unknown"},getNavigatorCpuClass:function(){if(navigator.cpuClass){return navigator.cpuClass}else{return"unknown"}},getNavigatorPlatform:function(){if(navigator.platform){return navigator.platform}else{return"unknown"}},getDoNotTrack:function(){if(navigator.doNotTrack){return navigator.doNotTrack}else if(navigator.msDoNotTrack){return navigator.msDoNotTrack}else if(window.doNotTrack){return window.doNotTrack}else{
return"unknown"}},getTouchSupport:function(){var maxTouchPoints=0;var touchEvent=false;if(typeof navigator.maxTouchPoints!=="undefined"){maxTouchPoints=navigator.maxTouchPoints}else if(typeof navigator.msMaxTouchPoints!=="undefined"){maxTouchPoints=navigator.msMaxTouchPoints}try{document.createEvent("TouchEvent");touchEvent=true}catch(_){}var touchStart="ontouchstart"in window;return[maxTouchPoints,touchEvent,touchStart]},getCanvasFp:function(){var result=[]
;var canvas=document.createElement("canvas");canvas.width=2e3;canvas.height=200;canvas.style.display="inline";var ctx=canvas.getContext("2d");ctx.rect(0,0,10,10);ctx.rect(2,2,6,6);result.push("canvas winding:"+(ctx.isPointInPath(5,5,"evenodd")===false?"yes":"no"));ctx.textBaseline="alphabetic";ctx.fillStyle="#f60";ctx.fillRect(125,1,62,20);ctx.fillStyle="#069";if(this.options.dontUseFakeFontInCanvas){ctx.font="11pt Arial"}else{ctx.font="11pt no-real-font-123"}
ctx.fillText("Cwm fjordbank glyphs vext quiz, ",2,15);ctx.fillStyle="rgba(102, 204, 0, 0.2)";ctx.font="18pt Arial";ctx.fillText("Cwm fjordbank glyphs vext quiz, ",4,45);ctx.globalCompositeOperation="multiply";ctx.fillStyle="rgb(255,0,255)";ctx.beginPath();ctx.arc(50,50,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(0,255,255)";ctx.beginPath();ctx.arc(100,50,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(255,255,0)";ctx.beginPath()
;ctx.arc(75,100,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(255,0,255)";ctx.arc(75,75,75,0,Math.PI*2,true);ctx.arc(75,75,25,0,Math.PI*2,true);ctx.fill("evenodd");result.push("canvas fp:"+canvas.toDataURL());return result.join("~")},getWebglFp:function(){var gl;var fa2s=function(fa){gl.clearColor(0,0,0,1);gl.enable(gl.DEPTH_TEST);gl.depthFunc(gl.LEQUAL);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);return"["+fa[0]+", "+fa[1]+"]"};var maxAnisotropy=function(gl){
var anisotropy,ext=gl.getExtension("EXT_texture_filter_anisotropic")||gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||gl.getExtension("MOZ_EXT_texture_filter_anisotropic");return ext?(anisotropy=gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===anisotropy&&(anisotropy=2),anisotropy):null};gl=this.getWebglCanvas();if(!gl){return null}var result=[]
;var vShaderTemplate="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}";var fShaderTemplate="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}";var vertexPosBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexPosBuffer);var vertices=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0])
;gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);vertexPosBuffer.itemSize=3;vertexPosBuffer.numItems=3;var program=gl.createProgram(),vshader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vshader,vShaderTemplate);gl.compileShader(vshader);var fshader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fshader,fShaderTemplate);gl.compileShader(fshader);gl.attachShader(program,vshader);gl.attachShader(program,fshader);gl.linkProgram(program);gl.useProgram(program)
;program.vertexPosAttrib=gl.getAttribLocation(program,"attrVertex");program.offsetUniform=gl.getUniformLocation(program,"uniformOffset");gl.enableVertexAttribArray(program.vertexPosArray);gl.vertexAttribPointer(program.vertexPosAttrib,vertexPosBuffer.itemSize,gl.FLOAT,!1,0,0);gl.uniform2f(program.offsetUniform,1,1);gl.drawArrays(gl.TRIANGLE_STRIP,0,vertexPosBuffer.numItems);if(gl.canvas!=null){result.push(gl.canvas.toDataURL())}result.push("extensions:"+gl.getSupportedExtensions().join(";"))
;result.push("webgl aliased line width range:"+fa2s(gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE)));result.push("webgl aliased point size range:"+fa2s(gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE)));result.push("webgl alpha bits:"+gl.getParameter(gl.ALPHA_BITS));result.push("webgl antialiasing:"+(gl.getContextAttributes().antialias?"yes":"no"));result.push("webgl blue bits:"+gl.getParameter(gl.BLUE_BITS));result.push("webgl depth bits:"+gl.getParameter(gl.DEPTH_BITS))
;result.push("webgl green bits:"+gl.getParameter(gl.GREEN_BITS));result.push("webgl max anisotropy:"+maxAnisotropy(gl));result.push("webgl max combined texture image units:"+gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS));result.push("webgl max cube map texture size:"+gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE));result.push("webgl max fragment uniform vectors:"+gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS))
;result.push("webgl max render buffer size:"+gl.getParameter(gl.MAX_RENDERBUFFER_SIZE));result.push("webgl max texture image units:"+gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));result.push("webgl max texture size:"+gl.getParameter(gl.MAX_TEXTURE_SIZE));result.push("webgl max varying vectors:"+gl.getParameter(gl.MAX_VARYING_VECTORS));result.push("webgl max vertex attribs:"+gl.getParameter(gl.MAX_VERTEX_ATTRIBS))
;result.push("webgl max vertex texture image units:"+gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS));result.push("webgl max vertex uniform vectors:"+gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS));result.push("webgl max viewport dims:"+fa2s(gl.getParameter(gl.MAX_VIEWPORT_DIMS)));result.push("webgl red bits:"+gl.getParameter(gl.RED_BITS));result.push("webgl renderer:"+gl.getParameter(gl.RENDERER));result.push("webgl shading language version:"+gl.getParameter(gl.SHADING_LANGUAGE_VERSION))
;result.push("webgl stencil bits:"+gl.getParameter(gl.STENCIL_BITS));result.push("webgl vendor:"+gl.getParameter(gl.VENDOR));result.push("webgl version:"+gl.getParameter(gl.VERSION));try{var extensionDebugRendererInfo=gl.getExtension("WEBGL_debug_renderer_info");if(extensionDebugRendererInfo){result.push("webgl unmasked vendor:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_VENDOR_WEBGL))
;result.push("webgl unmasked renderer:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL))}}catch(e){}if(!gl.getShaderPrecisionFormat){return result.join("~")}result.push("webgl vertex shader high float precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).precision);result.push("webgl vertex shader high float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).rangeMin)
;result.push("webgl vertex shader high float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).rangeMax);result.push("webgl vertex shader medium float precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).precision);result.push("webgl vertex shader medium float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).rangeMin)
;result.push("webgl vertex shader medium float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).rangeMax);result.push("webgl vertex shader low float precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_FLOAT).precision);result.push("webgl vertex shader low float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_FLOAT).rangeMin)
;result.push("webgl vertex shader low float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_FLOAT).rangeMax);result.push("webgl fragment shader high float precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).precision);result.push("webgl fragment shader high float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).rangeMin)
;result.push("webgl fragment shader high float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).rangeMax);result.push("webgl fragment shader medium float precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).precision);result.push("webgl fragment shader medium float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).rangeMin)
;result.push("webgl fragment shader medium float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).rangeMax);result.push("webgl fragment shader low float precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_FLOAT).precision);result.push("webgl fragment shader low float precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_FLOAT).rangeMin)
;result.push("webgl fragment shader low float precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_FLOAT).rangeMax);result.push("webgl vertex shader high int precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_INT).precision);result.push("webgl vertex shader high int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_INT).rangeMin)
;result.push("webgl vertex shader high int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_INT).rangeMax);result.push("webgl vertex shader medium int precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_INT).precision);result.push("webgl vertex shader medium int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_INT).rangeMin)
;result.push("webgl vertex shader medium int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_INT).rangeMax);result.push("webgl vertex shader low int precision:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_INT).precision);result.push("webgl vertex shader low int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_INT).rangeMin)
;result.push("webgl vertex shader low int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.LOW_INT).rangeMax);result.push("webgl fragment shader high int precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_INT).precision);result.push("webgl fragment shader high int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_INT).rangeMin)
;result.push("webgl fragment shader high int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_INT).rangeMax);result.push("webgl fragment shader medium int precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_INT).precision);result.push("webgl fragment shader medium int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_INT).rangeMin)
;result.push("webgl fragment shader medium int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_INT).rangeMax);result.push("webgl fragment shader low int precision:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_INT).precision);result.push("webgl fragment shader low int precision rangeMin:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_INT).rangeMin)
;result.push("webgl fragment shader low int precision rangeMax:"+gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.LOW_INT).rangeMax);return result.join("~")},getAdBlock:function(){var ads=document.createElement("div");ads.innerHTML="&nbsp;";ads.className="adsbox";var result=false;try{document.body.appendChild(ads);result=document.getElementsByClassName("adsbox")[0].offsetHeight===0;document.body.removeChild(ads)}catch(e){result=false}return result},getHasLiedLanguages:function(){
if(typeof navigator.languages!=="undefined"){try{var firstLanguages=navigator.languages[0].substr(0,2);if(firstLanguages!==navigator.language.substr(0,2)){return true}}catch(err){return true}}return false},getHasLiedResolution:function(){if(screen.width<screen.availWidth){return true}if(screen.height<screen.availHeight){return true}return false},getHasLiedOs:function(){var userAgent=navigator.userAgent.toLowerCase();var oscpu=navigator.oscpu;var platform=navigator.platform.toLowerCase();var os
;if(userAgent.indexOf("windows phone")>=0){os="Windows Phone"}else if(userAgent.indexOf("win")>=0){os="Windows"}else if(userAgent.indexOf("android")>=0){os="Android"}else if(userAgent.indexOf("linux")>=0){os="Linux"}else if(userAgent.indexOf("iphone")>=0||userAgent.indexOf("ipad")>=0){os="iOS"}else if(userAgent.indexOf("mac")>=0){os="Mac"}else{os="Other"}var mobileDevice;if("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0){mobileDevice=true}else{
mobileDevice=false}if(mobileDevice&&os!=="Windows Phone"&&os!=="Android"&&os!=="iOS"&&os!=="Other"){return true}if(typeof oscpu!=="undefined"){oscpu=oscpu.toLowerCase();if(oscpu.indexOf("win")>=0&&os!=="Windows"&&os!=="Windows Phone"){return true}else if(oscpu.indexOf("linux")>=0&&os!=="Linux"&&os!=="Android"){return true}else if(oscpu.indexOf("mac")>=0&&os!=="Mac"&&os!=="iOS"){return true}else if(oscpu.indexOf("win")===0&&oscpu.indexOf("linux")===0&&oscpu.indexOf("mac")>=0&&os!=="other"){
return true}}if(platform.indexOf("win")>=0&&os!=="Windows"&&os!=="Windows Phone"){return true}else if((platform.indexOf("linux")>=0||platform.indexOf("android")>=0||platform.indexOf("pike")>=0)&&os!=="Linux"&&os!=="Android"){return true}else if((platform.indexOf("mac")>=0||platform.indexOf("ipad")>=0||platform.indexOf("ipod")>=0||platform.indexOf("iphone")>=0)&&os!=="Mac"&&os!=="iOS"){return true
}else if(platform.indexOf("win")===0&&platform.indexOf("linux")===0&&platform.indexOf("mac")>=0&&os!=="other"){return true}if(typeof navigator.plugins==="undefined"&&os!=="Windows"&&os!=="Windows Phone"){return true}return false},getHasLiedBrowser:function(){var userAgent=navigator.userAgent.toLowerCase();var productSub=navigator.productSub;var browser;if(userAgent.indexOf("firefox")>=0){browser="Firefox"}else if(userAgent.indexOf("opera")>=0||userAgent.indexOf("opr")>=0){browser="Opera"
}else if(userAgent.indexOf("chrome")>=0){browser="Chrome"}else if(userAgent.indexOf("safari")>=0){browser="Safari"}else if(userAgent.indexOf("trident")>=0){browser="Internet Explorer"}else{browser="Other"}if((browser==="Chrome"||browser==="Safari"||browser==="Opera")&&productSub!=="20030107"){return true}var tempRes=eval.toString().length;if(tempRes===37&&browser!=="Safari"&&browser!=="Firefox"&&browser!=="Other"){return true
}else if(tempRes===39&&browser!=="Internet Explorer"&&browser!=="Other"){return true}else if(tempRes===33&&browser!=="Chrome"&&browser!=="Opera"&&browser!=="Other"){return true}var errFirefox;try{throw"a"}catch(err){try{err.toSource();errFirefox=true}catch(errOfErr){errFirefox=false}}if(errFirefox&&browser!=="Firefox"&&browser!=="Other"){return true}return false},getAudioContext:function(){var pxi_output;try{
if(context=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,44100,44100),!context){pxi_output=0}var pxi_oscillator=context.createOscillator();pxi_oscillator.type="triangle";pxi_oscillator.frequency.value=1e4;var pxi_compressor=context.createDynamicsCompressor();pxi_compressor.threshold&&(pxi_compressor.threshold.value=-50);pxi_compressor.knee&&(pxi_compressor.knee.value=40);pxi_compressor.ratio&&(pxi_compressor.ratio.value=12)
;pxi_compressor.reduction&&(pxi_compressor.reduction.value=-20);pxi_compressor.attack&&(pxi_compressor.attack.value=0);pxi_compressor.release&&(pxi_compressor.release.value=.25);pxi_oscillator.connect(pxi_compressor);pxi_compressor.connect(context.destination);pxi_oscillator.start(0);context.startRendering();context.oncomplete=function(evnt){pxi_output=0;var sha1=CryptoJS.algo.SHA1.create();for(var i=0;i<evnt.renderedBuffer.length;i++){
sha1.update(evnt.renderedBuffer.getChannelData(0)[i].toString())}var hash=sha1.finalize();pxi_output=hash.toString(CryptoJS.enc.Hex);pxi_compressor.disconnect()}}catch(u){pxi_output=0}function a(a,b,c){for(var d in b)"dopplerFactor"===d||"speedOfSound"===d||"currentTime"===d||"number"!==typeof b[d]&&"string"!==typeof b[d]||(a[(c?c:"")+d]=b[d]);return a}var nt_vc_output;try{var nt_vc_context=window.AudioContext||window.webkitAudioContext
;if("function"!==typeof nt_vc_context)nt_vc_output="Not available";else{var f=new nt_vc_context,d=f.createAnalyser();nt_vc_output=a({},f,"ac-");nt_vc_output=a(nt_vc_output,f.destination,"ac-");nt_vc_output=a(nt_vc_output,f.listener,"ac-");nt_vc_output=a(nt_vc_output,d,"an-");nt_vc_output=window.JSON.stringify(nt_vc_output,undefined,2)}}catch(g){nt_vc_output=0}return nt_vc_output;return pxi_output+nt_vc_output},getGpu:function(){function getUnmaskedInfo(gl){var unMaskedInfo={renderer:"",vendor:""
};var dbgRenderInfo=gl.getExtension("WEBGL_debug_renderer_info");if(dbgRenderInfo!=null){unMaskedInfo.renderer=gl.getParameter(dbgRenderInfo.UNMASKED_RENDERER_WEBGL);unMaskedInfo.vendor=gl.getParameter(dbgRenderInfo.UNMASKED_VENDOR_WEBGL)}return unMaskedInfo}var canvas=document.createElement("canvas");var gl=canvas.getContext("experimental-webgl");if(gl==null||gl==undefined){var gl=canvas.getContext("webgl");if(gl==null||gl==undefined){return 0}}var key=gl.getParameter(gl.RENDERER)
;key+=gl.getParameter(gl.VENDOR);key+=getUnmaskedInfo(gl).vendor;key+=getUnmaskedInfo(gl).renderer;return key},getCodec:function(){var elem=document.createElement("video");var bool=false;try{bool=!!elem.canPlayType;if(bool){bool="";bool+=elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");bool+=elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");bool+=elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")
;bool+=elem.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"");bool+=elem.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")}}catch(e){}return bool},isCanvasSupported:function(){var elem=document.createElement("canvas");return!!(elem.getContext&&elem.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported()){return false}var canvas=document.createElement("canvas"),glContext;try{
glContext=canvas.getContext&&(canvas.getContext("webgl")||canvas.getContext("experimental-webgl"))}catch(e){glContext=false}return!!window.WebGLRenderingContext&&!!glContext},isIE:function(){if(navigator.appName==="Microsoft Internet Explorer"){return true}else if(navigator.appName==="Netscape"&&/Trident/.test(navigator.userAgent)){return true}return false},hasSwfObjectLoaded:function(){return typeof window.swfobject!=="undefined"},hasMinFlashInstalled:function(){
return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var node=document.createElement("div");node.setAttribute("id",this.options.swfContainerId);document.body.appendChild(node)},loadSwfAndDetectFonts:function(done){var hiddenCallback="___fp_swf_loaded";window[hiddenCallback]=function(fonts){done(fonts)};var id=this.options.swfContainerId;this.addFlashDivNode();var flashvars={onReady:hiddenCallback};var flashparams={allowScriptAccess:"always",menu:"false"}
;swfobject.embedSWF(this.options.swfPath,id,"1","1","9.0.0",false,flashvars,flashparams,{})},getWebglCanvas:function(){var canvas=document.createElement("canvas");var gl=null;try{gl=canvas.getContext("webgl")||canvas.getContext("experimental-webgl")}catch(e){}if(!gl){gl=null}return gl},each:function(obj,iterator,context){if(obj===null){return}if(this.nativeForEach&&obj.forEach===this.nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){
if(iterator.call(context,obj[i],i,obj)==={}){return}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)==={}){return}}}}},map:function(obj,iterator,context){var results=[];if(obj==null){return results}if(this.nativeMap&&obj.map===this.nativeMap){return obj.map(iterator,context)}this.each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results},x64Add:function(m,n){
m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]+n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]+n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]+n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=m[0]+n[0];o[0]&=65535;return[o[0]<<16|o[1],o[2]<<16|o[3]]},x64Multiply:function(m,n){m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]*n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]*n[3]
;o[1]+=o[2]>>>16;o[2]&=65535;o[2]+=m[3]*n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]*n[3];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[2]*n[2];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[3]*n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=m[0]*n[3]+m[1]*n[2]+m[2]*n[1]+m[3]*n[0];o[0]&=65535;return[o[0]<<16|o[1],o[2]<<16|o[3]]},x64Rotl:function(m,n){n%=64;if(n===32){return[m[1],m[0]]}else if(n<32){return[m[0]<<n|m[1]>>>32-n,m[1]<<n|m[0]>>>32-n]}else{n-=32;return[m[1]<<n|m[0]>>>32-n,m[0]<<n|m[1]>>>32-n]}},
x64LeftShift:function(m,n){n%=64;if(n===0){return m}else if(n<32){return[m[0]<<n|m[1]>>>32-n,m[1]<<n]}else{return[m[1]<<n-32,0]}},x64Xor:function(m,n){return[m[0]^n[0],m[1]^n[1]]},x64Fmix:function(h){h=this.x64Xor(h,[0,h[0]>>>1]);h=this.x64Multiply(h,[4283543511,3981806797]);h=this.x64Xor(h,[0,h[0]>>>1]);h=this.x64Multiply(h,[3301882366,444984403]);h=this.x64Xor(h,[0,h[0]>>>1]);return h},x64hash128:function(key,seed){key=key||"";seed=seed||0;var remainder=key.length%16
;var bytes=key.length-remainder;var h1=[0,seed];var h2=[0,seed];var k1=[0,0];var k2=[0,0];var c1=[2277735313,289559509];var c2=[1291169091,658871167];for(var i=0;i<bytes;i=i+16){k1=[key.charCodeAt(i+4)&255|(key.charCodeAt(i+5)&255)<<8|(key.charCodeAt(i+6)&255)<<16|(key.charCodeAt(i+7)&255)<<24,key.charCodeAt(i)&255|(key.charCodeAt(i+1)&255)<<8|(key.charCodeAt(i+2)&255)<<16|(key.charCodeAt(i+3)&255)<<24]
;k2=[key.charCodeAt(i+12)&255|(key.charCodeAt(i+13)&255)<<8|(key.charCodeAt(i+14)&255)<<16|(key.charCodeAt(i+15)&255)<<24,key.charCodeAt(i+8)&255|(key.charCodeAt(i+9)&255)<<8|(key.charCodeAt(i+10)&255)<<16|(key.charCodeAt(i+11)&255)<<24];k1=this.x64Multiply(k1,c1);k1=this.x64Rotl(k1,31);k1=this.x64Multiply(k1,c2);h1=this.x64Xor(h1,k1);h1=this.x64Rotl(h1,27);h1=this.x64Add(h1,h2);h1=this.x64Add(this.x64Multiply(h1,[0,5]),[0,1390208809]);k2=this.x64Multiply(k2,c2);k2=this.x64Rotl(k2,33)
;k2=this.x64Multiply(k2,c1);h2=this.x64Xor(h2,k2);h2=this.x64Rotl(h2,31);h2=this.x64Add(h2,h1);h2=this.x64Add(this.x64Multiply(h2,[0,5]),[0,944331445])}k1=[0,0];k2=[0,0];switch(remainder){case 15:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+14)],48));case 14:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+13)],40));case 13:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+12)],32));case 12:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+11)],24));case 11:
k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+10)],16));case 10:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+9)],8));case 9:k2=this.x64Xor(k2,[0,key.charCodeAt(i+8)]);k2=this.x64Multiply(k2,c2);k2=this.x64Rotl(k2,33);k2=this.x64Multiply(k2,c1);h2=this.x64Xor(h2,k2);case 8:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+7)],56));case 7:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+6)],48));case 6:
k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+5)],40));case 5:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+4)],32));case 4:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+3)],24));case 3:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+2)],16));case 2:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+1)],8));case 1:k1=this.x64Xor(k1,[0,key.charCodeAt(i)]);k1=this.x64Multiply(k1,c1);k1=this.x64Rotl(k1,31);k1=this.x64Multiply(k1,c2);h1=this.x64Xor(h1,k1)}
h1=this.x64Xor(h1,[0,key.length]);h2=this.x64Xor(h2,[0,key.length]);h1=this.x64Add(h1,h2);h2=this.x64Add(h2,h1);h1=this.x64Fmix(h1);h2=this.x64Fmix(h2);h1=this.x64Add(h1,h2);h2=this.x64Add(h2,h1);return("00000000"+(h1[0]>>>0).toString(16)).slice(-8)+("00000000"+(h1[1]>>>0).toString(16)).slice(-8)+("00000000"+(h2[0]>>>0).toString(16)).slice(-8)+("00000000"+(h2[1]>>>0).toString(16)).slice(-8)}};Fingerprint2.VERSION="1.5.1";return Fingerprint2});window.onMediabongPlayerReady=function(id){
Mb.player.callBack.playerReady(id)};window.onMediabongExternalPlayerReady=function(urlList){Mb.player.callBack.externalPlayerReady(urlList)};window.Mb_handlePlayerResponse=function(e){if(typeof e.data!="string")return;var action=e.data.split("@@").toString(),_event="";if(action.length<=12){return}_event=action.substring(action.length-12);var playerId=action.replace(_event,"");if(_event=="onVideoReady")onMediabongPlayerReady(playerId)};window.MB_videoCompleted=function(id){
mb_players[id].isPlaying=false};window.MB_handleDocumentVisibility=function(){var hidden="hidden";if(hidden in document){document.addEventListener("visibilitychange",onDocumentVisibilityChange);Mb.addToEventsList("visibilitychange",onDocumentVisibilityChange,document,false)}else if((hidden="mozHidden")in document){document.addEventListener("mozvisibilitychange",onDocumentVisibilityChange);Mb.addToEventsList("mozvisibilitychange",onDocumentVisibilityChange,document,false)
}else if((hidden="webkitHidden")in document){document.addEventListener("webkitvisibilitychange",onDocumentVisibilityChange);Mb.addToEventsList("webkitvisibilitychange",onDocumentVisibilityChange,document,false)}else if((hidden="msHidden")in document){document.addEventListener("msvisibilitychange",onDocumentVisibilityChange);Mb.addToEventsList("msvisibilitychange",onDocumentVisibilityChange,document,false)
}else if("onfocusin"in document)document.onfocusin=document.onfocusout=onDocumentVisibilityChange;else window.onpageshow=window.onpagehide=window.onfocus=window.onblur=onDocumentVisibilityChange;function onDocumentVisibilityChange(evt){var v="visible",h="hidden",evtMap={focus:v,focusin:v,pageshow:v,blur:h,focusout:h,pagehide:h};evt=evt||window.event;if(evt.type in evtMap)Mb.documentVisibility=evtMap[evt.type];else Mb.documentVisibility=this[hidden]?"hidden":"visible"
;if(Mb.enableEnhancedBehavior){if(Mb.syncad.mainPlayerId!=null)Mb.getPosition(Mb.syncad.mainPlayerId,false);else Mb.getPosition(Mb.player.currentPlayerId,false)}}if(document[hidden]!==undefined)onDocumentVisibilityChange({type:document[hidden]?"blur":"focus"})};if(!document.querySelectorAll){document.querySelectorAll=function(selector){var doc=document,head=doc.documentElement.firstChild,styleTag=doc.createElement("STYLE");head.appendChild(styleTag);doc.__qsaels=[]
;styleTag.styleSheet.cssText=selector+"{x:expression(document.__qsaels.push(this))}";window.scrollBy(0,0);return doc.__qsaels}}if(typeof window.addEventListener!="undefined"){window.addEventListener("message",Mb_handlePlayerResponse,false)}else if(typeof window.attachEvent!="undefined"){window.attachEvent("onmessage",Mb_handlePlayerResponse)}var Mb={getPlayer:function(id){if(Mb.player.html5Player[id]!=undefined&&Mb.player.html5Player[id]!=null)return Mb.player.html5Player[id]
;return document.getElementById(id)},boot:function(id,player_version){var url=Mb.helpers.parseUrl(decodeURIComponent(mb_players[id].events["script_loaded"]),[],id);if(Mb.isMobile)url+="&m=1";Mb.helpers.loadUrl(url,"text/javascript","script",function(){if(typeof Mb==="undefined")return;Mb.player.firedEvents[id+"_script_loaded"]=1});mb_players[id]["player_version"]=player_version;Mb.player.boot(id,mb_players[id])},handles:{},playerState:{},events:{},pauseOnAdStart:{},isExternal:"",isMobile:false,
hasFlash:true,stopEvent:false,enableSyncAd:0,syncadtype:"",adsEnabled:true,adsTested:false,callbacks:{},endAfterPrerollCompleted:[],preventScrollEvent:false,hadPreroll:false,forceStartOnScroll:false,playVideo:false,syncrollScrolled:false,syncrollHasAd:false,playerIsHtml5:false,disableAdjustTimeout:false,currentAdserverId:null,timestamps:{},adTimeout:null,_enableIntelligentSyncroll:false,_stopSyncIfQuickPlay:false,_stopSyncIfQuickPlayDuration:5e3,attentionScore:0,attentionScoreWeightExceeded:0,
adPressureProportion:0,textProportion:0,adsPlayerProportion:0,ipadAsIphone:false,documentVisibility:"",timeouts:[],intervals:[],eventsList:[],addScrollEventCalled:false,externalScrollEvent:null,viewabilityTotal:0,user_fgp:"",enableEnhancedBehavior:false,rtb_dealId:"",rtb_partnerId:"",rtb_seatId:"",rtb_cpm:0,campaign_id:0,player:{currentPlayerId:0,stayInInreadPosition:false,cancelTimeTracker:false,firedEvents:[],html5Player:[],stopMouseOverVolumeEvents:false,currentVolume:1,params:{},isMuted:0,
adserverListStarted:false,scrollValues:[],attentionScoreAdClickedFlag:0,impressionMrcDuration:0,muteVolume:0,startVolume:0,secondsTrackers:[],boot:function(id,params){Mb.player.currentPlayerId=id;if(typeof window.mb_script_started!="undefined"){var now=(new Date).getTime();console.log("(MB) Boot : "+(now-window.mb_script_started)+" ms")}var fgpOptions={extendedJsFonts:false};var tmp=new window.mb_fgp(fgpOptions).get(function(result,enhancedResult,components,enhancedComponents){
var now=(new Date).getTime();Mb.helpers.log("(MB) Fingerprint generated : "+(now-window.mb_script_started)+" ms");Mb.user_fgp=result;Mb.helpers.log("Generated fingerprint : "+result)});if(typeof window.UAParser!=="undefined"||typeof exports!=="undefined"){Mb.helpers.log("(MB) Fingerprint enhanced generated : "+(now-window.mb_script_started)+" ms");var clientJs=new ClientJS;var fingerprintClientJs=clientJs.getFingerprint();Mb.user_fgp_enhanced=fingerprintClientJs
;Mb.helpers.log("(MB) Fingerprint enhanced generated : "+(now-window.mb_script_started)+" ms");Mb.helpers.log("Generated enhanced fingerprint : "+fingerprintClientJs)}if(mb_players[id].requireSyncroll==1&&document.getElementById("mb_video_syncad")==null)return;Mb.isMobile=Mb.helpers.isMobile(navigator.userAgent||navigator.vendor||window.opera);Mb.isDesktop=!Mb.isMobile;Mb.hasFlash=Mb.helpers.hasFlash();if(!Mb.hasFlash){(function(){var sc=document.createElement("script")
;sc.src=mb_players[id].server+"/t/nf/"+mb_players[id].pub+".js?url="+encodeURIComponent(document.location.href);sc.type="text/javascript";sc.async=true;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(sc,s)})();Mb.isMobile=true}if(typeof params.testUrl!="undefined"&&params.testUrl!="")Mb.helpers.canLoadAds(params.testUrl);if(mb_players[id].noMouseOverVolume==true){Mb.player.stopMouseOverVolumeEvents=true}if(mb_players[id].title_position!="NONE"){
var container=document.getElementById(id),newContainer=document.createElement("div");newContainer.id=container.id;newContainer.className=container.className;container.removeAttribute("id");container.removeAttribute("class");container.appendChild(newContainer);var title=document.createElement("div");title.className="mb_video_player_title";title.innerHTML=mb_players[id].title;if(mb_players[id].title_position=="TOP"){container.insertBefore(title,newContainer)
}else if(mb_players[id].title_position=="BOTTOM"){container.insertBefore(title,newContainer.nextSibling)}}if(mb_players[id].ipadAsIphone==1)Mb.ipadAsIphone=true;if(mb_players[id].isExternal==1){Mb.player.params[id]=params;return}if(typeof window.mb_script_started!="undefined"){var now=(new Date).getTime();console.log("(MB) Before Init : "+(now-window.mb_script_started)+" ms")}var timeoutid=window.setTimeout(function(){Mb.player.init(id,params)},100);Mb.timeouts.push(timeoutid)},
boot5:function(id){Mb.helpers.loadUrl("//static.mediabong.com/css/mb.full.1707211.css","text/css","link",function(){});if(Mb.adsEnabled){if(typeof window.ima=="undefined"){var s_ima=document.createElement("script");s_ima.type="text/javascript";s_ima.src="//imasdk.googleapis.com/js/sdkloader/ima3.js";s_ima.async=true;if(s_ima.addEventListener){var functionEvent=function(){Mb.player.init5(id)};s_ima.addEventListener("load",functionEvent,false);Mb.addToEventsList("load",functionEvent,s_ima,false)
}else if(s_ima.readyState){s_ima.onreadystatechange=function(){Mb.player.init5(id)}}document.getElementsByTagName("head")[0].appendChild(s_ima)}else Mb.player.init5(id)}else{Mb.player.init5(id)}},init:function(id,params){MB_handleDocumentVisibility();if(typeof Mb.enableIntelligentSyncroll!="undefined")Mb._enableIntelligentSyncroll=Mb.enableIntelligentSyncroll;if(typeof Mb.stopSyncIfQuickPlay!="undefined")Mb._stopSyncIfQuickPlay=Mb.stopSyncIfQuickPlay
;if(typeof window.MB_MUTE_VOLUME!="undefined")Mb.player.muteVolume=window.MB_MUTE_VOLUME;if(typeof window.mb_script_started!="undefined"){var now=(new Date).getTime();console.log("(MB) Init : "+(now-window.mb_script_started)+" ms")}if(!Mb.adsEnabled){params.flashvars["manifest_url"]=encodeURIComponent(decodeURIComponent(params.flashvars["manifest_url"]+"&adb=1"))}var syncad=document.getElementById("mb_video_syncad")
;if(syncad!=null&&(Mb.helpers.hasClass(syncad,"no_video")||mb_players[id].endAfterPreroll==1))Mb.endAfterPrerollCompleted[id]=true;else Mb.endAfterPrerollCompleted[id]=false;if(id!="mb_video_syncad"){if(syncad!=null&&mb_players[id].disable_syncad==0){Mb.syncad.mainPlayerId=id;Mb.enableSyncAd=1;if(Mb.helpers.hasClass(syncad,"floating_banner")){Mb.syncadtype="floating";if(Mb.helpers.hasClass(syncad,"float_left"))Mb.syncad.floatLeft=true
;if(Mb.helpers.hasClass(syncad,"floating_only"))Mb.syncad.floatingOnly=true}else if(Mb.helpers.hasClass(syncad,"inread_banner"))Mb.syncadtype="inread";else if(Mb.helpers.hasClass(syncad,"bottom_banner"))Mb.syncadtype="bottom";else if(Mb.helpers.hasClass(syncad,"top_banner"))Mb.syncadtype="top";else Mb.syncadtype="sync";if(mb_players[id].enableFloatingBug==1)Mb.syncad.enableFloatingBug=true;if(params.sr_capping==true||typeof disable_syncroll!=="undefined"&&disable_syncroll==1){
document.getElementById("mb_video_syncad").parentNode.parentNode.removeChild(document.getElementById("mb_video_syncad").parentNode);if(document.getElementById("mb_video_syncad_bottom")!=null&&document.getElementsByClassName("syncad_slot").length==0)document.getElementById("mb_video_syncad_bottom").parentNode.removeChild(document.getElementById("mb_video_syncad_bottom"))}else{if(mb_players[id].endAfterPreroll==1)Mb.endAfterPrerollCompleted[id]=true
;var container=document.getElementById("mb_container");if(container!=null){var newCont=document.createElement("div"),movingContainer=document.createElement("div"),containerWithTitle=document.createElement("div"),closeImg=document.createElement("img");closeImg.src="//static.mediabong.com/close.png";closeImg.style.cursor="pointer";closeImg.style.position="absolute";closeImg.style.top="-14px";closeImg.style.right="-14px";closeImg.style.width="29px";closeImg.style.height="29px"
;closeImg.style.display="none";closeImg.id="mb_floating_close";newCont.id="mb_video_syncad_bottom";newCont.style.padding="0px";if(Mb.helpers.hasClass(syncad,"floating_banner"))newCont.style.maxWidth=Math.floor(Mb.helpers.getViewport().width/3)+"px";else if(container.style.getPropertyValue("max-width")!="")newCont.style.maxWidth=container.style.getPropertyValue("max-width");container.parentNode.insertBefore(newCont,container);containerWithTitle.id="mb_moving_container"
;if(typeof mb_players[id].syncroll_z_index!=="undefined"&&mb_players[id].syncroll_z_index!=0)containerWithTitle.style.zIndex=mb_players[id].syncroll_z_index;else containerWithTitle.style.zIndex=15;containerWithTitle.style.boxSizing="content-box";containerWithTitle.style.overflow="hidden";movingContainer.id="mb_new_container";movingContainer.style.overflow="visible";movingContainer.style.padding="0px";movingContainer.style.margin="0px";movingContainer.style.width=Mb.helpers.getOffset(syncad)+"px"
;movingContainer.style.cssFloat="left";movingContainer.style.textAlign="left";containerWithTitle.appendChild(container);movingContainer.appendChild(containerWithTitle);containerWithTitle.appendChild(closeImg);document.getElementById("mb_video_syncad").appendChild(movingContainer);var contPos=Mb.helpers.getBounds(document.getElementById("mb_container"));container.style.width=container.offsetWidth+"px";container.style.position="relative";syncad.parentNode.style.overflow="hidden"
;if(typeof window.MB_PADDING!="undefined"){syncad.parentNode.style.marginTop=window.MB_PADDING+"px";if(!Mb.helpers.hasClass(syncad,"floating_banner")&&!Mb.helpers.hasClass(syncad,"bottom_banner")&&!Mb.helpers.hasClass(syncad,"top_banner"))newCont.style.marginTop=window.MB_PADDING+"px"}if(!Mb.helpers.hasClass(syncad,"inread_banner")){var slots=document.getElementsByClassName("syncad_slot")
;if(slots.length>0)Mb.syncad.slotsList=["mb_video_syncad"];else Mb.syncad.slotsList=["mb_video_syncad","mb_video_syncad_bottom"];for(var slotIdx=0;slotIdx<slots.length;slotIdx++)Mb.syncad.slotsList.push(slots[slotIdx].id)}else Mb.syncad.slotsList=["mb_video_syncad"];if(Mb.helpers.hasClass(syncad,"floating_banner")){var floating=document.createElement("div");floating.id="mb_video_syncad_floating";floating.style.position="fixed";floating.style.width="400px";floating.style.height="224px"
;newCont.style.width=floating.style.width}else if(Mb.helpers.hasClass(syncad,"bottom_banner")||Mb.helpers.hasClass(syncad,"top_banner")){var floating=document.createElement("div"),viewport=Mb.getViewport();var floatingHeight=parseInt(viewport.width*.5625);var maxHeight=parseInt(viewport.height*.3),maxWidth=parseInt(maxHeight/.5625);floating.style.width=maxWidth+"px";floating.style.height=maxHeight+"px";floating.id="mb_video_syncad_floating";floating.style.position="fixed"
;document.body.appendChild(floating);newCont.style.width=floating.style.width}}var nopostroll=0,novideo=0;if(Mb.endAfterPrerollCompleted[id]){nopostroll=1;novideo=1;params.flashvars["manifest_url"]=encodeURIComponent(decodeURIComponent(params.flashvars["manifest_url"]+"&display_title=2&simpleCounter=1&novideo="+novideo+"&nopostroll="+nopostroll+"&enableSyncRoll="+Mb.enableSyncAd+"&synctype="+Mb.syncadtype))
}else params.flashvars["manifest_url"]=encodeURIComponent(decodeURIComponent(params.flashvars["manifest_url"]+"&display_title=2&&simpleCounter=1&novideo="+novideo+"&nopostroll="+nopostroll+"&enableSyncRoll="+Mb.enableSyncAd+"&synctype="+Mb.syncadtype));mb_players[id].pcent=50;if(typeof window.MB_PERCENT_BEFORE_SYNCROLL!="undefined"&&window.MB_PERCENT_BEFORE_SYNCROLL>0)mb_players[id].pcent=parseInt(window.MB_PERCENT_BEFORE_SYNCROLL);mb_players[id].checkScroll=true
;mb_players[id].checkStopScroll=true;mb_players[id].delay=0}}}var player=Mb.getPlayer(id);if(Mb.helpers.getOffset(Mb.helpers.getParentNode(player),true)<Mb.helpers.getParentNode(player).offsetWidth*.5625)Mb.helpers.getParentNode(player).style.height=Mb.helpers.getParentNode(player).offsetWidth*.5625+"px";if(typeof params.flashvars["referer"]==="undefined"){params.flashvars["referer"]=document.location.href
;params.flashvars["website"]=window.location.host.substring(window.location.host.lastIndexOf(".",window.location.host.lastIndexOf(".")-1)+1);params.flashvars["domain"]=params.flahsvars["website"]}params.flashvars["url_placeholders_json"]=JSON.stringify({fgp:Mb.user_fgp});Mb.playerState[id]=0;Mb.events[id]={checkScroll:false,checkStopScroll:false};if(params.pcent>0)Mb.events[id].doMute=true;else Mb.events[id].doMute=false
;if(document.getElementById("mb_video_syncad")!=null&&mb_players[id].disable_syncad==0){document.getElementById("mb_video_syncad").parentNode.style.height="1px";document.getElementById("mb_video_syncad").style.paddingTop="1px";var paddingLeft=0,paddingRight=0;if(typeof window.MB_SYNC_PADDING_LEFT!=="undefined")paddingLeft=window.MB_SYNC_PADDING_LEFT;if(typeof window.MB_SYNC_PADDING_RIGHT!=="undefined")paddingRight=window.MB_SYNC_PADDING_RIGHT
;document.getElementById("mb_video_syncad").parentNode.style.paddingLeft=paddingLeft+"px";document.getElementById("mb_video_syncad").parentNode.style.paddingRight=paddingRight+"px"}Mb.player.params[id]=params;var forceHtml5=false;if(typeof params.forceHtml5!="undefined")forceHtml5=params.forceHtml5;if(typeof window.mbswfobject==="undefined"||forceHtml5){Mb.player.boot5(id);return}if(typeof window.mb_script_started!="undefined"){var now=(new Date).getTime()
;console.log("(MB) Swf : "+(now-window.mb_script_started)+" ms")}params.attributes["styleClass"]+=" "+document.getElementById(id).className;try{window.mbswfobject.embedSWF("//static.mediabong.com/swf/player_"+params.player_version+".swf",id,params.width,params.height,"10.2.0","",params.flashvars,params.params,params.attributes,Mb.player.callBack.writePlayer)}catch(e){Mb.player.boot5(id)}},init5:function(id){if(mb_players[id].jsonDoc!=null&&typeof mb_players[id].jsonDoc=="string"){
mb_players[id].jsonDoc=JSON.parse(mb_players[id].jsonDoc);Mb.mobile.initialize(id);if(Mb.isIphone()&&Mb.enableSyncAd)Mb.mobile.canvas.createElements(mb_players[id].myPlayer.el().querySelector(".vjs-tech"));return}var loadManifestCallback=function(jsonDoc){if(jsonDoc=="")return;mb_players[id].jsonDoc=JSON.parse(jsonDoc);Mb.mobile.initialize(id);if(Mb.isIphone()&&Mb.enableSyncAd)Mb.mobile.canvas.createElements(mb_players[id].myPlayer.el().querySelector(".vjs-tech"))}
;Mb.helpers.doXdr(unescape(mb_players[id].flashvars.manifest_url),true,false,loadManifestCallback);return},loadAdservers:function(playerId,poolUrls,timeout,noAdCallBack,adCallBack){Mb.player.adserverReply=[];for(var currentUrlIdx=0;currentUrlIdx<poolUrls.length;currentUrlIdx++){(function(){var url=poolUrls[currentUrlIdx].url,adserver_id=poolUrls[currentUrlIdx].id,clickBehavior=0,adserverCpm=10;if(typeof poolUrls[currentUrlIdx].cpm!=="undefined")adserverCpm=poolUrls[currentUrlIdx].cpm
;if(typeof poolUrls[currentUrlIdx].videoAdClickBehavior!=="undefined")click_behavior=poolUrls[currentUrlIdx].videoAdClickBehavior;else if(typeof poolUrls[currentUrlIdx].video_ad_click_behavior!=="undefined")click_behavior=poolUrls[currentUrlIdx].video_ad_click_behavior;url=Mb.helpers.parseUrl(url,{},playerId);Mb.player.callBack.adserverLoading(playerId);try{if(window.MB_DEV_SCRIPT)Mb.helpers.doXdr(url,true,true,function(adTagResponse){adTagResponse.click_behavior=click_behavior
;adTagResponse.adserver_id=adserver_id;var responseHeaders=Mb.helpers.parseResponseHeaders(adTagResponse.getAllResponseHeaders());if(responseHeaders.hasOwnProperty("ID-DE-JEAN")){var headerResp=responseHeaders["ID-DE-JEAN"];headerResp=JSON.parse(headerResp);Mb.rtb_dealId=headerResp.d;Mb.rtb_partnerId=headerResp.p;Mb.rtb_seatId=headerResp.s;Mb.rtb_cpm=headerResp.a}else{Mb.rtb_dealId="";Mb.rtb_partnerId="";Mb.rtb_seatId="";Mb.rtb_cpm=adserverCpm}Mb.player.adserverReply.push(adTagResponse)
;Mb.player.processAdserverReplies(playerId,noAdCallBack,adCallBack,poolUrls.length,0)},function(){},timeout);else Mb.helpers.doXdr(url,true,true,function(adTagResponse){adTagResponse.click_behavior=click_behavior;adTagResponse.adserver_id=adserver_id;var responseHeaders=Mb.helpers.parseResponseHeaders(adTagResponse.getAllResponseHeaders());if(responseHeaders.hasOwnProperty("ID-DE-JEAN")){var headerResp=responseHeaders["ID-DE-JEAN"];headerResp=JSON.parse(headerResp);Mb.rtb_dealId=headerResp.d
;Mb.rtb_partnerId=headerResp.p;Mb.rtb_seatId=headerResp.s;Mr.rtb_cpm=headerResp.a}else{Mb.rtb_dealId="";Mb.rtb_partnerId="";Mb.rtb_seatId="";Mb.rtb_cpm=adserverCpm}Mb.player.adserverReply.push(adTagResponse);Mb.player.processAdserverReplies(playerId,noAdCallBack,adCallBack,poolUrls.length,0)},function(){},timeout)}catch(e){Mb.helpers.log(e);Mb.mobile.prReportingTracking(playerId,4);Mb.player.callBack.adserverFailed(playerId);player.trigger("adsloaderror");return}})()}
Mb.player.adserverLoadTimeout=setTimeout(function(){Mb.player.processAdserverReplies(playerId,noAdCallBack,adCallBack,poolUrls.length,1)},timeout+poolUrls.length)},processAdserverReplies:function(playerId,noAdCallBack,adCallBack,numberOfRepliesToWait,timeoutReached){if(timeoutReached==0){Mb.helpers.log("Waiting for "+numberOfRepliesToWait+" replies, got "+Mb.player.adserverReply.length);if(Mb.player.adserverReply.length!=numberOfRepliesToWait)return;clearTimeout(Mb.player.adserverLoadTimeout)}
Mb.helpers.log("Adservers : Got "+Mb.player.adserverReply.length+" replies");var tmp=[];for(var idx=0;idx<Mb.player.adserverReply.length;idx++){if(Mb.player.adserverReply[idx].responseText!="")tmp.push(Mb.player.adserverReply[idx])}Mb.player.adserverReply=tmp;if(Mb.player.adserverReply.length==0){noAdCallBack();return}Mb.player.adserverReply.sort(function(a,b){return parseFloat(b.cpm)-parseFloat(a.cpm)});var winner=Mb.player.adserverReply[0];adCallBack(winner)},remove:function(id){
window.mbswfobject.removeSWF("id")},addMuteButton:function(id){var player=Mb.getPlayer(id);if(Mb.helpers.getParentNode(player).getElementsByClassName("mb_mute_btn").length>0)return;var mute=document.createElement("img");mute.style.border="0px";mute.style.width="43px";mute.style.height="43px";mute.style.position="absolute";mute.style.left="10px";mute.style.top="10px";var parentZIndex=0;try{parentZIndex=Mb.helpers.getParentNode(player).styles.zIndex;if(isNaN(parseInt(parentZIndex)))parentZIndex=0
}catch(e){parentZIndex=0}parentZIndex++;mute.style.zIndex=parentZIndex;if(Mb.player.currentVolume==0){mute.src="//static.mediabong.com/img/mute_white.png";mute.className="mb_mute_btn mb_mute_on"}else{mute.src="//static.mediabong.com/img/unmute_white.png";mute.className="mb_mute_btn mb_mute_off"}mute.onclick=function(){Mb.player.muteBtnClick(id)};if(Mb.helpers.getParentNode(player).style.position!="relative")Mb.helpers.getParentNode(player).style.position="relative"
;Mb.helpers.getParentNode(player).appendChild(mute)},removeMuteButton:function(id){var player=Mb.getPlayer(id);var btn=Mb.helpers.getParentNode(player).getElementsByClassName("mb_mute_btn");while(btn.length>0){btn[0].parentNode.removeChild(btn[0])}},muteBtnClick:function(id){Mb.player.stopMouseOverVolumeEvents=true;var muteBtn=document.getElementById(id).parentNode.getElementsByClassName("mb_mute_btn");if(muteBtn.length==0)return;muteBtn=muteBtn[0];if(Mb.helpers.hasClass(muteBtn,"mb_mute_on")){
Mb.player.setVolume(id,1,null,null);Mb.player.setMuteIcon(id,1)}else{Mb.player.setVolume(id,Mb.player.muteVolume,null,null);Mb.player.setMuteIcon(id,0)}},setMuteIcon:function(id,volume){var player=Mb.getPlayer(id);var muteBtn=Mb.helpers.getParentNode(player).getElementsByClassName("mb_mute_btn");if(muteBtn.length==0)return;muteBtn=muteBtn[0];if(volume==1){muteBtn.className="mb_mute_btn mb_mute_off";muteBtn.src="//static.mediabong.com/img/unmute_white.png"}else{
muteBtn.className="mb_mute_btn mb_mute_on";muteBtn.src="//static.mediabong.com/img/mute_white.png"}},setVolume:function(id,volume,volumeOnMouseOver,volumeOnMouseOut){var player=Mb.getPlayer(id);if(Mb.player.stopMouseOverVolumeEvents){volumeOnMouseOver=null;volumeOnMouseOut=null}else{if(document.getElementById("mb_video_syncad")!=null||Mb.helpers.hasClass(player,"syncad")||Mb.helpers.hasClass(player,"syncad_main")){volumeOnMouseOver=1;volumeOnMouseOut=Mb.player.startVolume}}if(player){
player.setVolume(volume);if(volume==0)Mb.player.isMuted=1;else Mb.player.isMuted=0;Mb.player.currentVolume=volume;Mb.player.setMuteIcon(id,volume);if(volumeOnMouseOver!=null){if(typeof player.one!="undefined"){player.off("mouseover");player.one("mouseover",function(){Mb.player.setVolume(id,volumeOnMouseOver);Mb.events.muteOnStart=false})}else{player.onmouseover=function(){Mb.player.setVolume(id,volumeOnMouseOver);Mb.events.muteOnStart=false}}}else{
if(typeof player.off!="undefined")player.off("mouseover");else player.onmouseover=null}if(volumeOnMouseOut!=null){if(typeof player.one!="undefined"){player.off("mouseout");player.one("mouseout",function(){Mb.player.setVolume(id,volumeOnMouseOut)})}else{player.onmouseout=function(){Mb.player.setVolume(id,volumeOnMouseOut)}}}else{if(typeof player.off!="undefined")player.off("mouseout");else player.onmouseout=null}return true}return false},start:function(id,delay,mute){if(delay>0){
var handleName="playContent_"+id;Mb.handles.handleName=setTimeout(function(){Mb.player.start(id,0,mute)},delay);Mb.timeouts.push(Mb.handles.handleName);return}var player=Mb.getPlayer(id);if(player!=null){if(mb_players[id].isExternal==1){if(typeof Mb.player.external.start["p"+Mb.player.params[id].prod]!="undefined")Mb.player.external.start["p"+Mb.player.params[id].prod](id)}else{if(typeof player.playVideo=="function"){if(Mb.playVideo)player.playVideo();else player.playAd()
;if(Mb.syncad.adImpressionDone){mb_players[id].isPlaying=true;Mb.player.startTracking(id)}}else{return}}Mb.playerState[id]=1;if(document.getElementById("mb_video_syncad")!=null||Mb.helpers.hasClass(document.getElementById(id),"syncad")){Mb.player.setVolume(id,Mb.player.startVolume,1,Mb.player.startVolume);Mb.events[id].checkScroll=false;Mb.events[id].checkStopScroll=true}else{if(mute){Mb.player.setVolume(id,Mb.player.startVolume,1,null);Mb.events[id].checkScroll=false
;Mb.events[id].checkStopScroll=true}else{Mb.player.setVolume(id,1,null,null)}}}},pause:function(id){var player=Mb.getPlayer(id);if(player&&Mb.playerState[id]==1){player.pauseVideo();player.pauseAd();Mb.player.callBack.adPaused(id);Mb.playerState[id]=0;Mb.events[id].checkScroll=true;Mb.events[id].checkStopScroll=false}},startTracking:function(id){clearTimeout(Mb.player.adTimeout);Mb.player.adTimeout=window.setTimeout(function(){var currentPlayerPosition=0
;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom")currentPlayerPosition=1;var visibility=Mb.getVisibility(id,true);Mb.viewabilityTotal+=visibility;Mb.player.handleRetargetingTrackers(id,visibility);if(visibility>=50){Mb.player.impressionMrcDuration++;var attentionWeight=parseFloat(Mb.helpers.getAttentionScore(id));if(!Mb.player.attentionScoreAdClickedFlag)Mb.attentionScore+=attentionWeight;if(attentionWeight>=.9)Mb.attentionScoreWeightExceeded++;Mb.helpers.calculatePressures()}else{
Mb.player.impressionMrcDuration=0}if(!mb_players[id].isPlaying||Mb.player.cancelTimeTracker)return;if(typeof mb_players[id].timeTracker!="undefined"&&mb_players[id].timeTracker!=""){Mb.timestamps.currentAdTime+=1;var url=Mb.helpers.parseUrl(mb_players[id].timeTracker,{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:visibility,currentPosition:currentPlayerPosition},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){})
;Mb.player.startTracking(id)}if(typeof mb_players[id].enable_attention_test!="undefined"&&mb_players[id].enable_attention_test==1){if(typeof mb_players[id].timeTrackerTest!="undefined"&&mb_players[id].timeTrackerTest!=""){Mb.timestamps.currentAdTime+=1;var url=Mb.helpers.parseUrl(mb_players[id].timeTrackerTest,{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:visibility,currentPosition:currentPlayerPosition},id)
;Mb.helpers.loadUrl(url,"text/javascript","script",function(){});Mb.player.startTracking(id)}}if(Mb.player.impressionMrcDuration==2){if(typeof mb_players[id].mrcImpression!="undefined"&&mb_players[id].mrcImpression!=""){var url=Mb.helpers.parseUrl(mb_players[id].mrcImpression,{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:visibility,currentPosition:currentPlayerPosition},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){})}}
if(typeof Mb.attentionTrackers==="object"){var attnScore=Mb.helpers.getAttentionScore(id);for(var reqAttnScore in Mb.attentionTrackers){if(attnScore>=reqAttnScore){for(var idx in Mb.attentionTrackers[reqAttnScore]){if(Mb.attentionTrackers[reqAttnScore][idx]!=""){var url=Mb.helpers.parseUrl(Mb.attentionTrackers[reqAttnScore][idx],{},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){});Mb.attentionTrackers[reqAttnScore][idx]=""}}}}}},1e3);Mb.timeouts.push(Mb.player.adTimeout)},
stopTracking:function(id){clearTimeout(Mb.player.adTimeout)},external:{start:{p756:function(id){var _player=document.getElementById("WATPlayerIframe_"+id);if(_player&&_player.contentWindow){try{_player.contentWindow.postMessage("setPlay@@","http://www.wat.tv")}catch(err){Mb.helpers.log("WatPlayer - sendEvent - error - "+event+err.message)}}}},pause:{p756:function(id){var _player=document.getElementById("WATPlayerIframe_"+id);if(_player&&_player.contentWindow){try{
_player.contentWindow.postMessage("setPause@@","http://www.wat.tv")}catch(err){Mb.helpers.log("WatPlayer - sendEvent - error - "+event+err.message)}}}},setVolume:{p756:function(id,volume){var _event="";if(volume==0)_event="setMute";else _event="setUnMute";var _player=document.getElementById("WATPlayerIframe_"+id);if(_player&&_player.contentWindow){try{_player.contentWindow.postMessage(_event+"@@","http://www.wat.tv")}catch(err){Mb.helpers.log("WatPlayer - sendEvent - error - "+event+err.message)
}}}}},callBack:{adserverTime:0,playerReady:function(id){Mb.helpers.log("Player Ready ("+id+")");var player=Mb.getPlayer(id);if(document.getElementById("mb_video_syncad")!=null&&mb_players[id].disable_syncad==0&&typeof window.MB_FIXED_SYNCROLL!=="undefined"&&window.MB_FIXED_SYNCROLL==1){var animateTo=Mb.helpers.calculateElementHeightByRatio(document.getElementById("mb_video_syncad"));var mbSyncadHeight=Mb.helpers.addTitleAndCtaHeight(animateTo);if(typeof window.MB_PADDING!="undefined"){
document.getElementById("mb_video_syncad").parentNode.style.marginTop=window.MB_PADDING+"px";document.getElementById("mb_video_syncad").parentNode.style.paddingTop="";document.getElementById("mb_video_syncad").parentNode.style.backgroundColor=""}document.getElementById("mb_video_syncad").parentNode.style.height=mbSyncadHeight+"px";document.getElementById("mb_container").style.height=animateTo+"px";Mb.syncad.playerDisplayed=true
;Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad"))}if(Mb.isIphone()){Mb.helpers.log("iPhone detected, no autoStart on scroll")}else{var functionEvent=function(){if(Mb.forceStartOnScroll==true){Mb.forceStartOnScroll=false;player.playVideo();return}var event=Mb.getPosition(id,true);Mb.helpers.log("Event : "+event);if(event=="play")player.playAd();else if(event=="pause")player.pause()}
;if(Mb.isMobile&&Mb.player.params[id].chrome55Plus)Mb.userGesture.handle(functionEvent);else{document.addEventListener("touchstart",functionEvent);Mb.addToEventsList("touchstart",functionEvent,document,false)}}mb_players[id].ready=true;var player=Mb.getPlayer(id);Mb.events[id].checkScroll=true;Mb.events[id].checkStopScroll=false;if(player.addPlayerEventListener){player.addPlayerEventListener("adStarted","Mb.player.callBack.adStarted")
;player.addPlayerEventListener("adCompleted","Mb.player.callBack.adCompleted");player.addPlayerEventListener("adPaused","Mb.player.callBack.adPaused");player.addPlayerEventListener("adResumed","Mb.player.callBack.adResumed");player.addPlayerEventListener("prerollStarted","Mb.player.callBack.prerollStarted");player.addPlayerEventListener("postrollStarted","Mb.player.callBack.postrollStarted");player.addPlayerEventListener("videoStarted","Mb.player.callBack.videoStarted")
;player.addPlayerEventListener("videoCompleted","Mb.player.callBack.videoCompleted");player.addPlayerEventListener("videoPaused","Mb.player.callBack.videoPaused");player.addPlayerEventListener("videoResumed","Mb.player.callBack.videoResumed");player.addPlayerEventListener("replayClicked","Mb.player.callBack.replayClicked");player.addPlayerEventListener("manifestLoaded","Mb.player.callBack.manifestLoaded");player.addPlayerEventListener("adImpression","Mb.player.callBack.adImpression")
;player.addPlayerEventListener("adCreativeView","Mb.player.callBack.adCreativeView");player.addPlayerEventListener("adStart","Mb.player.callBack.adStart");player.addPlayerEventListener("adFirstQuartile","Mb.player.callBack.adFirstQuartile");player.addPlayerEventListener("adMidPoint","Mb.player.callBack.adMidPoint");player.addPlayerEventListener("adThirdQuartile","Mb.player.callBack.adThirdQuartile");player.addPlayerEventListener("adCloseLinear","Mb.player.callBack.adCloseLinear")
;player.addPlayerEventListener("adComplete","Mb.player.callBack.adComplete");player.addPlayerEventListener("adClickTracking","Mb.player.callBack.adClickTracking");player.addPlayerEventListener("adMediaFileSelected","Mb.player.callBack.adMediaFileSelected");player.addPlayerEventListener("adLoaded","Mb.player.callBack.adLoaded");player.addPlayerEventListener("adTrackingReady","Mb.player.callBack.adTrackingReady");player.addPlayerEventListener("videoImpression","Mb.player.callBack.videoImpression")
;player.addPlayerEventListener("videoStart","Mb.player.callBack.videoStart");player.addPlayerEventListener("videoFirstQuartile","Mb.player.callBack.videoFirstQuartile");player.addPlayerEventListener("videoMidPoint","Mb.player.callBack.videoMidPoint");player.addPlayerEventListener("videoThirdQuartile","Mb.player.callBack.videoThirdQuartile");player.addPlayerEventListener("videoComplete","Mb.player.callBack.videoComplete")
;player.addPlayerEventListener("adserverListEmptied","Mb.player.callBack.adserverListEmptied");player.addPlayerEventListener("adserverLoading","Mb.player.callBack.adserverLoading");player.addPlayerEventListener("adserverCompleted","Mb.player.callBack.adserverCompleted");player.addPlayerEventListener("adserverFailed","Mb.player.callBack.adserverFailed")}else if(player.attachEvent){player.attachEvent("onadStarted","Mb.player.callBack.adStarted")
;player.attachEvent("onadCompleted","Mb.player.callBack.adCompleted");player.attachEvent("onadPaused","Mb.player.callBack.adPaused");player.attachEvent("onadResumed","Mb.player.callBack.adResumed");player.attachEvent("onprerollStarted","Mb.player.callBack.prerollStarted");player.attachEvent("onpostrollStarted","Mb.player.callBack.postrollStarted");player.attachEvent("onvideoStarted","Mb.player.callBack.videoStarted");player.attachEvent("onvideoCompleted","Mb.player.callBack.videoCompleted")
;player.attachEvent("onvideoPaused","Mb.player.callBack.videoPaused");player.attachEvent("onvideoResumed","Mb.player.callBack.videoResumed");player.attachEvent("onreplayClicked","Mb.player.callBack.replayClicked");player.attachEvent("onmanifestLoaded","Mb.player.callBack.manifestLoaded");player.attachEvent("onadImpression","Mb.player.callBack.adImpression");player.attachEvent("onadCreativeView","Mb.player.callBack.adCreativeView");player.attachEvent("onadStart","Mb.player.callBack.adStart")
;player.attachEvent("onadFirstQuartile","Mb.player.callBack.adFirstQuartile");player.attachEvent("onadMidPoint","Mb.player.callBack.adMidPoint");player.attachEvent("onadThirdQuartile","Mb.player.callBack.adThirdQuartile");player.attachEvent("onadCloseLinear","Mb.player.callBack.adCloseLinear");player.attachEvent("onadComplete","Mb.player.callBack.adComplete");player.attachEvent("onadClickTracking","Mb.player.callBack.adClickTracking")
;player.attachEvent("onadMediaFileSelected","Mb.player.callBack.adMediaFileSelected");player.attachEvent("onadLoaded","Mb.player.callBack.adLoaded");player.attachEvent("onadTrackingReady","Mb.player.callBack.adTrackingReady");player.attachEvent("onvideoImpression","Mb.player.callBack.videoImpression");player.attachEvent("onvideoStart","Mb.player.callBack.videoStart");player.attachEvent("onvideoFirstQuartile","Mb.player.callBack.videoFirstQuartile")
;player.attachEvent("onvideoMidPoint","Mb.player.callBack.videoMidPoint");player.attachEvent("onvideoThirdQuartile","Mb.player.callBack.videoThirdQuartile");player.attachEvent("onvideoComplete","Mb.player.callBack.videoComplete");player.attachEvent("onadserverListEmptied","Mb.player.callBack.adserverListEmptied");player.attachEvent("onadserverLoading","Mb.player.callBack.adserverLoading");player.attachEvent("onadserverCompleted","Mb.player.callBack.adserverCompleted")
;player.attachEvent("onadserverFailed","Mb.player.callBack.adserverFailed")}if(player.isIMA){var IMAtriggered=false;var initIMA=function(){if(IMAtriggered)return;if(!Mb.adsEnabled)return;if(Mb.syncad.prerollCompletedDone){Mb.helpers.log("Preroll already completed. IMA will not be initiated.")}else{if(Mb.playerIsHtml5){var player=Mb.getPlayer(id);try{player.initIMA()}catch(e){Mb.helpers.log("Error while initiating IMA. Stopping event.")}}}if(!Mb.isMobile||!Mb.player.params[id].chrome55Plus){
document.removeEventListener("touchcancel",initIMA);document.removeEventListener("touchstart",initIMA)}IMAtriggered=true};if(Mb.isMobile&&Mb.player.params[id].chrome55Plus)Mb.userGesture.handle(initIMA);else Mb.addscrollEvent(initIMA)}if(Mb.isIphone()&&Mb.enableSyncAd){var initMp3Player=function(){if(Mb.mobile.canvas.mp3Enabled)return;if(Mb.mobile.canvas.audio!=null)Mb.mobile.canvas.audio.enableUserGesture(initMp3Player)};Mb.addscrollEvent(initMp3Player)}
if(mb_players[id].pcent>0||document.getElementById("mb_video_syncad")!=null){var scrollTimer=null;Mb.addscrollEvent(function(){if(Mb.isIphone()&&Mb.iOSversion()>=8){if(scrollTimer!=null)clearTimeout(scrollTimer);scrollTimer=window.setTimeout(function(){scrollTimer=null;Mb.getPosition(id,false)},500)}else Mb.getPosition(id,false)});Mb.getPosition(id,false)}else{if(mb_players[id].mouseOver==1){if(player.el)player=player.el();player.onmouseover=function(){Mb.delayStart(id)}
;player.onmouseout=function(){Mb.stopDelay(id)}}}if(typeof window.MB_initCallBack!=="undefined"){MB_initCallBack(id)}if(document.getElementById("mb_video_syncad")!=null&&id!="mb_video_syncad"&&mb_players[id].disable_syncad==0){Mb.syncrollHasAd=false;Mb.forceStartOnScroll=true;try{var timeoutid=window.setTimeout(function(){Mb.player.start(id,0,true)},100);Mb.timeouts.push(timeoutid)}catch(err){Mb.helpers.log(err)}Mb.player.callBack.event(id,"printSyncroll")}Mb.player.callBack.event(id,"print")
;Mb.fireCallbacks("playerReady",id)},externalPlayerReady:function(urlList){Mb.helpers.log("External player Ready ("+id+")");urlList.forEach(function(url){url=Mb.helpers.parseUrl(decodeURIComponent(url),[],"mb_container");Mb.helpers.loadUrl(url,"text/javascript","script",function(){})});Mb.fireCallbacks("externalPlayerReady",id)},writePlayer:function(e){if(typeof window.mb_script_started!="undefined"){var now=(new Date).getTime()
;console.log("(MB) WritePlayer : "+(now-window.mb_script_started)+" ms")}var url="";if(!e.success){Mb.player.boot5(e.id)}var css=document.createElement("style");css.type="text/css";var styles="#"+e.id+" { height: 100%!important; }";if(css.styleSheet)css.styleSheet.cssText=styles;else css.appendChild(document.createTextNode(styles));document.getElementsByTagName("head")[0].appendChild(css)},prerollStarted:function(id){Mb.helpers.log("Preroll Started ("+id+")")
;if(Mb.enableSyncAd)Mb.syncad.checkDisplay(Mb.getPlayer(id),id)},replayClicked:function(id){Mb.helpers.log("Replay Clicked ("+id+")")},manifestLoaded:function(id){Mb.helpers.log("Manifest Loaded ("+id+")")},adCreativeView:function(id){Mb.helpers.log("Ad CreateView ("+id+")")},adStart:function(id){Mb.helpers.log("Ad Start ("+id+")");Mb.fireCallbacks("adStart",id)},adFirstQuartile:function(id){Mb.helpers.log("Ad 25% ("+id+")");var currentPlayerPosition=0
;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom")currentPlayerPosition=1;if(typeof mb_players[id].timeTracker!="undefined"&&mb_players[id].timeTracker!=""&&!Mb.isDemo){var url=Mb.helpers.parseUrl(mb_players[id].timeTracker,{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:Mb.getVisibility(id,true),currentPosition:currentPlayerPosition,adprogress:25},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){});Mb.player.startTracking(id)}
Mb.fireCallbacks("adFirstQuartile",id)},adMidPoint:function(id){Mb.helpers.log("Ad 50% ("+id+")");var currentPlayerPosition=0;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom")currentPlayerPosition=1;if(typeof mb_players[id].timeTracker!="undefined"&&mb_players[id].timeTracker!=""&&!Mb.isDemo){var url=Mb.helpers.parseUrl(mb_players[id].timeTracker,{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:Mb.getVisibility(id,true),
currentPosition:currentPlayerPosition,adprogress:50},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){});Mb.player.startTracking(id)}Mb.fireCallbacks("adMidpoint",id)},adThirdQuartile:function(id){Mb.helpers.log("Ad 75% ("+id+")");var currentPlayerPosition=0;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom")currentPlayerPosition=1;if(typeof mb_players[id].timeTracker!="undefined"&&mb_players[id].timeTracker!=""&&!Mb.isDemo){
var url=Mb.helpers.parseUrl(mb_players[id].timeTracker,{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:Mb.getVisibility(id,true),currentPosition:currentPlayerPosition,adprogress:75},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){});Mb.player.startTracking(id)}Mb.fireCallbacks("adThirdQuartile",id)},adCloseLinear:function(id){Mb.helpers.log("Ad Close Linear ("+id+")");var currentPlayerPosition=0
;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom")currentPlayerPosition=1;Mb.fireCallbacks("adCloseLinear",id)},adComplete:function(id){Mb.helpers.log("Ad 100% ("+id+")");var currentPlayerPosition=0;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom")currentPlayerPosition=1;if(typeof mb_players[id].timeTracker!="undefined"&&mb_players[id].timeTracker!=""){var visibility=Mb.getVisibility(id,true);Mb.viewabilityTotal+=visibility;Mb.timestamps.currentAdTime+=1
;var url=Mb.helpers.parseUrl(mb_players[id].timeTracker,{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:visibility,currentPosition:currentPlayerPosition,adprogress:100},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){});Mb.player.startTracking(id)}Mb.fireCallbacks("adComplete",id)},adClickTracking:function(id){Mb.helpers.log("Ad Clicked ("+id+")");if(Mb.timestamps.currentAdTime>8){if(Mb.attentionScore<48.75)Mb.attentionScore=48.75
;Mb.player.attentionScoreAdClickedFlag=1}Mb.fireCallbacks("adClickTracking",id)},adTrackingReady:function(id){Mb.helpers.log("AdTracking Ready ("+id+")");var player=Mb.getPlayer(id);var tracking=JSON.parse(player.getAdTracking());Mb.syncad.adTracking[id]={clickTracking:tracking.clickTracking,clickThrough:tracking.clickThrough}},videoStart:function(id){Mb.helpers.log("Video Start ("+id+")")},videoFirstQuartile:function(id){Mb.helpers.log("Video 25% ("+id+")")},videoMidPoint:function(id){
Mb.helpers.log("Video 50% ("+id+")")},videoThirdQuartile:function(id){Mb.helpers.log("Video 75% ("+id+")")},videoComplete:function(id){Mb.helpers.log("Video Complete ("+id+")")},adserverLoading:function(id){Mb.player.callBack.adserverTime=(new Date).getTime();Mb.enableIntelligentSyncroll=Mb._enableIntelligentSyncroll;Mb.stopSyncIfQuickPlay=Mb._stopSyncIfQuickPlay;if(typeof mb_players[id].adserverLoading!="undefined"){var url=mb_players[id].adserverLoading;var adblocked=Mb.adsEnabled?0:1
;if(!Mb.player.adserverListStarted){Mb.player.adserverListStarted=true;Mb.helpers.loadUrl(Mb.helpers.parseUrl(url,{ad_server_id:0,adblock:adblocked},id),"text/javascript","script",function(){})}var player=Mb.getPlayer(id);var adid=player.getAdServerId();Mb.helpers.loadUrl(Mb.helpers.parseUrl(url,{ad_server_id:adid,adblock:adblocked},id),"text/javascript","script",function(){})}Mb.helpers.log("Adserver Loading ("+id+")")},adserverCompleted:function(id){
var now=(new Date).getTime(),duration=now-Mb.player.callBack.adserverTime,player=Mb.getPlayer(id),adid=player.getAdServerId();Mb.helpers.log("Adserver Completed in "+duration+" ms");if(typeof mb_players[id].latencyTracker!="undefined"){var url=mb_players[id].latencyTracker;Mb.helpers.loadUrl(Mb.helpers.parseUrl(url,{ad_server_id:adid,latency:duration,reporting_value:"load",failed:0},id),"text/javascript","script",function(){})}},adserverFailed:function(id){
var now=(new Date).getTime(),duration=now-Mb.player.callBack.adserverTime,player=Mb.getPlayer(id),adid=player.getAdServerId();Mb.helpers.log("Adserver Failed in "+duration+" ms");if(typeof mb_players[id].latencyTracker!="undefined"){var url=mb_players[id].latencyTracker;Mb.helpers.loadUrl(Mb.helpers.parseUrl(url,{ad_server_id:adid,latency:duration,reporting_value:"error",failed:1},id),"text/javascript","script",function(){})}},adStarted:function(id){Mb.helpers.log("Ad started ("+id+")")
;Mb.bloc.flag.ispostroll=false;if(Mb.syncad.prerollCompletedDone||document.getElementById("mb_video_syncad")==null&&mb_players[id].disable_syncad==0){Mb.helpers.log("No syncroll - Will play ad ("+id+")");Mb.getPlayer(id).playAd()}if(Mb.events.muteOnStart){Mb.player.setVolume(id,Mb.player.startVolume,1,null)}if(mb_players[id].playVideo_event!="undefined"){eval(mb_players[id].playVideo_event)}if(mb_players[id].videoStart==1)return;var player=Mb.getPlayer(id);var mediaFile=player.getAdMediaFile()
;if(mediaFile.mime_type=="application/x-shockwave-flash"){var timeoutid=window.setTimeout(function(){Mb.syncad.adLoaded(id)},450);Mb.timeouts.push(timeoutid)}if(typeof window.Mb_onAdStarted!=="undefined"){Mb_onAdStarted(id)}Mb.fireCallbacks("adStarted",id)},videoStarted:function(id){Mb.syncad.prerollCompleted(id);if(Mb.endAfterPrerollCompleted[id])return;Mb.helpers.log("Video Started ("+id+")");Mb.player.removeMuteButton(id);if(Mb.events.muteOnStart){
Mb.player.setVolume(id,Mb.player.muteVolume,1,null)}if(mb_players[id].playVideo_event!="undefined"){eval(mb_players[id].playVideo_event)}mb_players[id].videoStart=1;if(typeof window.Mb_onVideoStarted!=="undefined"){Mb_onVideoStarted(id)}Mb.fireCallbacks("videoStarted",id)},videoResumed:function(id){Mb.helpers.log("Video Resumed ("+id+")");if(Mb.endAfterPrerollCompleted[id]){Mb.syncad.prerollCompleted(id);return}mb_players[id].isPlaying=true;if(typeof window.Mb_onVideoResumed!=="undefined"){
Mb_onVideoResumed(id)}Mb.fireCallbacks("videoResumed",id)},videoPaused:function(id){Mb.helpers.log("Video Paused ("+id+")");mb_players[id].isPlaying=false;if(typeof window.Mb_onVideoPaused!=="undefined"){Mb_onVideoPaused(id)}Mb.fireCallbacks("videoPaused",id)},postrollStarted:function(id){Mb.helpers.log("Postroll Started ("+id+")");Mb.bloc.flag.ispostroll=true;Mb.fireCallbacks("postrollStarted",id)},adCompleted:function(id){Mb.playVideo=true;Mb.helpers.log("Ad Completed ("+id+")")
;Mb.syncad.prerollCompleted(id);if(!Mb.endAfterPrerollCompleted[id]&&(document.getElementById("mb_video_syncad")!=null||document.getElementById("mb_video_syncad_bottom")!=null)&&mb_players[id].disable_syncad==0){if(typeof window.MB_PAUSE_AFTER_AD!="undefined"&&window.MB_PAUSE_AFTER_AD==1||typeof window.MB_PAUSE_AFTER_AD=="undefined"){var player=Mb.getPlayer(id);player.pauseVideo()}Mb.player.stopMouseOverVolumeEvents=true;mb_players[Mb.syncad.mainPlayerId].checkScroll=false
;mb_players[Mb.syncad.mainPlayerId].checkStopScroll=false}if(Mb.bloc.flag.ispostroll)Mb.player.callBack.videoCompleted(id);Mb.bloc.flag.ispostroll=false;Mb.player.stopTracking(id);Mb.fireCallbacks("adCompleted",id);if(typeof window.MB_adCompleted!=="undefined"){window.MB_adCompleted(id)}},adImpression:function(id){Mb.syncrollHasAd=true;Mb.syncad.scrolled(id);if(mb_players[id].skip_duration>0&&Mb.enableSyncAd){Mb.syncad.skipDelay=mb_players[id].skip_duration;Mb.syncad.addSkip(id)}
if(Mb.appendAdchoice)Mb.player.addAdChoice(id);if(document.getElementById("mb_video_syncad")!=null||Mb.helpers.hasClass(document.getElementById(id),"syncad")){Mb.player.setVolume(id,Mb.player.startVolume,1,Mb.player.startVolume);Mb.events[id].checkScroll=false;Mb.events[id].checkStopScroll=true}mb_players[id].isPlaying=true;Mb.syncad.adImpressionDone=true;Mb.helpers.log("Ad Impression ("+id+")");Mb.fireCallbacks("adImpression",id);Mb.timestamps.adImpression=(new Date).getTime()
;Mb.timestamps.currentAdTime=0;Mb.player.startTracking(id);if(typeof window.Mb_jsTrackers!=="undefined"&&window.Mb_jsTrackers["impression"]!=="undefined"){for(var key in window.Mb_jsTrackers["impression"]){var url=window.Mb_jsTrackers["impression"][key];Mb.helpers.loadUrl(url,"text/javascript","script",function(){})}}if(typeof window.Mb_onAdImpression!=="undefined"){Mb_onAdImpression(id)}},adPaused:function(id){mb_players[id].isPlaying=false;Mb.player.stopTracking(id)
;Mb.helpers.log("Ad Paused ("+id+")");if(document.getElementById("mb_video_syncad")!=null){Mb.syncad.timeout=setTimeout(function(){if(Mb.endAfterPrerollCompleted[Mb.syncad.mainPlayerId]&&Mb.stopSyncIfQuickPlay&&typeof Mb.timestamps.adImpression!="undefined"&&(new Date).getTime()-Mb.timestamps.adImpression<=Mb._stopSyncIfQuickPlayDuration){var timeoutid=window.setTimeout(function(){document.getElementById("mb_video_syncad_bottom").className="no_syncroll"
;document.getElementById("mb_video_syncad_bottom").style.height="0px";document.getElementById("mb_video_syncad_bottom").style.minHeight="0px";Mb.stopSyncIfQuickPlay=false;if(typeof window.Mb_syncrollRemoved!=="undefined")Mb_syncrollRemoved(id)},100);Mb.timeouts.push(timeoutid);return}},500);Mb.timeouts.push(Mb.syncad.timeout)}if(typeof window.MB_DEV_SCRIPT!="undefined"&&window.MB_DEV_SCRIPT==true&&typeof window.Mb_adPaused!="undefined"){window.Mb_adPaused()}},adResumed:function(id){
mb_players[id].isPlaying=true;Mb.player.startTracking(id);var muteBtn=document.getElementById(id).parentNode.getElementsByClassName("mb_mute_btn");if(muteBtn.length>0)muteBtn[0].style.visibility="visible";Mb.helpers.log("Ad Resumed ("+id+")");Mb.fireCallbacks("adResumed",id)},adError:function(id){Mb.helpers.log("Ad Error ("+id+")");var player=Mb.getPlayer(id);var adid=player.getAdServerId();if(typeof mb_players[id].adError!="undefined"){var url=mb_players[id].adError
;var adblocked=Mb.adsEnabled?0:1;Mb.helpers.loadUrl(Mb.helpers.parseUrl(url,{ad_server_id:adid,adblock:adblocked},id),"text/javascript","script",function(){})}},adserverListEmptied:function(id){if(Mb.endAfterPrerollCompleted[id]){Mb.syncad.prerollCompleted(id);return}Mb.helpers.log("Adserver list completed. No more adserver to load ("+id+")")},adLoaded:function(id){Mb.helpers.log("Ad Loaded ("+id+")")},adMediaFileSelected:function(id){Mb.playerState[id]=0;var ignoreResizing=false
;if(typeof window.MB_FIXED_SYNCROLL!=="undefined"&&window.MB_FIXED_SYNCROLL==1)ignoreResizing=true;if(document.getElementById("mb_video_syncad")!=null&&mb_players[id].disable_syncad==0&&!ignoreResizing){if(!Mb.hadPreroll&&!Mb.syncrollScrolled){document.getElementById("mb_container").style.height="1px";document.getElementById("mb_container").style.minHeight="0px"}}Mb.helpers.log("Ad Mediafile selected ("+id+")");var player=Mb.getPlayer(id);Mb.player.currentAdserverId=player.getAdServerId()
;Mb.helpers.loadUrl(mb_players[id].server+"/cta/"+Mb.player.currentAdserverId+".js?rnd="+Math.random(),"text/javascript","script",function(){if(mb_players[id].enableSound==1&&typeof window.Mb_startVolume!="undefined")Mb.player.startVolume=window.Mb_startVolume;else Mb.player.startVolume=Mb.player.muteVolume;if(!Mb.player.stopMouseOverVolumeEvents&&Mb.enableSyncAd){Mb.player.setVolume(id,Mb.player.startVolume,null,null)}});var mediaFile=player.getAdMediaFile();Mb.syncad.mainPlayerId=id
;if(mediaFile.mime_type!="application/x-shockwave-flash"){var timeoutid=window.setTimeout(function(){Mb.syncad.adLoaded(id)},450);Mb.timeouts.push(timeoutid)}Mb.fireCallbacks("adMediaFileSelected",id)},videoImpression:function(id){Mb.helpers.log("Video Impression ("+id+")");if(typeof window.Mb_onVideoImpression!=="undefined")Mb_onVideoImpression(id);Mb.fireCallbacks("videoImpression",id)},videoCompleted:function(id){if(Mb.endAfterPrerollCompleted[id]){Mb.syncad.prerollCompleted(id);return}
Mb.helpers.log("Video completed ("+id+")");if(typeof window.MB_videoCompleted!=="undefined")MB_videoCompleted(id);if(typeof mb_players[id].blocplayer_id!="undefined"&&mb_players[id].blocplayer_id>0){if(window.mb_blocks[mb_players[id].blocplayer_id].showNextVideo>0){var handleName="waitScreen_"+id;Mb.handles.handleName=window.setTimeout(function(){if(mb_players[id].isPlaying)return;var waitScreen=document.createElement("div"),scrollContainer=document.createElement("div")
;waitScreen.className="mb_bloc_waitscreen";var playCurrentVideoId="playCurrentVideo_"+id;var playNextVideoId="playNextVideo_"+id
;waitScreen.innerHTML="<div style='width: 60%; text-align: left;'><div style='float: left'>La vid&eacute;o suivante d&eacute;marre <br />dans <span class='seconds'>"+window.mb_blocks[mb_players[id].blocplayer_id].showNextVideo+"</span> secondes</div><div><img src='//static.mediabong.com/img/pause_off.png' style='height: 32px; margin-top: 2px; margin-left: 10px; cursor: pointer' onClick='Mb.bloc.stopNextVideo(this);'/></div></div>";waitScreen.innerHTML+="<div style='clear:both;'></div>"
;var _player=document.getElementById(id),_bloc=Mb.helpers.getParentNode(_player).parentNode;var nextIdx=Mb.bloc.getNextVideo(_bloc);var videos=window.mb_blocks[mb_players[id].blocplayer_id].videos;var nbvideos=videos.length;var tmpnextvideo=nextIdx;while(tmpnextvideo<nbvideos&&videos[tmpnextvideo].external)if(typeof videos[tmpnextvideo+1]!="undefined")tmpnextvideo++;if(tmpnextvideo<nbvideos&&typeof videos[tmpnextvideo]!="undefined")nextIdx=tmpnextvideo
;var videos_html=_bloc.getElementsByClassName("mb_bloc_carousel_item");var currentIdx=0;for(var _idx=0;_idx<videos_html.length;_idx++){if(Mb.helpers.hasClass(videos_html[_idx],"mb_bloc_item_playing"))currentIdx=_idx}var video=mb_blocks[mb_players[id].blocplayer_id].videos[nextIdx];var _thumb=document.createElement("img"),_title=document.createElement("div");_thumb.src=video.thumb;_thumb.className="thumb";_title.innerHTML=video.title;_title.className="title";_title.style.fontSize="0.7em"
;scrollContainer.style.width="70%";scrollContainer.style.marginRight="auto";scrollContainer.style.marginLeft="auto";scrollContainer.style.setProperty("text-align","center","important");var _playNextVideo=document.createElement("div");_playNextVideo.id=playNextVideoId;_playNextVideo.style.cursor="pointer";_playNextVideo.style.display="inline-block";_playNextVideo.style.backgroundColor="#4e4e4e";_playNextVideo.style.borderRadius="4px";_playNextVideo.style.padding="2px 4px"
;_playNextVideo.innerHTML="Lire maintenant ";var _playNextVideoImg=document.createElement("div");_playNextVideoImg.style.backgroundImage="url(//static.mediabong.com/next-horizontal_white.png)";_playNextVideoImg.style.setProperty("background-size","48px");_playNextVideoImg.style.backgroundPosition="-12px";_playNextVideoImg.style.display="inline-block";_playNextVideoImg.style.width="10px";_playNextVideoImg.style.height="12px";_playNextVideo.appendChild(_playNextVideoImg)
;var _playCurrentVideo=document.createElement("div");_playCurrentVideo.id=playCurrentVideoId;_playCurrentVideo.style.cursor="pointer";_playCurrentVideo.style.display="inline-block";_playCurrentVideo.style.backgroundColor="#4e4e4e";_playCurrentVideo.style.borderRadius="4px";_playCurrentVideo.style.padding="2px 4px";_playCurrentVideo.style.position="absolute";_playCurrentVideo.style.left="10px";_playCurrentVideo.style.bottom="10px";_playCurrentVideo.innerHTML=" Rejouer la vid&eacute;o"
;var _playCurrentVideoImg=document.createElement("div");_playCurrentVideoImg.style.backgroundImage="url(//static.mediabong.com/prev-horizontal_white.png)";_playCurrentVideoImg.style.setProperty("background-size","48px");_playCurrentVideoImg.style.backgroundPosition="-12px";_playCurrentVideoImg.style.display="inline-block";_playCurrentVideoImg.style.width="10px";_playCurrentVideoImg.style.height="12px";_playCurrentVideo.insertBefore(_playCurrentVideoImg,_playCurrentVideo.firstChild)
;scrollContainer.appendChild(_thumb);scrollContainer.appendChild(_title);scrollContainer.appendChild(_playNextVideo);waitScreen.appendChild(scrollContainer);waitScreen.appendChild(_playCurrentVideo);Mb.helpers.getParentNode(_player).appendChild(waitScreen);if(waitScreen.offsetWidth<400)_thumb.style.display="none";else if(waitScreen.offsetWidth>440){_thumb.src=video.thumb_full;_thumb.style.width="60%"}var playVideoById=function(videoId){clearInterval(timerVideoCompleted)
;if(mb_players[id].isPlaying)waitScreen.parentNode.removeChild(waitScreen);else{var _active=waitScreen.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_thumb")[videoId];waitScreen.parentNode.removeChild(waitScreen);Mb.bloc.playVideo(_active,mb_players[id].blocplayer_id,videoId,false,0,0)}Mb.bloc.flag.doNextVideoTimer=true};var timerVideoCompleted=window.setInterval(function(){if(!Mb.bloc.flag.doNextVideoTimer)return;var seconds=waitScreen.getElementsByClassName("seconds")
;if(seconds.length>0){var _sec=parseInt(seconds[0].innerHTML);_sec--;seconds[0].innerHTML=_sec;if(_sec<=0)playVideoById(nextIdx)}else playVideoById(nextIdx)},1e3);Mb.intervals.push(timerVideoCompleted);if(typeof window.addEventListener!="undefined"){document.getElementById(playCurrentVideoId).addEventListener("click",function(){playVideoById(currentIdx)},false);document.getElementById(playNextVideoId).addEventListener("click",function(){playVideoById(nextIdx)},false)
}else if(typeof window.attachEvent!="undefined"){document.getElementById(playCurrentVideoId).attachEvent("onclick",function(){playVideoById(currentIdx)});document.getElementById(playNextVideoId).attachEvent("onclick",function(){playVideoById(nextIdx)})}},3e3);Mb.timeouts.push(Mb.handles.handleName)}}Mb.fireCallbacks("videoCompleted",id)},event:function(id,event){if(Mb.player.params[id].events[event]!="undefined"&&Mb.player.params[id].events[event]!=null){
if(typeof Mb.player.firedEvents[id+"_"+event]!="undefined"&&Mb.player.firedEvents[id+"_"+event]==1)return;var url=Mb.helpers.parseUrl(decodeURIComponent(Mb.player.params[id].events[event]),[],id);if(Mb.isMobile)url+="&m=1";Mb.helpers.loadUrl(url,"text/javascript","script",function(){if(typeof Mb==="undefined")return;Mb.player.firedEvents[id+"_"+event]=1})}}},addAdChoice:function(id){if(document.getElementById("mb_adchoice")!=null)return
;var player=document.getElementById(id),adchoice=document.createElement("div");if(player==null)return;adchoice.id="mb_adchoice";adchoice.innerHTML="";adchoice.style.cursor="pointer";adchoice.style.position="absolute";adchoice.style.zIndex="10001";adchoice.style.top="0px";adchoice.style.left="0px";var adchoice_img=document.createElement("img");adchoice_img.id="mb_adchoice_img";adchoice_img.src="http://static.mediabong.com/img/adchoice/adchoice.png";adchoice.appendChild(adchoice_img)
;var adchoice_expand=document.createElement("div");adchoice_expand.id="mb_adchoice_expand";adchoice_expand.style.backgroundColor="#cccccc";adchoice_expand.style.fontSize="12px";adchoice_expand.style.fontFamily="'Times New Roman'";adchoice_expand.style.padding="4px 4px 6px 8px";adchoice_expand.style.cursor="default";adchoice_expand.style.display="none";var adchoice_expand_text=document.createElement("div")
;adchoice_expand_text.innerHTML="<span>Vuble delivered this advertisement.</span><br><a href='http://youradchoices.com/' target='_blank'>Learn more</a> about the benefits of interest-based advertising.";var adchoice_expand_close=document.createElement("div");adchoice_expand_close.style.float="right";adchoice_expand_close.style.cursor="pointer";adchoice_expand_close.innerHTML="[close]";adchoice_expand.appendChild(adchoice_expand_close);adchoice_expand.appendChild(adchoice_expand_text)
;adchoice.appendChild(adchoice_expand);adchoice_img.onclick=function(){adchoice_img.style.display="none";adchoice_expand.style.display="block"};adchoice_expand_close.onclick=function(event){adchoice_expand.style.display="none";adchoice_img.style.display="block"};Mb.helpers.getParentNode(player).appendChild(adchoice)},getAdDuration:function(id){var duration=30;if(Mb.syncad.adImpressionDone&&typeof Mb.getPlayer(id).getAdDuration==="function")duration=Mb.getPlayer(id).getAdDuration()
;return duration},handleRetargetingTrackers:function(id,visibility){if(Mb.retargetingTrackers){for(var key in Mb.retargetingTrackers){if(key!=="attn"){var visvalue=key.substr(12);if(visibility>=visvalue){if(typeof Mb.player.secondsTrackers[visvalue]==="undefined")Mb.player.secondsTrackers[visvalue]=0;Mb.player.secondsTrackers[visvalue]+=1;for(var tracker in Mb.retargetingTrackers[key]){var seconds=Mb.retargetingTrackers[key][tracker].value
;var operator=Mb.retargetingTrackers[key][tracker].operator;if(operator=="="&&Mb.player.secondsTrackers[visvalue]==seconds||operator==">"&&Mb.player.secondsTrackers[visvalue]>seconds){var url=Mb.helpers.parseUrl(Mb.retargetingTrackers[key][tracker].url,{},id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){});Mb.retargetingTrackers[key].splice(tracker,tracker+1)}}}else Mb.player.secondsTrackers[visvalue]=0}}}}},bloc:{params:{},videoContainer:{},timers:{},flag:{doMouseOver:true,
doNextVideoTimer:true,ispostroll:false},width:{},uniqIdList:{},touchEvent:{y:0,x:0},touchDirection:null,animateInProgress:false,init:function(id,params,isResizedBloc){if(params["testUrl"]!="")Mb.helpers.canLoadAds(params["testUrl"]);Mb.bloc.uniqIdList[id]=[];Mb.isMobile=Mb.helpers.isMobile(navigator.userAgent||navigator.vendor||window.opera);Mb.isDesktop=!Mb.isMobile;Mb.hasFlash=Mb.helpers.hasFlash();if(!Mb.hasFlash){Mb.isMobile=true}if(Mb.isMobile){var tmp=[]
;for(idx=0;idx<params["videos"].length;idx++){if(params["videos"][idx].sponsor==0)tmp.push(params["videos"][idx])}params["videos"]=tmp}window.mb_blocks[id]=params;if(typeof params.externalFonts!="undefined"&&params.externalFonts.length>0){for(var idx in params.externalFonts){Mb.helpers.loadUrl(params.externalFonts[idx],"text/css","link",function(){})}}var blocList=document.querySelectorAll(".mb_bloc_"+id);for(var blocIdx=0;blocIdx<blocList.length;blocIdx++){var container=blocList[blocIdx]
;if(container.parentNode.offsetWidth==0)container.parentNode.style.width="100%";if(container.parentNode.offsetWidth<230)continue;(function(main_container,params,blocplayerId,blocIdx){var hasChild=false,isVertical=false,isVerticalResized=false,container=document.createElement("div");var uniqId=Mb.helpers.createId(5);Mb.bloc.uniqIdList[id].push(uniqId);main_container.id="mb_bloc_"+uniqId;Mb.bloc.width["mb_bloc_"+uniqId]=main_container.offsetWidth;main_container.style.visibility="hidden"
;if(main_container.hasChildNodes())hasChild=true;if(Mb.helpers.hasClass(main_container,"mb_vertical"))isVertical=true;if(Mb.helpers.hasClass(main_container,"_mb_vertical"))isVerticalResized=true;if(params["css"]["bloc"]!="")main_container.className=main_container.className+" "+params["css"]["bloc"];main_container.style.backgroundColor=params["color"]["video_background"];if(params["title"]!=""){var _title=document.createElement("div");_title.innerHTML=params["title"]
;_title.className="mb_title mb_bloc_title mb_bloc_main_title";_title.style.padding="0px";_title.style.margin="0px";_title.style.width="100%";_title.style.color=params["color"]["bloc_title"];_title.style.fontSize=params["font-size"]["bloc_title"];_title.style.fontFamily=params["font"]["bloc_title"];_title.style.fontWeight=params["font-style"]["bloc_title"];if(typeof params["wrapper"]["bloc_title"]!="undefined"&&typeof params["wrapper"]["bloc_title"]["type"]!="undefined"){
var _wrapper=document.createElement(params["wrapper"]["bloc_title"]["type"]);_wrapper.className=params["wrapper"]["bloc_title"]["class"];_wrapper.appendChild(_title);container.appendChild(_wrapper)}else container.appendChild(_title)}if(params["video_title_position"]=="TOP"){var _mainVideoTitle=document.createElement("div"),_mainVideoTitleSpan=document.createElement("span");_mainVideoTitle.className="mb_bloc_mainvideo_title";_mainVideoTitleSpan.innerHTML=params["videos"][0]["title"]
;if(isVertical){_mainVideoTitle.style.width="100%";_mainVideoTitle.style.whiteSpace="nowrap";_mainVideoTitle.style.textOverflow="ellipsis";_mainVideoTitle.style.overflow="hidden"}_mainVideoTitle.appendChild(_mainVideoTitleSpan);container.appendChild(_mainVideoTitle)}var _videoContainer=document.createElement("div");_videoContainer.id="mb_video_"+Mb.helpers.createId(5);_videoContainer.className="mb_videodiv";if(isVertical){
_videoContainer.style.cssText="width: "+params["video_pcent"]+"%!important";_videoContainer.style.cssFloat="left"}else _videoContainer.style.width="100%";_videoContainer.style.overflow="hidden";Mb.bloc.videoContainer[id]=_videoContainer.id;var _videoThumbBig=document.createElement("img"),_playBig=document.createElement("img");_videoThumbBig.className="mb_bloc_thumb_full";_videoThumbBig.src=params["videos"][0]["thumb_full"];_videoThumbBig.style.cursor="pointer";_videoThumbBig.onload=function(){
if(typeof this.parentNode!="undefined")this.parentNode.style.height=Mb.helpers.getOffset(this,true)+"px"};_videoThumbBig.onclick=function(){var _active=this.parentNode.parentNode.getElementsByClassName("mb_bloc_current_thumb"),idx=0;if(_active.length==0){_active=this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_thumb")[0];idx=0}else{_active=_active[0];var tmp=this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_item");for(var _idx=0;_idx<tmp.length;_idx++){
if(Mb.helpers.hasClass(tmp[_idx].getElementsByClassName("mb_bloc_carousel_thumb")[0],"mb_bloc_current_thumb")){idx=_idx;break}}}Mb.bloc.playVideo(_active,blocplayerId,idx,false,0,0)};if(params.mouseover==1){var timerId=Mb.helpers.createId(5);_videoThumbBig.onmouseover=function(){Mb.bloc.timers[timerId]=setTimeout(function(){var _active=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_current_thumb"),idx=0;if(_active.length==0){
_active=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_thumb")[0];idx=0}else{_active=_active[0];var tmp=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_item");for(var _idx=0;_idx<tmp.length;_idx++){if(Mb.helpers.hasClass(tmp[_idx].getElementsByClassName("mb_bloc_carousel_thumb")[0],"mb_bloc_current_thumb")){idx=_idx;break}}}Mb.bloc.playVideo(_active,blocplayerId,idx,false,0,0)},params.delay*1e3)
;Mb.timeouts.push(Mb.bloc.timers[timerId])};_videoThumbBig.onmouseout=function(){clearTimeout(Mb.bloc.timers[timerId])}}else if(parseInt(params.autoplay)>0){var timerId="mb_bloc_"+blocIdx;Mb.helpers.addEvent(window,"scroll",function(){var pcent=Mb.helpers.getVisiblePcent(_videoThumbBig,0);if(pcent>=parseInt(params.autoplay)){clearTimeout(Mb.bloc.timers[timerId]);Mb.bloc.timers[timerId]=setTimeout(function(){if(_videoThumbBig.parentNode==null)return
;var _active=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_current_thumb"),idx=0;if(_active.length==0){_active=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_thumb")[0];idx=0}else{_active=_active[0];var tmp=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_item");for(var _idx=0;_idx<tmp.length;_idx++){if(Mb.helpers.hasClass(tmp[_idx].getElementsByClassName("mb_bloc_carousel_thumb")[0],"mb_bloc_current_thumb")){
idx=_idx;break}}}Mb.bloc.playVideo(_active,blocplayerId,idx,true)},params.delay*1e3);Mb.timeouts.push(Mb.bloc.timers[timerId])}else{clearTimeout(Mb.bloc.timers[timerId])}})}_videoContainer.appendChild(_videoThumbBig);_playBig.src=params["play_btn"];_playBig.className="mb_bloc_carousel_play";_playBig.onclick=function(){var _active=this.parentNode.parentNode.getElementsByClassName("mb_bloc_current_thumb"),idx=0;if(_active.length==0){
_active=this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_thumb")[0];idx=0}else{_active=_active[0];var tmp=this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_item");for(var _idx=0;_idx<tmp.length;_idx++){if(Mb.helpers.hasClass(tmp[_idx].getElementsByClassName("mb_bloc_carousel_thumb")[0],"mb_bloc_current_thumb")){idx=_idx;break}}}Mb.bloc.playVideo(_active,blocplayerId,idx,false,0,0)};_playBig.onload=function(){this.style.marginLeft=-(this.width/2)+"px"
;this.style.marginTop=-(this.height/2)+"px"};_videoContainer.appendChild(_playBig);container.appendChild(_videoContainer);if(params["video_title_position"]=="BOTTOM"){var _mainVideoTitle=document.createElement("div"),_mainVideoTitleSpan=document.createElement("span");_mainVideoTitle.className="mb_bloc_mainvideo_title mb_clear_left";_mainVideoTitleSpan.innerHTML=params["videos"][0]["title"];if(isVertical){_mainVideoTitle.style.width=params["video_pcent"]+"%"
;_mainVideoTitle.style.whiteSpace="nowrap";_mainVideoTitle.style.textOverflow="ellipsis"}_mainVideoTitle.appendChild(_mainVideoTitleSpan);container.appendChild(_mainVideoTitle)}if(typeof params.marquee_speed!="undefined"&&params.marquee_speed>0){_mainVideoTitle.style.overflow="hidden";_mainVideoTitleSpan.style.position="relative";_mainVideoTitleSpan.style.left="1px";_mainVideoTitleSpan.style.whiteSpace="nowrap";_mainVideoTitleSpan.style.cursor="default";_mainVideoTitle.onmouseenter=function(){
if(_mainVideoTitleSpan.offsetWidth>_mainVideoTitle.offsetWidth){marqueeInterval=setInterval(function(){_mainVideoTitleSpan.style.left=parseFloat(_mainVideoTitleSpan.style.left)-1+"px";if(-parseFloat(_mainVideoTitleSpan.style.left)>_mainVideoTitleSpan.offsetWidth)_mainVideoTitleSpan.style.left=parseFloat(_mainVideoTitle.offsetWidth)+"px"},params.marquee_speed);Mb.intervals.push(marqueeInterval)}};_mainVideoTitle.onmouseleave=function(){if(typeof marqueeInterval!="undefined"){
_mainVideoTitleSpan.style.left="0px";clearInterval(marqueeInterval)}}}var _carousel=document.createElement("div");_carousel.className="mb_bloc_bottom_container";_carousel.style.overflow="hidden";if(isVertical){_carousel.style.width=100-(params["video_pcent"]+1)+"%";_carousel.style.paddingLeft="1%"}else{_carousel.style.width="100%";_carousel.style.marginTop="10px"}_carousel.style.position="relative"
;var _leftArrowContainer=document.createElement("div"),_leftArrow=document.createElement("img"),_rightArrowContainer=document.createElement("div"),_rightArrow=document.createElement("img");if(isVertical){_leftArrow.src=params["previous_btn_vertical"];_leftArrowContainer.style.textAlign="center";_rightArrow.src=params["next_btn_vertical"];_rightArrowContainer.style.textAlign="center"}else{_leftArrow.src=params["previous_btn"];_rightArrow.src=params["next_btn"]}
_leftArrowContainer.className="mb_bloc_left_arrow";_rightArrowContainer.className="mb_bloc_right_arrow";_leftArrowContainer.appendChild(_leftArrow);_rightArrowContainer.appendChild(_rightArrow);_leftArrow.onload=function(){var item=this;var timeoutid=setTimeout(function(){Mb.bloc.setSliderWidth(item,params,blocIdx)},150);Mb.timeouts.push(timeoutid)};_leftArrow.onclick=function(){
if(!isVertical&&parseInt(this.parentNode.parentNode.getElementsByTagName("ul")[0].style.left)==0||isVertical&&parseInt(this.parentNode.parentNode.getElementsByTagName("ul")[0].style.top)==0){return}var _li=this.parentNode.parentNode.getElementsByTagName("ul")[0].getElementsByTagName("li")[0];var liWidth=_li.offsetWidth,liHeight=Mb.helpers.getOffset(_li,true)
;var containerWidth=this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_container")[0].offsetWidth,containerHeight=Mb.helpers.getOffset(this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_container")[0],true);var totalItems=this.parentNode.parentNode.getElementsByTagName("ul")[0].getElementsByTagName("li").length;var nbOfItems=0;if(!isVertical)nbOfItems=Math.round(containerWidth/liWidth);else nbOfItems=Math.round(containerHeight/liHeight);var currentIdx=0
;if(!isVertical){currentIdx=parseFloat(this.parentNode.parentNode.getElementsByTagName("ul")[0].style.left);currentIdx=Math.abs(currentIdx/liWidth)}else{currentIdx=parseFloat(this.parentNode.parentNode.getElementsByTagName("ul")[0].style.top);currentIdx=Math.abs(currentIdx/liHeight)}currentIdx=Math.round(currentIdx);var maxIdx=totalItems-nbOfItems;if(maxIdx<0)maxIdx=0;var moveToIdx=currentIdx-nbOfItems;if(moveToIdx<0)moveToIdx=0
;if(!isVertical)moveLength=Math.abs(moveToIdx-currentIdx)*liWidth;else moveLength=Math.abs(moveToIdx-currentIdx)*liHeight;var animateParam="left";if(isVertical)animateParam="top";Mb.helpers.animate(this.parentNode.parentNode.getElementsByTagName("ul")[0],animateParam,moveLength,500)};_rightArrow.onclick=function(){var _li=this.parentNode.parentNode.getElementsByTagName("ul")[0].getElementsByTagName("li")[0];var liWidth=_li.offsetWidth,liHeight=Mb.helpers.getOffset(_li,true)
;var containerWidth=this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_container")[0].offsetWidth,containerHeight=Mb.helpers.getOffset(this.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_container")[0],true);var totalItems=this.parentNode.parentNode.getElementsByTagName("ul")[0].getElementsByTagName("li").length;var nbOfItems=0;if(!isVertical)nbOfItems=Math.round(containerWidth/liWidth);else nbOfItems=Math.round(containerHeight/liHeight);var currentIdx=0
;if(!isVertical)currentIdx=parseFloat(this.parentNode.parentNode.getElementsByTagName("ul")[0].style.left);else currentIdx=parseFloat(this.parentNode.parentNode.getElementsByTagName("ul")[0].style.top);if(isNaN(currentIdx))currentIdx=0;if(!isVertical)currentIdx=Math.abs(currentIdx/liWidth);else currentIdx=Math.abs(currentIdx/liHeight);currentIdx=Math.round(currentIdx);var maxIdx=totalItems-nbOfItems;if(currentIdx==maxIdx){return}if(maxIdx<0)maxIdx=0;var moveFrom=Math.abs(currentIdx-maxIdx)
;if(moveFrom>nbOfItems)moveFrom=nbOfItems;if(!isVertical)moveFrom*=liWidth;else moveFrom*=liHeight;var animateParam="left";if(isVertical)animateParam="top";Mb.helpers.animate(this.parentNode.parentNode.getElementsByTagName("ul")[0],animateParam,moveFrom*-1,500)};_carousel.appendChild(_leftArrowContainer);_carousel.appendChild(_rightArrowContainer);var _videoListContainer=document.createElement("div"),_videoList=document.createElement("ul")
;if(isVertical)_videoListContainer.className="mb_bloc_carousel_container mb_vertical";else _videoListContainer.className="mb_bloc_carousel_container";_videoList.className="mb_bloc_carousel";_videoList.style.position="relative";_videoList.addEventListener("touchstart",function(event){var touchEvent=event;if(event.touches.length>0){touchEvent=event.touches[0]}else{touchEvent=event.changedTouches[0]}Mb.bloc.touchEvent.x=touchEvent.pageX;Mb.bloc.touchEvent.y=touchEvent.pageY},false)
;_videoList.addEventListener("touchcancel",function(event){},false);_videoList.addEventListener("touchmove",function(event){var touchEvent=event;if(event.touches.length>0){touchEvent=event.touches[0]}else{touchEvent=event.changedTouches[0]}if(isVertical){if(Math.abs(event.pageY-Mb.bloc.touchEvent.y)>100){event.stopPropagation()}if(event.pageY>Mb.bloc.touchEvent.y){event.stopPropagation()}else if(event.pageY<Mb.bloc.touchEvent.y){event.stopPropagation()}}else{
if(Math.abs(touchEvent.pageX-Mb.bloc.touchEvent.x)>100){if(Mb.bloc.touchDirection=="left")_leftArrow.click();else _rightArrow.click();event.stopPropagation()}if(touchEvent.pageX>Mb.bloc.touchEvent.x){Mb.bloc.touchDirection="left"}else if(touchEvent.pageX<Mb.bloc.touchEvent.x){Mb.bloc.touchDirection="right"}}event.preventDefault()},false);for(idx=0;idx<params["videos"].length;idx++){(function(idx,blocplayerId,isVertical,params,_videoList,isVerticalResized){
var _video=document.createElement("li"),_thumbContainer=document.createElement("div"),_thumb=document.createElement("img"),_play=document.createElement("img"),_titleContainer=document.createElement("div"),_title=document.createElement("span");if(isVertical){_video.style.display="block";_video.style.overflow="hidden"}else{_video.style.verticalAlign="top"}if(params["videos"][idx]["sponsor"]==1){_video.className="mb_bloc_carousel_item mb_bloc_carousel_item_sponsor"
}else _video.className="mb_bloc_carousel_item";if(idx==0)_video.className+=" mb_bloc_item_playing";if(!isVertical)_video.style.width=100/params["videos"].length+"%";else _video.style.height=100/params["videos"].length+"%";_thumb.src=params["videos"][idx]["thumb"];_thumb.setAttribute("data-full-size",params["videos"][idx]["thumb_full"]);_thumb.className="mb_bloc_carousel_thumb";_thumb.onmouseover=function(){if(typeof window.mb_syncad!=="undefined"&&Mb.syncad.playingSyncAd)return
;if(typeof params["videos"][idx].type!="undefined"&&params["videos"][idx].type=="link")return;Mb.bloc.thumbOver(this)};_thumb.onclick=function(){if(typeof window.mb_syncad!=="undefined"&&Mb.syncad.playingSyncAd)return;Mb.bloc.playVideo(this,blocplayerId,idx,false,0,0)};_thumb.style.cursor="pointer";if(isVerticalResized){_thumb.style.width="100%"}_thumbContainer.className="mb_bloc_item_thumb";if(isVertical){_thumbContainer.style.position="relative";_thumbContainer.style.height="100%"
;_thumbContainer.style.marginLeft="5px";_thumbContainer.style.cssFloat="left";_thumbContainer.style.width="auto"}_play.src=params["play_btn"];_play.className="mb_bloc_carousel_play";if(isVertical)_play.style.maxHeight="40%";_play.onclick=function(){if(typeof window.mb_syncad!=="undefined"&&Mb.syncad.playingSyncAd)return;Mb.bloc.playVideo(this,blocplayerId,idx,false,0,0)};_thumbContainer.appendChild(_thumb);_thumbContainer.appendChild(_play);_titleContainer.className="mb_bloc_item_title"
;_title.innerHTML=params["videos"][idx]["title"];_title.style.color=params["color"]["video_title"];_title.style.fontSize=params["font-size"]["video_title"];_title.style.fontFamily=params["font"]["video_title"];_title.style.fontWeight=params["font-style"]["video_title"];_title.style.lineHeight=parseInt(params["font-size"]["video_title"].replace("px",""))+1+"px";_title.title=params["videos"][idx]["tooltip"];_title.onclick=function(){
if(typeof window.mb_syncad!=="undefined"&&Mb.syncad.playingSyncAd)return;Mb.bloc.playVideo(this,blocplayerId,idx,false,0,0)};_titleContainer.appendChild(_title);_titleContainer.style.height=parseInt(_title.style.lineHeight)*3+"px";_video.appendChild(_thumbContainer);_video.appendChild(_titleContainer);_videoList.appendChild(_video)})(idx,blocplayerId,isVertical,params,_videoList,isVerticalResized)}_videoListContainer.appendChild(_videoList);_carousel.appendChild(_videoListContainer)
;container.appendChild(_carousel);main_container.style.padding=params["padding"]+"px";main_container.appendChild(container);Mb.helpers.addEvent(window,"resize",function(){Mb.helpers.handleResize(blocplayerId,uniqId)});if(typeof isResizedBloc=="undefined"||!isResizedBloc){var printBlocUrl=Mb.helpers.parseUrl(decodeURIComponent(params["print_bloc_url"]),[],_videoContainer.id);Mb.helpers.loadUrl(printBlocUrl,"text/javascript","script",function(){})
;var printVideoUrl=Mb.helpers.parseUrl(decodeURIComponent(params["print_video_url"]),[],_videoContainer.id);Mb.helpers.loadUrl(printVideoUrl,"text/javascript","script",function(){})}if(params["showPoweredBy"]!=""){var poweredBy=document.createElement("div");poweredBy.className="mb_bloc_poweredby";poweredBy.innerHTML=params["showPoweredBy"];container.parentNode.appendChild(poweredBy)}if(typeof params["trackers"]!="undefined"&&params["trackers"].length>0){
for(var i=0;i<params["trackers"].length;i++){Mb.helpers.loadUrl(params["trackers"][i],"text/javascript","script",function(){})}}})(container,params,id,isResizedBloc,blocIdx)}},stopNextVideo:function(btn){if(Mb.bloc.flag.doNextVideoTimer){Mb.bloc.flag.doNextVideoTimer=false;btn.src="//static.mediabong.com/img/pause_on.png"}else{Mb.bloc.flag.doNextVideoTimer=true;btn.src="//static.mediabong.com/img/pause_off.png"}},setSliderWidth:function(_arrow,params,blocIdx){
var _minWidth=params["min_item_width"],_minHeight=params["min_item_height"];var _arrowsWidth=_arrow.width*2,_videoListContainer=_arrow.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_container")[0],_nbOfItems=_videoListContainer.getElementsByTagName("li").length,videoDiv=_arrow.parentNode.parentNode.parentNode.getElementsByClassName("mb_videodiv")[0],isVertical=false,minDimension=0;if(Mb.helpers.hasClass(_videoListContainer,"mb_vertical"))isVertical=true;if(!isVertical){
_videoListContainer.style.width=_arrow.parentNode.parentNode.offsetWidth-_arrowsWidth+"px";if(document.doctype!=null)_videoListContainer.style.marginLeft=_arrow.width+"px";minDimension=_minWidth}else{_videoListContainer.style.width="100%";_videoListContainer.style.marginLeft="0px";minDimension=_minHeight}if(isVertical){_videoListContainer.parentNode.style.height=videoDiv.offsetWidth*.5625+"px";_videoListContainer.style.height=videoDiv.offsetWidth*.5625-Mb.helpers.getOffset(_arrow,true)*2+"px"
;_arrow.parentNode.style.cssFloat="none";_arrow.parentNode.style.width="100%";_arrow.parentNode.style.height=Mb.helpers.getOffset(_arrow,true)+"px";var _rightArrow=_arrow.parentNode.parentNode.getElementsByClassName("mb_bloc_right_arrow")[0];_rightArrow.style.marginTop=-(Mb.helpers.getOffset(_arrow,true)/2)+"px";_rightArrow.style.width=_arrow.parentNode.offsetWidth+"px";_rightArrow.style.bottom="0px";_rightArrow.style.height=Mb.helpers.getOffset(_arrow,true)+"px"}else{
_arrow.parentNode.style.position="absolute";_arrow.parentNode.style.top="50%";_arrow.parentNode.style.marginTop=-(_arrow.height/2)+"px";var _rightArrow=_arrow.parentNode.parentNode.getElementsByClassName("mb_bloc_right_arrow")[0];_rightArrow.style.marginTop=_arrow.parentNode.style.marginTop;_rightArrow.style.top="50%";_rightArrow.style.position="absolute"}videoDiv.style.height=videoDiv.offsetWidth*.5625+"px";if(!Mb.isMobile&&parseInt(params["autoplay"])>0){
var _videoThumbBig=videoDiv.getElementsByClassName("mb_bloc_thumb_full");if(_videoThumbBig.length>0){_videoThumbBig=_videoThumbBig[0];var pcent=Mb.helpers.getVisiblePcent(_videoThumbBig,0),blocplayerId=params["id"];if(pcent>=parseInt(params.autoplay)){var timerId="mb_bloc_"+blocIdx;Mb.bloc.timers[timerId]=setTimeout(function(){var _active=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_current_thumb"),idx=0;if(_active.length==0){
_active=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_thumb")[0];idx=0}else{_active=_active[0];var tmp=_videoThumbBig.parentNode.parentNode.getElementsByClassName("mb_bloc_carousel_item");for(var _idx=0;_idx<tmp.length;_idx++){if(Mb.helpers.hasClass(tmp[_idx].getElementsByClassName("mb_bloc_carousel_thumb")[0],"mb_bloc_current_thumb")){idx=_idx;break}}}Mb.bloc.playVideo(_active,blocplayerId,idx,true,0,0)},params.delay*1e3);Mb.timeouts.push(Mb.bloc.timers[timerId])
}else{clearTimeout(Mb.bloc.timers[timerId])}}}var ulWidth=_videoListContainer.offsetWidth,ulHeight=Mb.helpers.getOffset(_videoListContainer,true),liWidth=ulWidth/_nbOfItems,liHeight=ulHeight/_nbOfItems;var nb_to_display=_nbOfItems;var _dim=0;if(isVertical)_dim=liHeight;else _dim=liWidth;while(_dim<minDimension){nb_to_display--;if(isVertical)_dim=ulHeight/nb_to_display;else _dim=ulWidth/nb_to_display}if(nb_to_display<params["alternate_config"]["min_thumb"]){
if(params["alternate_config"]["action"]=="bloc"&&isVertical){_videoListContainer.parentNode.parentNode.parentNode.className=_videoListContainer.parentNode.parentNode.parentNode.className.replace("mb_vertical","_mb_vertical");var blocs=document.getElementsByClassName("mb_bloc_"+params["id"]);for(var idx=0;idx<blocs.length;idx++)blocs[idx].innerHTML="";Mb.bloc.init(params["id"],params);return}
if(params["alternate_config"]["action"]=="bloc"&&!isVertical||params["alternate_config"]["action"]=="hide"||params["alternate_config"]["action"]=="player_choosed"&&params["first_choosed"]==false){if(params["alternate_config"]["action"]=="bloc"&&!isVertical){if(nb_to_display<params["alternate_config_2"]["min_thumb"]){if(params["alternate_config_2"]["action"]=="hide"||params["alternate_config_2"]["action"]=="player_choosed"&&params["first_choosed"]==false){
_videoListContainer.parentNode.parentNode.style.display="none";if(typeof window.MB_initCallBack!=="undefined"){MB_initCallBack(id)}return}if(params["alternate_config_2"]["action"]=="player"||params["alternate_config_2"]["action"]=="player_choosed"&&params["first_choosed"]==true){_videoListContainer.parentNode.style.display="none";_videoListContainer.parentNode.parentNode.parentNode.style.visibility="visible";if(typeof window.MB_initCallBack!=="undefined"){MB_initCallBack(id)}return}}}else{
_videoListContainer.parentNode.parentNode.style.display="none";if(typeof window.MB_initCallBack!=="undefined"){MB_initCallBack(id)}return}}if(params["alternate_config"]["action"]=="player"){_videoListContainer.parentNode.style.display="none";_videoListContainer.parentNode.parentNode.parentNode.style.visibility="visible";if(isVertical){_videoListContainer.parentNode.parentNode.getElementsByClassName("mb_videodiv")[0].style.width=""
;_videoListContainer.parentNode.parentNode.getElementsByClassName("mb_videodiv")[0].style.width="100%";_videoListContainer.parentNode.parentNode.getElementsByClassName("mb_videodiv")[0].style.height=_videoListContainer.parentNode.parentNode.offsetWidth*.5625+"px";_videoListContainer.parentNode.parentNode.getElementsByClassName("mb_videodiv")[0].style.cssFloat="none";if(params["video_title_position"]=="TOP"){
_videoListContainer.parentNode.parentNode.getElementsByClassName("mb_bloc_mainvideo_title")[0].style.width="100%"}}if(typeof window.MB_initCallBack!=="undefined"){MB_initCallBack(id)}return}}var nb_to_hide=_nbOfItems-nb_to_display;ulWidth=100+nb_to_hide*(100/nb_to_display);if(isVertical){_videoListContainer.getElementsByTagName("ul")[0].style.width="100%";_videoListContainer.getElementsByTagName("ul")[0].style.height=ulWidth+"%"
}else _videoListContainer.getElementsByTagName("ul")[0].style.width=ulWidth+"%";var _playItems=_videoListContainer.getElementsByClassName("mb_bloc_carousel_play");_playItems[0].height=_playItems[0].offsetWidth;var marginLeft=-(_playItems[0].offsetWidth/2)+"px",marginTop=-(Mb.helpers.getOffset(_playItems[0],true)/2)+"px";for(idx=0;idx<_playItems.length;idx++){_playItems[idx].style.marginLeft=marginLeft;_playItems[idx].style.marginTop=marginTop;_playItems[idx].height=_playItems[idx].offsetWidth
;if(isVertical){_playItems[idx].parentNode.getElementsByTagName("img")[0].style.marginTop=(Mb.helpers.getOffset(_playItems[idx].parentNode,true)-Mb.helpers.getOffset(_playItems[idx].parentNode.getElementsByTagName("img")[0],true))/2+"px";var _title=_playItems[idx].parentNode.parentNode.getElementsByClassName("mb_bloc_item_title")[0];_title.style.marginLeft=_playItems[idx].parentNode.getElementsByTagName("img")[0].offsetWidth+10+"px";_title.style.width="auto";_title.style.overflow="hidden"
;_title.style.marginTop=Math.ceil((Mb.helpers.getOffset(_title.parentNode,true)-Mb.helpers.getOffset(_title,true))/2)+"px";if(Mb.helpers.getOffset(_title.getElementsByTagName("span")[0],true)<Mb.helpers.getOffset(_title,true))_title.getElementsByTagName("span")[0].style.marginTop=(Mb.helpers.getOffset(_title,true)-Mb.helpers.getOffset(_title.getElementsByTagName("span")[0],true))/2+"px";_title.getElementsByTagName("span")[0].style.display="block"}}
_videoListContainer.parentNode.parentNode.parentNode.style.visibility="visible";if(Mb.isMobile&&!Mb.isDesktop||params["videos"][0]["force_load"]==1){if(Mb.isMobile){var android=Mb.androidVersion(),iOS=Mb.iOSversion();if(parseInt(android)>0&&parseFloat(android)<=4.1)return;if(iOS>0&&iOS<6.1)return}var _active=_videoListContainer.getElementsByClassName("mb_bloc_carousel_thumb")[0];Mb.bloc.playVideo(_active,params["id"],0,false,0,0)}if(document.getElementById("mb_video_syncad")!=null){
var _active=_videoListContainer.getElementsByClassName("mb_bloc_carousel_thumb")[0];Mb.bloc.playVideo(_active,params["id"],0,false,1,100)}else{if(typeof window.MB_initCallBack!=="undefined"){MB_initCallBack(id)}}},remove:function(id){var blocList=document.querySelectorAll(".mb_bloc_"+id);for(var blocIdx=0;blocIdx<blocList.length;blocIdx++){if(Mb.helpers.hasClass(blocList[blocIdx],"mb_external"))return
;while(blocList[blocIdx].hasChildNodes())blocList[blocIdx].removeChild(blocList[blocIdx].lastChild);blocList[blocIdx].style.className="mb_bloc mb_bloc_"+id}},thumbOver:function(obj){if(Mb.bloc.flag.doMouseOver==false)return;var _active=obj.parentNode.parentNode.parentNode.getElementsByClassName("mb_bloc_current_thumb");if(_active.length>0){for(var idx=0;idx<_active.length;idx++){_active[idx].className=_active[idx].className.replace("mb_bloc_current_thumb","")}}
var tmp=obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.getElementsByClassName("mb_bloc_thumb_full");if(tmp.length==0)return;var _mainTitle=obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.getElementsByClassName("mb_bloc_mainvideo_title");if(_mainTitle.length>0){_mainTitle[0].firstChild.innerHTML=obj.parentNode.parentNode.getElementsByTagName("span")[0].innerHTML
;_mainTitle[0].firstChild.title=obj.parentNode.parentNode.getElementsByTagName("span")[0].innerHTML}obj.className=obj.className+" mb_bloc_current_thumb";var _active=obj.parentNode.parentNode.parentNode.getElementsByClassName("mb_bloc_item_playing");if(_active.length>0){for(var _idx=0;_idx<_active.length;_idx++)_active[_idx].className=_active[_idx].className.replace(" mb_bloc_item_playing","")}var _item=obj.parentNode.parentNode;_item.className=_item.className+" mb_bloc_item_playing"
;tmp[0].src=obj.getAttribute("data-full-size")},playVideo:function(obj,blocplayerId,videoIdx,muteOnStart,forceStartScreen,startOnScroll){if(typeof obj=="undefined")return;if(window.mb_blocks[blocplayerId].videos[videoIdx].type=="link"){window.open(window.mb_blocks[blocplayerId].videos[videoIdx].outlink);return}if(window.mb_blocks[blocplayerId].videos[videoIdx].beforeLoad!=""){eval(window.mb_blocks[blocplayerId].videos[videoIdx].beforeLoad)}
var player=obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.getElementsByClassName("mb_videodiv")[0];var playerW=player.offsetWidth,playerH=Mb.helpers.getOffset(player,true);var containerId=Mb.helpers.createId(5);if(player.getElementsByClassName("mb_bloc_carousel_play").length>0){player.getElementsByClassName("mb_bloc_carousel_play")[0].src="//static.mediabong.com/img/loading.gif";player.innerHTML="<div id='mb_video_"+containerId+"'>"+player.innerHTML+"</div>"
}else player.innerHTML="<div id='mb_video_"+containerId+"'></div>";Mb.bloc.flag.doMouseOver=false;var videoUrl=window.mb_blocks[blocplayerId].video_src;videoUrl=videoUrl.replace("[SNAP]",window.mb_blocks[blocplayerId].videos[videoIdx].snap_id);videoUrl=videoUrl.replace("[WIDTH]",playerW);videoUrl=videoUrl.replace("[HEIGHT]",playerH);videoUrl=videoUrl.replace("[CONTAINER]",containerId);var manifest=window.mb_blocks[blocplayerId].videos[videoIdx].manifest
;if(forceStartScreen==1)manifest+="&dstart=1";videoUrl=videoUrl.replace("[MANIFEST]",encodeURIComponent(manifest));startOnScroll=parseInt(startOnScroll);if(startOnScroll>0)videoUrl+="&p="+startOnScroll;var _mainTitle=obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.getElementsByClassName("mb_bloc_mainvideo_title");if(_mainTitle.length>0){_mainTitle[0].firstChild.innerHTML=obj.parentNode.parentNode.getElementsByTagName("span")[0].innerHTML
;_mainTitle[0].firstChild.title=obj.parentNode.parentNode.getElementsByTagName("span")[0].innerHTML}var _active=obj.parentNode.parentNode.parentNode.getElementsByClassName("mb_bloc_item_playing");if(_active.length>0){for(var _idx=0;_idx<_active.length;_idx++)_active[_idx].className=_active[_idx].className.replace(" mb_bloc_item_playing","")}var _item=obj.parentNode.parentNode;_item.className=_item.className+" mb_bloc_item_playing";Mb.events.muteOnStart=muteOnStart
;Mb.helpers.loadUrl(videoUrl,"text/javascript","script",function(){})},getNextVideo:function(bloc){var currentItem=bloc.getElementsByClassName("mb_bloc_item_playing");if(currentItem.length==0)return 0;var videos=bloc.getElementsByClassName("mb_bloc_carousel_item");var currentIdx=0,nextIdx=0;for(var _idx=0;_idx<videos.length;_idx++){if(Mb.helpers.hasClass(videos[_idx],"mb_bloc_item_playing"))currentIdx=_idx}if(currentIdx<videos.length-1)return currentIdx+1;return 0}},helpers:{
boundedLinear:function(t,a,b){return Math.min(Math.max((t-a)/(b-a),0),1)},getThresholdCoefForAttention:function(ratio){if(ratio<.1){return[.2,100]}if(ratio<.2){return[.5,100]}if(ratio<.3){return[.7,80]}if(ratio<.4){return[.9,60]}return[1,30]},getAttentionScore:function(id){var mainScore=0,additionalScore=0,playerRatio=0,weight=1,attentionScore=0;playerRatio=Mb.getElementSizeInScreen(id)
;var playerVisibility=Mb.getVisibility(id,true),playerVisibilityAttentionZone=Mb.getVisibilityInAttentionZone(id);var threcoef=Mb.helpers.getThresholdCoefForAttention(playerRatio);mainScore=threcoef[0]*Mb.helpers.boundedLinear(playerVisibility,50,100)+.5*Mb.helpers.boundedLinear(playerVisibilityAttentionZone,0,threcoef[1]);if(!Mb.player.isMuted)additionalScore+=.3;if(Mb.timestamps.currentAdTime>15)additionalScore+=.3;else if(Mb.timestamps.currentAdTime>5)additionalScore+=.1
;var surroundingElts=Mb.helpers.getSurroungindElements(document.getElementById("mb_container"),"img");if(surroundingElts==0)additionalScore+=.3;else if(surroundingElts==1)additionalScore+=.1;if(Mb.documentVisibility=="hidden")weight*=0;if(Mb.timestamps.currentAdTime<=2)weight*=.5;var scrollLength=0,newScrollValue=Mb.getScrollValue();if(Mb.player.scrollValues.length>0){var oldValue=Mb.player.scrollValues[Mb.player.scrollValues.length-1],delta=Math.abs(newScrollValue-oldValue)
;var playerHeight=Mb.helpers.getOffset(document.getElementById(id),true);if(delta>0&&delta<=playerHeight/3)weight*=.8;else if(delta>playerHeight/3&&delta<=playerHeight)weight*=.4;else if(delta>playerHeight)weight*=0}Mb.player.scrollValues.push(newScrollValue);if(mainScore>.6)additionalScore=Math.min(additionalScore,.5);else additionalScore=Math.min(additionalScore,.3);attentionScore=(mainScore+additionalScore)*weight;return attentionScore.toFixed(2)},calculatePressures:function(){
var viewport=Mb.getViewport(),viewportSurface=viewport.width*viewport.height;var container=document.getElementById("mb_container"),containerPosition=Mb.helpers.getBounds(container),containerOffsets=Mb.helpers.getOffsets(container);var positions=[],elements=[];var x=0,y=0,xDelta=viewport.width/10,yDelta=viewport.height/10;for(y=0;y<viewport.height;y+=yDelta){for(x=0;x<viewport.width;x+=xDelta){
if(x>=containerPosition.left&&x<=containerPosition.right&&(y>=containerPosition.top&&y<=containerPosition.bottom))continue;positions.push([x,y])}}var imagesVisiblePixels=0;var adTitle=document.getElementById("mb_ad_title");for(var idx=0;idx<positions.length;idx++){var element=document.elementFromPoint(positions[idx][0],positions[idx][1]);if(element==null||element.tagName=="HTML"||element.tagName=="BODY")continue;if(!Mb.helpers.inArray(element,elements,true)){
var elementOffsets=Mb.helpers.getOffsets(element),elementSurface=elementOffsets.width*elementOffsets.height,elementProportion=elementSurface*100/viewportSurface,elementVisiblePixels=Mb.getVisiblePixels(element);switch(element.tagName){case"IFRAME":imagesVisiblePixels+=elementVisiblePixels;Mb.adPressureProportion+=elementProportion;break;case"IMG":if(adTitle==null||!adTitle.contains(element)){imagesVisiblePixels+=elementVisiblePixels;if(false)Mb.adPressureProportion+=elementProportion}break
;case"P":Mb.textProportion+=elementProportion;break}elements.push(element)}}var playerVisiblePixels=Mb.getVisiblePixels(document.getElementById("mb_container"));Mb.adsPlayerProportion=imagesVisiblePixels*100/playerVisiblePixels},inIframe:function(){try{return window!==window.top}catch(e){return true}},getOffset:function(elm,height){if(elm==null)return 0
;var cStyle=elm.ownerDocument&&elm.ownerDocument.defaultView&&elm.ownerDocument.defaultView.getComputedStyle&&elm.ownerDocument.defaultView.getComputedStyle(elm,null),ret=cStyle&&cStyle.getPropertyValue(height?"height":"width")||"";if(ret&&ret.indexOf(".")>-1){
ret=parseFloat(ret)+parseInt(cStyle.getPropertyValue(height?"padding-top":"padding-left"))+parseInt(cStyle.getPropertyValue(height?"padding-bottom":"padding-right"))+parseInt(cStyle.getPropertyValue(height?"border-top-width":"border-left-width"))+parseInt(cStyle.getPropertyValue(height?"border-bottom-width":"border-right-width"))}else{ret=height?elm.offsetHeight:elm.offsetWidth}return Math.round(ret)},getOffsets:function(elm){return{width:Mb.helpers.getOffset(elm),
height:Mb.helpers.getOffset(elm,true)}},pauseScript:function(duration){var currentTime=(new Date).getTime();while(currentTime+duration>=(new Date).getTime()){}},saveDomForApp:function(){app.setDom(document.getElementsByTagName("html")[0].outerHTML)},timeoutHandle:{},loadUrl:function(url,type,elementType,callback){var s=document.createElement(elementType);if(elementType=="script"){s.setAttribute("type",type);s.setAttribute("src",url);s.setAttribute("async","async")}else if(elementType=="link"){
s.setAttribute("type",type);s.setAttribute("href",url);s.setAttribute("rel","stylesheet")}if(callback!=null){if(s.addEventListener){s.addEventListener("load",callback,false)}else if(s.readyState){s.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){callback()}}}}document.getElementsByTagName("head")[0].appendChild(s)},parseScripts:function(contentStr){var scripts=new Array;while(contentStr.indexOf("<script")>-1||contentStr.indexOf("</script")>-1){
var s=contentStr.indexOf("<script");var s_e=contentStr.indexOf(">",s);var e=contentStr.indexOf("</script",s);var e_e=contentStr.indexOf(">",e);scripts.push(contentStr.substring(s_e+1,e));contentStr=contentStr.substring(0,s)+contentStr.substring(e_e+1)}for(var i=0;i<scripts.length;i++){try{eval(scripts[i])}catch(ex){}}},getVisiblePcent:function(elem,offset){var zoom=MbDetectZoom.zoom(),device=MbDetectZoom.device();offset=parseInt(offset*zoom*device);var elemHeight=Mb.helpers.getOffset(elem,true)
;var elemTop=elem.getBoundingClientRect().top;var elemBottom=elem.getBoundingClientRect().bottom;var windowHeight=window.innerHeight;if(offset>0){elemTop+=offset;elemBottom+=offset}var visibleHeight=elemHeight;if(elemTop<0)visibleHeight+=elemTop;if(elemBottom>windowHeight)visibleHeight-=elemBottom-windowHeight;if(visibleHeight<=0)return 0;var visibleHeightPercent=visibleHeight*100/elemHeight;visibleHeightPercent=visibleHeightPercent.toFixed(2);return visibleHeightPercent},
getBounds:function(elem){if(elem==null)return{top:0,left:0,bottom:0,right:0};return elem.getBoundingClientRect()},getViewport:function(){var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;var tmp={width:x,height:y};return tmp},getClosestElementDuringScroll:function(elementsList){
var vscroll=document.all?document.scrollTop:window.pageYOffset,closest=9999999,closestIdx=0,viewPort=Mb.helpers.getViewport();for(var idx=0;idx<elementsList.length;idx++){if(Mb.helpers.hasClass(document.getElementById(elementsList[idx]),"no_syncroll"))continue
;if((Mb.helpers.hasClass(document.getElementById("mb_video_syncad"),"floating_banner")||Mb.helpers.hasClass(document.getElementById("mb_video_syncad"),"bottom_banner")||Mb.helpers.hasClass(document.getElementById("mb_video_syncad"),"top_banner"))&&elementsList[idx]=="mb_video_syncad_bottom"){
var vscroll=document.all?document.scrollTop:window.pageYOffset,bottomCont=Mb.helpers.getBounds(document.getElementById("mb_video_syncad_bottom")),syncadBounds=Mb.helpers.getBounds(document.getElementById("mb_video_syncad"));if(Math.floor(syncadBounds.top)>0)continue;if(Mb.helpers.hasClass(document.getElementById("mb_video_syncad"),"floating_banner")&&typeof window.MB_FLOATING_MIN_WIDTH!="undefined"&&window.MB_FLOATING_MIN_WIDTH>0){if(viewPort.width<window.MB_FLOATING_MIN_WIDTH)continue}
if(Mb.syncad.enableFloatingBug){if(vscroll<=bottomCont.top){continue}}else{if(Math.floor(bottomCont.top)-parseInt(viewPort.height)>0){continue}}}var tmpBounds=Mb.helpers.getBounds(document.getElementById(elementsList[idx]));if(typeof Mb.enableIntelligentSyncroll!="undefined"&&Mb.enableIntelligentSyncroll)vscroll-=viewPort.height*.27;if(Math.abs(tmpBounds.top-vscroll)<closest){closest=Math.abs(tmpBounds.top-vscroll);closestIdx=idx}}return document.getElementById(elementsList[closestIdx])},
moveToContainer:function(player,cont){if(!Mb.syncad.playerDisplayed&&!Mb.syncad.floatingOnly)return;if(player==null)return;if(Mb.syncad.prerollEnded||cont==null||cont.id==Mb.syncad.currentContainer){Mb.helpers.adjustPlayerWithinScroll(document.getElementById(Mb.syncad.mainPlayerId),cont);return}if(typeof window.MB_ARTICLE_DISPLAY_DETECTION!="undefined"&&window.MB_ARTICLE_DISPLAY_DETECTION!=""){if(document.querySelectorAll(window.MB_ARTICLE_DISPLAY_DETECTION).length==0)return}
if(Mb.player.stayInInreadPosition)cont=document.getElementById("mb_video_syncad");if(typeof window.MB_playerMoved!="undefined")window.MB_playerMoved(Mb.syncad.mainPlayerId,cont.id);if(["floating","bottom","top"].indexOf(Mb.syncadtype)==-1&&cont.style.height==0&&!Mb.syncad.forceFloatingUnit)Mb.helpers.resizeContainer(cont);Mb.helpers.log("Moving player to "+cont.id);Mb.syncad.currentContainer=cont.id
;if(cont.id=="mb_video_syncad_bottom"&&["floating","bottom","top"].indexOf(Mb.syncadtype)!=-1||Mb.syncad.forceFloatingUnit){player.style.position="fixed";if(typeof Mb.enableIntelligentSyncroll!="undefined"&&Mb.enableIntelligentSyncroll)player.style.bottom="27%";else{var bottomMargin=20;if(typeof window.MB_FLOATING_MARGIN_BOTTOM!="undefined"&&window.MB_FLOATING_MARGIN_BOTTOM>0)bottomMargin=window.MB_FLOATING_MARGIN_BOTTOM;player.style.bottom=bottomMargin+"px"}if(Mb.syncad.floatLeft){
player.style.right="";if(Mb.syncad.floatingOnly&&!Mb.syncad.playerDisplayed)player.style.left="-500px";else player.style.left="10px"}else{if(Mb.syncadtype=="bottom"){player.style.right="0px";player.style.left="0px";player.style.bottom="0px";player.style.marginLeft="auto";player.style.marginRight="auto"}else if(Mb.syncadtype=="top"){player.style.right="";player.style.left="0px";player.style.bottom="";player.style.top="0px";player.style.marginLeft="auto";player.style.marginRight="auto"}else{
if(Mb.syncad.floatingOnly&&!Mb.syncad.playerDisplayed)player.style.right="-500px";else player.style.right="10px";player.style.left=""}}if(Mb.syncadtype!="top")player.style.top="";var originalCont=document.getElementById("mb_moving_container");if(Mb.syncadtype!="bottom"&&Mb.syncadtype!="top")originalCont.style.border="5px solid #0f1624";else{originalCont.style.border="0px"}
if(document.getElementById("mb_video_syncad_title")!=null)document.getElementById("mb_video_syncad_title").style.display="none";Mb.helpers.resizePlayerInContainer(player,cont);if(!Mb.syncad.prerollCompletedDone){Mb.getPlayer(Mb.syncad.mainPlayerId).playAd();if(Mb.syncad.adImpressionDone){mb_players[Mb.syncad.mainPlayerId].isPlaying=true;Mb.player.startTracking(Mb.syncad.mainPlayerId)}}cont.style.height="1px";cont.style.minHeight="1px";return}else{
var mainContainer=document.getElementById("mb_new_container");if(cont.id=="mb_video_syncad_bottom")mainContainer.style.position="absolute";else mainContainer.style.position="";player.style.position="relative";player.style.bottom="";player.style.left="";player.style.right="";player.style.top="";var originalCont=document.getElementById("mb_moving_container");originalCont.style.border=""
;if(document.getElementById("mb_video_syncad_title")!=null)document.getElementById("mb_video_syncad_title").style.display="block"}var playerPos=Mb.helpers.getBounds(document.getElementById("mb_new_container"));var contPos=Mb.helpers.getBounds(cont);Mb.helpers.resizePlayerInContainer(player,cont);var xDistance=contPos.left-playerPos.left;var yDistance=contPos.top-playerPos.top;player.style.top=yDistance+"px";player.style.left=xDistance+"px";if(document.getElementById("mb_next_video")!=null){
var width=document.getElementById("mb_container").offsetWidth;var nextLine=document.getElementById("mb_next_video_table"),nextTitle=document.getElementById("mb_next_video_title"),nextThumb=document.getElementById("mb_next_video_thumb"),nextTitleDiv=document.getElementById("mb_next_video_title_div");nextLine.style.width=width+"px"}},resizePlayerInContainer:function(player,container){var player=Mb.getPlayer(Mb.syncad.mainPlayerId),viewport=Mb.getViewport()
;var width=container.offsetWidth,height=width*.5625;width-=1;Mb.helpers.log("Resize player to : "+width+", "+height);var originalCont=document.getElementById("mb_moving_container");if(Mb.syncadtype!="bottom"&&Mb.syncadtype!="top"||container.id!="mb_video_syncad_bottom"){originalCont.style.width=width+"px";originalCont.style.paddingLeft="";originalCont.style.backgroundColor="";document.getElementById("mb_container").style.width=width+"px"}else if(Mb.syncadtype=="bottom"||Mb.syncadtype=="top"){
originalCont.style.width=viewport.width+"px";originalCont.style.paddingLeft=parseInt((viewport.width-width)/2)+"px";originalCont.style.paddingRight=parseInt((viewport.width-width)/2)+"px";if(Mb.syncadtype=="bottom")originalCont.style.backgroundColor="rgba(255,255,255,0.9)";else originalCont.style.backgroundColor="rgb(0,0,0)"}if(Mb.helpers.getOffset(document.getElementById("mb_container"),true)!=1){if(!Mb.playerIsHtml5){player.style.height=height+"px";player.style.minHeight=height+"px"}
document.getElementById("mb_container").style.height=height+"px";document.getElementById("mb_container").style.minHeight=height+"px";document.getElementById("mb_container").style.width=width+"px";var title=document.getElementById("mb_ad_title");if(title!=null)title.style.width=width+"px";if(Mb.playerIsHtml5){_player=Mb.getPlayer(Mb.syncad.mainPlayerId);_player.width(width);_player.height(height)
;if(typeof _player.ima!=="undefined"&&typeof _player.ima.getAdsManager!=="undefined"&&typeof _player.ima.getAdsManager()!=="undefined"&&_player.isIMA)_player.ima.getAdsManager().resize(width,height,google.ima.ViewMode.NORMAL)}}if(document.getElementById("mb_next_video")!=null){
var nextLine=document.getElementById("mb_next_video_table"),nextTitle=document.getElementById("mb_next_video_title"),nextThumb=document.getElementById("mb_next_video_thumb"),nextTitleDiv=document.getElementById("mb_next_video_title_div");nextLine.style.width=width+"px"}},resizeContainer:function(container){var containerWidth=container.offsetWidth;if(typeof container.style.paddingLeft!=="undefined")containerWidth-=parseInt(container.style.paddingLeft)
;if(typeof container.style.paddingRight!=="undefined")containerWidth-=parseInt(container.style.paddingRight);containerHeight=containerWidth*.5625;containerHeight=Mb.helpers.addTitleAndCtaHeight(containerHeight);container.style.height=containerHeight+"px";container.style.minHeight=containerHeight+"px"},adjustPlayerWithinScroll:function(player,cont){if(!Mb.syncad.playerDisplayed)return;if(cont==null)return;var playerCont=document.getElementById("mb_moving_container")
;var playerPos=Mb.helpers.getBounds(document.getElementById("mb_new_container"));var contPos=Mb.helpers.getBounds(cont);Mb.helpers.resizePlayerInContainer(player,cont);var xDistance=contPos.left-playerPos.left;var yDistance=contPos.top-playerPos.top;playerCont.style.top=yDistance+"px";playerCont.style.left=xDistance+"px"},getElementHeight:function(elt){var height=0;var children=elt.childNodes;for(var idx=0;idx<children.length;idx++){height+=Mb.helpers.getOffset(children[idx],true)}return height
},addEvent:function(elem,type,eventHandle){if(elem==null||typeof elem=="undefined")return;if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}else{elem["on"+type]=eventHandle}Mb.addToEventsList(type,eventHandle,elem,false)},createId:function(key_length){var id="";var availableItems="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
;for(var i=0;i<key_length;i++)id+=availableItems.charAt(Math.floor(Math.random()*availableItems.length));return id},parseUrl:function(url,data,playerId){var ad_server_id=0,ad_impression_called=0,second=0,adblock=0,visibility=0,adprogress=0;currentPosition=0;event="";reporting_value=0,loadingTime=0,playerWidth=0,playerHeight=0,latency=0;if(typeof data.ad_server_id!="undefined")ad_server_id=data.ad_server_id
;if(typeof data.ad_impression_called!="undefined")ad_impression_called=data.ad_impression_called;if(typeof data.second!="undefined")second=data.second;if(typeof data.adblock!="undefined")adblock=data.adblock;if(typeof data.visibility!="undefined")visibility=data.visibility;if(typeof data.adprogress!="undefined")adprogress=data.adprogress;if(typeof data.currentPosition!="undefined")currentPosition=data.currentPosition;if(typeof data.event!="undefined")event=data.event
;if(typeof data.reporting_value!="undefined")reporting_value=data.reporting_value;if(typeof data.latency!="undefined")latency=data.latency;var container=document.getElementById("mb_container");if(container!=null){playerWidth=container.offsetWidth;playerHeight=container.offsetHeight}if(typeof window.mb_script_started_ms!="undefined"){loadingTime=(new Date).getTime();loadingTime-=window.mb_script_started_ms}var placeholders=[{key:"url",value:encodeURIComponent(document.location.href)},{key:"rnd",
value:(new Date).getTime()},{key:"ad_impression_called",value:ad_impression_called},{key:"ad_server_id",value:ad_server_id},{key:"session_id",value:""},{key:"referer",value:encodeURIComponent(document.location.href)},{key:"mute",value:Mb.player.isMuted},{key:"second",value:second},{key:"adblock",value:adblock},{key:"visibility",value:visibility},{key:"viewability_total",value:Mb.viewabilityTotal},{key:"adprogress",value:adprogress},{key:"syncrollenabled",value:Mb.enableSyncAd},{
key:"playerposition",value:currentPosition},{key:"attentionscore",value:Mb.helpers.getAttentionScore(playerId)},{key:"attentionscore_sum",value:Mb.attentionScore},{key:"event",value:event},{key:"syncrolltype",value:Mb.syncadtype},{key:"reporting_value",value:reporting_value},{key:"loadtime",value:loadingTime},{key:"player_width",value:playerWidth},{key:"player_height",value:playerHeight},{key:"website",
value:window.location.host.substring(window.location.host.lastIndexOf(".",window.location.host.lastIndexOf(".")-1)+1)},{key:"domain",value:window.location.host.substring(window.location.host.lastIndexOf(".",window.location.host.lastIndexOf(".")-1)+1)},{key:"playerratio",value:Mb.getElementSizeInScreen(playerId)},{key:"scrollvalue",value:Mb.getScrollValue()},{key:"visibilityattn",value:Mb.getVisibilityInAttentionZone(playerId)},{key:"timestamp",value:(new Date).getTime()},{key:"latency",
value:latency},{key:"isHtml5Player",value:Mb.playerIsHtml5?1:0},{key:"fgp",value:Mb.user_fgp},{key:"fgp_enhanced",value:Mb.user_fgp_enhanced},{key:"dealid",value:Mb.rtb_dealId},{key:"partnerid",value:Mb.rtb_partnerId},{key:"seatid",value:Mb.rtb_seatId},{key:"cpm",value:Mb.rtb_cpm},{key:"campaign_id",value:Mb.campaign_id},{key:"duration",value:Mb.player.getAdDuration(playerId)},{key:"tech",value:"player"}],idx;if(typeof data.vast==="undefined"){for(var idx=0;idx<placeholders.length;idx++){
if(typeof placeholders[idx].key==="undefined")break;url=url.replace("["+placeholders[idx].key.toUpperCase()+"]","["+placeholders[idx].key+"]");url=url.replace("["+placeholders[idx].key+"]",placeholders[idx].value)}}else{for(var idx=0;idx<placeholders.length;idx++){if(typeof placeholders[idx].key==="undefined")break;var fromRe=new RegExp("\\["+placeholders[idx].key.toUpperCase()+"\\]","g");url=url.replace(fromRe,"["+placeholders[idx].key+"]")
;fromRe=new RegExp("\\["+placeholders[idx].key+"\\]","g");url=url.replace(fromRe,placeholders[idx].value)}}return url},hasClass:function(obj,className){if(obj==null)return;if((" "+obj.className+" ").replace(/[\n\t]/g," ").indexOf(" "+className+" ")>-1)return true;return false},animate:function(object,property,end_value,time,callBackFn,forceAnimation){if(typeof forceAnimation=="undefined")forceAnimation=false;if(Mb.bloc.animateInProgress&&!forceAnimation)return;Mb.bloc.animateInProgress=true
;var timeoutKey=Mb.helpers.createId(5);var start_value=0;if(!isNaN(parseInt(object.style[property])))start_value=parseInt(object.style[property]);var end_value=start_value+end_value;var frame_rate=.06;var frame=0;var delta=(end_value-start_value)/time/frame_rate;if(delta==0){return}Mb.helpers.timeoutHandle[timeoutKey]=setInterval(function(){frame++;var value=start_value+delta*frame;object.style[property]=value+"px"
;if(start_value<end_value&&value>=end_value||start_value>end_value&&value<=end_value){clearInterval(Mb.helpers.timeoutHandle[timeoutKey]);Mb.helpers.timeoutHandle[timeoutKey]=null;object.style[property]=end_value+"px";Mb.bloc.animateInProgress=false;if(typeof callBackFn!="undefined"){callBackFn()}}},1/frame_rate);Mb.intervals.push(Mb.helpers.timeoutHandle[timeoutKey])},cssAnimate:function(object,attribute,end_value,time,funcTransition,callBackFn){
Mb.helpers.addCssTransitions(object,attribute,time,funcTransition);object.style[attribute]=end_value+"px";var timeoutid=window.setTimeout(function(){Mb.helpers.removeCssTransitions(object);if(typeof callBackFn!="undefined")callBackFn()},time);Mb.timeouts.push(timeoutid)},getCurrentLocation:function(){var url=document.location.href;if(window!=window.parent){url=document.referrer}return url},parseResponseHeaders:function(headerStr){var headers={};if(!headerStr){return headers}
var headerPairs=headerStr.split("\r\n");for(var i=0;i<headerPairs.length;i++){var headerPair=headerPairs[i];var index=headerPair.indexOf(": ");if(index>0){var key=headerPair.substring(0,index);var val=headerPair.substring(index+2);headers[key]=val}}return headers},getXdr:function(){var xdr=null;if(window.XDomainRequest){xdr=new XDomainRequest}else if(window.XMLHttpRequest){xdr=new XMLHttpRequest}return xdr},doXdr:function(url,withCredentials,returnAll,callback,errorCallback){
var xmlhttp=Mb.helpers.getXdr();if(xmlhttp==null)return"";if(typeof xmlhttp.withCredentials!=="undefined"&&typeof withCredentials!=="undefined"&&withCredentials==true)xmlhttp.withCredentials=true;if(typeof callback==="function"){xmlhttp.open("GET",url,true);xmlhttp.onload=function(){if(typeof returnAll!=="undefined"&&returnAll==true)callback(xmlhttp);else callback(xmlhttp.responseText)};if(typeof errorCallback==="function"){xmlhttp.onerror=function(e){errorCallback(e)}}xmlhttp.send();return}
xmlhttp.open("GET",url,false);xmlhttp.send();if(typeof returnAll!=="undefined"&&returnAll==true)return xmlhttp;return xmlhttp.responseText},isMobile:function(a){
if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))return true
;return false},hasFlash:function(){var a=!1,b="";function c(d){d=d.match(/[\d]+/g);d.length=3;return d.join(".")}if(navigator.plugins&&navigator.plugins.length){var e=navigator.plugins["Shockwave Flash"];e&&(a=!0,e.description&&(b=c(e.description)));navigator.plugins["Shockwave Flash 2.0"]&&(a=!0,b="2.0.0.11")}else{if(navigator.mimeTypes&&navigator.mimeTypes.length){var f=navigator.mimeTypes["application/x-shockwave-flash"];(a=f&&f.enabledPlugin)&&(b=c(f.enabledPlugin.description))}else{try{
var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),a=!0,b=c(g.GetVariable("$version"))}catch(h){try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),a=!0,b="6.0.21"}catch(i){try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),a=!0,b=c(g.GetVariable("$version"))}catch(j){}}}}}var k=b;return a},handleResize:function(blocplayerId,uniqId){var bloc=document.getElementById("mb_bloc_"+uniqId);if(bloc==null)return;if(bloc.parentNode.offsetWidth==Mb.bloc.width["mb_bloc_"+uniqId]){
return}bloc.className=bloc.className.replace("_mb_vertical","mb_vertical");clearTimeout(Mb.bloc.timers.resizeEvent);Mb.bloc.timers.resizeEvent=setTimeout(function(){Mb.bloc.remove(blocplayerId);Mb.bloc.init(blocplayerId,window.mb_blocks[blocplayerId],true)},500);Mb.timeouts.push(Mb.bloc.timers.resizeEvent)},canLoadAds:function(url){if(Mb.adsTested)return;Mb.adsTested=true;var xhr;if(window.XMLHttpRequest){xhr=new XMLHttpRequest}else{xhr=new ActiveXObject("Microsoft.XMLHTTP")}
xhr.onreadystatechange=function(){if(typeof Mb==="undefined")return;if(xhr.readyState==4){if(xhr.status==0){Mb.adsEnabled=false;Mb.helpers.log("!!! Adblock detected !!!")}else if(xhr.status==200){Mb.adsEnabled=true}}};try{xhr.open("GET",url,true)}catch(e){Mb.adsEnabled=false;Mb.helpers.log("!!! Adblock detected !!!")}try{xhr.send(null)}catch(e){Mb.helpers.log("Error on : xhr.send(null)")}},fileIsRawVideo:function(mediaFile){if(mediaFile.mime_type=="application/x-shockwave-flash")return false
;return true},log:function(message){if(typeof window.MB_DEV_SCRIPT!="undefined"&&window.MB_DEV_SCRIPT==true){var debugConsole=document.getElementById("mb_debug_player_console"),now=(new Date).toLocaleString();if(debugConsole!=null){var logElt=document.createElement("li"),logEltTs=document.createElement("span"),logEltMsg=document.createElement("span");logEltTs.innerHTML=now;logEltTs.className="mb_debug_ts";logEltMsg.className="mb_debug_msg";logEltMsg.innerHTML=message;logElt.appendChild(logEltTs)
;logElt.appendChild(logEltMsg);debugConsole.appendChild(logElt);debugConsole.scrollTop=debugConsole.scrollHeight}else console.log(message)}},getParentNode:function(elt){if(elt==null)return null;if(typeof elt!="null"&&typeof elt!="undefined"){if(typeof elt.el=="undefined")return elt.parentNode;var el=elt.el();if(el!=null)return el.parentNode;return null}else return null},areCssAnimationsAvailable:function(){
var animation=false,animationstring="animation",keyframeprefix="",domPrefixes="Webkit Moz O ms Khtml".split(" "),pfx="",elm=document.createElement("div");if(elm.style.animationName!==undefined){animation=true}if(animation===false){for(var i=0;i<domPrefixes.length;i++){if(elm.style[domPrefixes[i]+"AnimationName"]!==undefined){pfx=domPrefixes[i];animationstring=pfx+"Animation";keyframeprefix="-"+pfx.toLowerCase()+"-";animation=true;break}}}return animation},
addCssTransitions:function(elem,attribute,time,func){var transition=attribute+" "+time+"ms "+func;elem.style.webkitTransition=transition;elem.style.MozTransition=transition;elem.style.OTransition=transition;elem.style.transition=transition},removeCssTransitions:function(elem){elem.style.webkitTransition="";elem.style.MozTransition="";elem.style.OTransition="";elem.style.transition=""},isBodyOverflowHidden:function(){
if(document.getElementsByTagName("body")[0].style.overflowY=="hidden"||window.getComputedStyle(document.getElementsByTagName("body")[0])["overflowY"]=="hidden"||document.getElementsByTagName("body")[0].style.overflow=="hidden"||window.getComputedStyle(document.getElementsByTagName("body")[0])["overflow"]=="hidden")return true;return false},getSurroungindElements:function(element,type){if(element==null)return 0;var elementBounds=Mb.helpers.getBounds(element);var elementWidth=element.offsetWidth
;var elementHeight=element.offsetHeight;type=type.toUpperCase();var space=elementHeight/2;var nbElements=0;var elements=[]
;var positions=[[elementBounds.left+.5*elementWidth,elementBounds.top-space],[elementBounds.left+elementWidth+space,elementBounds.top+.5*elementHeight],[elementBounds.left+.5*elementWidth,elementBounds.top+elementHeight+space],[elementBounds.left-space,elementBounds.top+.5*elementHeight],[elementBounds.left+elementWidth+space,elementBounds.top-space],[elementBounds.left+elementWidth+space,elementBounds.top+elementHeight+space],[elementBounds.left-space,elementBounds.top+elementHeight+space],[elementBounds.left-space,elementBounds.top-space]]
;for(var idx=0;idx<positions.length;idx++){var element=document.elementFromPoint(positions[idx][0],positions[idx][1]);if(element!=null&&element.tagName==type&&!Mb.helpers.inArray(element,elements,true)){elements.push(element);nbElements++}}return nbElements},inArray:function(needle,haystack,argStrict){var key="";var strict=!!argStrict;if(strict){for(key in haystack){if(haystack[key]===needle)return true}}else{for(key in haystack){if(haystack[key]==needle)return true}}return false},
calculateElementHeightByRatio:function(element){return element.offsetWidth*.5625},addTitleAndCtaHeight:function(elementHeight,noAddedPixel){if(document.getElementById("mb_video_syncad_title")!=null)elementHeight+=Mb.helpers.getOffset(document.getElementById("mb_video_syncad_title"),true);if(document.getElementById("mb_next_video")!=null)elementHeight+=Mb.helpers.getOffset(document.getElementById("mb_next_video"),true);if(document.getElementById("mb_ad_title")!=null){
if(typeof noAddedPixel==="undefined"&&noAddedPixel==true)elementHeight+=Mb.helpers.getOffset(document.getElementById("mb_ad_title"),true);else elementHeight+=Mb.helpers.getOffset(document.getElementById("mb_ad_title"),true)+5}if(typeof window.MB_PADDING!="undefined")elementHeight+=window.MB_PADDING;return elementHeight},setUserId:function(id){if(typeof localStorage!="undefined"){localStorage.setItem("vuble_id",id)}},getUserId:function(){if(typeof localStorage!="undefined"){
return localStorage.getItem("vuble_id")}}},syncad:{currentContainer:null,prerollEnded:false,prerollCompletedDone:false,mainPlayerId:null,mainManifest:null,syncLoaded:false,synced:false,skipDelay:5,playingSyncAd:false,initDone:false,adResumed:false,videoResumed:false,scrollAnimationInProgress:false,adImpressionDone:false,vpaidMargin:0,adTracking:[],slotsList:[],forceFloatingUnit:false,enableFloatingBug:false,playerDisplayed:false,floatLeft:false,articleDisplayTrigger:"",adSkipped:false,
init:function(mainPlayerId,syncAdId){if(Mb.syncad.initDone==true)return;Mb.syncad.initDone=true;Mb.syncad.mainPlayerId=mainPlayerId;Mb.syncad.syncLoaded=true;Mb.syncad.mainManifest=decodeURIComponent(mb_players[mainPlayerId].flashvars.manifest_url);var syncAd=document.getElementById("mb_video_syncad");if(syncAd==null)return;window.addEventListener("scroll",Mb.syncad.scrollEvent);Mb.addToEventsList("scroll",Mb.syncad.scrollEvent,window,false);var _sc=document.createElement("script")
;_sc.src="//player.mediabong.com/sa/5/"+syncAdId+".js?rnd="+Math.random();_sc.type="text/javascript";_sc.async=true;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(_sc,s)},scrollEvent:function(){},adjustContainer:function(){var functionEvent=function(){var player=Mb.getPlayer(Mb.syncad.mainPlayerId);var cont=Mb.syncad.currentContainer;if(player!=null&&cont!=null){cont=document.getElementById(cont)
;if(document.getElementById("mb_moving_container").style.position!="fixed"){Mb.helpers.adjustPlayerWithinScroll(player,cont)}}};window.addEventListener("resize",functionEvent);Mb.addToEventsList("resize",functionEvent,window,false)},adLoaded:function(id){Mb.syncad.mainPlayerId=id;var player=Mb.getPlayer(id);var mediaFile=player.getAdMediaFile();Mb.helpers.log("Will play ad : "+mediaFile.url+" ( "+mediaFile.mime_type+") ");Mb.hadPreroll=true
;if(mb_players[id].addMuteButton==true&&!Mb.playerIsHtml5||Mb.playerIsHtml5&&!player.isIMA){Mb.player.addMuteButton(id)}if(Mb.syncad.prerollCompletedDone||document.getElementById("mb_video_syncad")==null||mb_players[id].disable_syncad==1){Mb.helpers.log("No Syncroll, playing ad");Mb.fireCallbacks("adMediaFileSelected",id);var timeoutid=setTimeout(function(){Mb.getPlayer(id).playAd()},200);Mb.timeouts.push(timeoutid);return}else{Mb.syncad.addNextVideo(document.getElementById("mb_container"))
;var testHeight=2;var elementPadding=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-top"));elementPadding+=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-bottom"));testHeight+=elementPadding
;if(Mb.helpers.getOffset(document.getElementById("mb_video_syncad").parentNode,true)>testHeight)Mb.helpers.resizeContainer(document.getElementById("mb_video_syncad").parentNode)}if(!Mb.helpers.hasClass(player,"syncad_main"))Mb.helpers.getParentNode(player).style.position="relative";if(mediaFile.mime_type!="application/x-shockwave-flash"){var url=mb_players[id].server+"/t/mediafile.php?url="+encodeURIComponent(mediaFile.url);Mb.helpers.loadUrl(url,"text/javascript","script",function(){})}
if(document.getElementById("mb_video_syncad")!=null){Mb.syncad.mainPlayerId=id;Mb.pauseOnAdStart[id]=true;if(document.getElementById("mb_video_syncad_title")==null&&mb_players[id].custom_title!=null&&mb_players[id].custom_title!=""){var sponsor_title=document.createElement("div"),custom_title=mb_players[id].custom_title
;sponsor_title.innerHTML='<img style="vertical-align: middle;width: 16px!important;" src="//static.mediabong.com/img/down_arrow.png">&nbsp;<span>'+custom_title+'</span>&nbsp;<img style="vertical-align: middle;width: 16px!important;" src="//static.mediabong.com/img/down_arrow.png">';sponsor_title.id="mb_video_syncad_title";sponsor_title.style.cssText="text-align: center;border: 0px;margin-bottom: 5px;font-family: helvetica;font-size: 12px;"
;document.getElementById(id).parentNode.parentNode.insertBefore(sponsor_title,document.getElementById(id).parentNode);var testHeight=2;var elementPadding=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-top"));elementPadding+=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-bottom"));testHeight+=elementPadding
;if(Mb.helpers.getOffset(document.getElementById("mb_video_syncad").parentNode,true)>testHeight)Mb.helpers.resizeContainer(document.getElementById("mb_video_syncad").parentNode);if(Mb.syncad.currentContainer!=null&&Mb.syncad.currentContainer!="mb_video_syncad")sponsor_title.style.display="none"}Mb.preventScrollEvent=true;if(!Mb.helpers.inIframe()){Mb.syncad.adjustContainer();if(Mb.syncad.floatingOnly)Mb.syncad.checkDisplay(player,id);else{var timeoutFunction=function(){
Mb.syncad.checkDisplay(player,id)};document.addEventListener("scroll",timeoutFunction,true);Mb.addToEventsList("scroll",timeoutFunction,document,true);Mb.syncad.startDisplayChecker(player,id)}}else{Mb.preventScrollEvent=false;var animateTo=Mb.helpers.calculateElementHeightByRatio(document.getElementById("mb_video_syncad")),mbSyncadHeight=Mb.helpers.addTitleAndCtaHeight(animateTo,true);document.getElementById("mb_video_syncad").parentNode.style.height=mbSyncadHeight+"px"
;document.getElementById("mb_container").style.height=animateTo+"px";document.getElementById("mb_video_syncad").style.height=animateTo+"px";Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad"));Mb.syncad.checkDisplay(player,id);var functionEvent=function(){Mb.syncad.checkDisplay(player,id)};window.addEventListener("resize",functionEvent);Mb.addToEventsList("resize",functionEvent,window,false)}
if(typeof window.Mb_onSyncAdLoaded!=="undefined"){Mb.helpers.log("Calling Mb_onSyncAdLoaded function");Mb_onSyncAdLoaded(id)}}},prerollCompleted:function(id){Mb.helpers.log("Preroll completed ("+id+")");if(Mb.syncad.prerollCompletedDone)return;Mb.syncad.prerollCompletedDone=true;Mb.preventScrollEvent=true;Mb.syncad.disableAdjustTimeout=true;Mb.player.cancelTimeTracker=true;var originalCont=document.getElementById("mb_moving_container");if(originalCont!=null){originalCont.style.border=""}
if(document.getElementById("mb_video_syncad_title")!=null){var tmp=document.getElementById("mb_video_syncad_title");tmp.parentNode.removeChild(tmp)}if(document.getElementById("mb_next_video")!=null){var tmp=document.getElementById("mb_next_video");tmp.parentNode.removeChild(tmp)}if(typeof window.Mb_prerollCompleted!="undefined"){window.Mb_prerollCompleted()}
if(typeof window.MB_FIXED_SYNCROLL!=="undefined"&&window.MB_FIXED_SYNCROLL==1&&Mb.syncad.adSkipped==false)Mb.endAfterPrerollCompleted[id]=false;if(Mb.endAfterPrerollCompleted[id]||!Mb.syncad.adImpressionDone&&typeof window.MB_NO_VIDEO_IF_PASSBACK!="undefined"&&window.MB_NO_VIDEO_IF_PASSBACK==1&&typeof mb_syncroll_passback!="undefined"&&mb_syncroll_passback!=""){Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_new_container"))
;if(Mb.helpers.inIframe()&&window.frameElement!==null){var a=window.top||window.parent||window;a.MbResizeIframe=function(element){element.style.height="0px"};a.MbResizeIframe(window.frameElement)}Mb.syncad.prerollEnded=true;if(typeof window.Mb_syncrollCompleted!="undefined"){window.Mb_syncrollCompleted()}if(!Mb.syncad.adImpressionDone){if(typeof mb_syncroll_passback!="undefined"&&mb_syncroll_passback!=""){if(typeof mb_iframe!=="undefined"){mb_iframe.contentWindow.eval(mb_syncroll_passback)
;if(typeof mb_iframe_height!=="undefined")mb_iframe.height=mb_iframe_height}else eval(mb_syncroll_passback)}}else if(typeof mb_passback_always!="undefined"&&mb_passback_always&&typeof mb_syncroll_passback!="undefined"&&mb_syncroll_passback!=""){if(typeof mb_iframe!=="undefined"){mb_iframe.contentWindow.eval(mb_syncroll_passback);if(typeof mb_iframe_height!=="undefined")mb_iframe.height=mb_iframe_height}else eval(mb_syncroll_passback)}var animationCallback=function(){
document.getElementById("mb_video_syncad").parentNode.style.padding="0px";document.getElementById("mb_video_syncad").parentNode.style.margin="0px";document.getElementById("mb_video_syncad").parentNode.style.height="0px";document.getElementById("mb_video_syncad").parentNode.style.overflow="hidden"};if(Mb.helpers.areCssAnimationsAvailable())Mb.helpers.cssAnimate(document.getElementById("mb_video_syncad").parentNode,"height",0,400,"linear",animationCallback);else{
var animateTo=-Mb.helpers.getOffset(document.getElementById("mb_video_syncad").parentNode,true);Mb.helpers.animate(document.getElementById("mb_video_syncad").parentNode,"height",animateTo,400,animationCallback)}var timeoutClose=2e3;var player=Mb.getPlayer(id);if(typeof player.ima!=="undefined"&&!player.isIMA)timeoutClose=500;var timeoutid=window.setTimeout(function(){
if(Mb.helpers.getParentNode(player).id=="mb_container")Mb.helpers.getParentNode(player).parentNode.removeChild(Mb.helpers.getParentNode(player));else{if(Mb.player.html5Player[id]!=undefined){player.pause();mb_players[id].myPlayer.dispose();document.getElementById("mb_container").parentNode.removeChild(document.getElementById("mb_container"))}else{Mb.helpers.getParentNode(player).parentNode.parentNode.removeChild(Mb.helpers.getParentNode(player).parentNode)}}if(!Mb.syncrollScrolled){
if(document.getElementById("mb_video_syncad")!=null){var trackerDiv=document.createElement("div");trackerDiv.id="mb_video_placement";trackerDiv.width=1;trackerDiv.height=1;trackerDiv.style.cssText="width: 1px!important; height: 1px!important; border: 0px; padding: 0px; margin: 0px;";document.getElementById("mb_video_syncad").parentNode.parentNode.insertBefore(trackerDiv,document.getElementById("mb_video_syncad").parentNode)}Mb.addscrollEvent(function(){if(Mb.syncrollScrolled)return
;var scroll=document.all?document.scrollTop:window.pageYOffset,viewPort=Mb.getViewport();var containerRect=trackerDiv.getBoundingClientRect();var offset=viewPort.height*.25;if(containerRect.top+offset<=viewPort.height){Mb.player.callBack.event(id,"syncrollScrolled");Mb.syncrollScrolled=true}})}if(document.getElementById("mb_new_container")!=null)document.getElementById("mb_new_container").parentNode.removeChild(document.getElementById("mb_new_container"))
;if(document.getElementById("mb_video_syncad")!=null)document.getElementById("mb_video_syncad").parentNode.parentNode.removeChild(document.getElementById("mb_video_syncad").parentNode);if(document.getElementById("mb_video_syncad_bottom")!=null&&document.getElementsByClassName("syncad_slot").length==0)document.getElementById("mb_video_syncad_bottom").parentNode.removeChild(document.getElementById("mb_video_syncad_bottom"));var title=document.getElementById("mb_video_syncad_title")
;if(title!=null)title.parentNode.removeChild(title)},timeoutClose);Mb.timeouts.push(timeoutid)}else{var player=Mb.getPlayer(id);var timeoutid=window.setTimeout(player.stopAd,0);Mb.timeouts.push(timeoutid);var videoPosition="bottom";if(typeof window.MB_VIDEO_POSITION!="undefined"&&window.MB_VIDEO_POSITION!="")videoPosition=window.MB_VIDEO_POSITION;if(Mb.enableSyncAd&&!Mb.syncrollHasAd){videoPosition="inread";window.MB_PAUSE_AFTER_AD=1;Mb.player.stopMouseOverVolumeEvents=true
;Mb.player.setVolume(id,1,null,null)}if(Mb.syncadtype=="inread")videoPosition="inread";if(Mb.enableSyncAd&&Mb.isIphone())window.MB_PAUSE_AFTER_AD=1;if(typeof window.MB_PAUSE_AFTER_AD!="undefined"&&window.MB_PAUSE_AFTER_AD==1)player.pauseVideo();if((videoPosition=="bottom"||videoPosition=="keep")&&Mb.helpers.hasClass(document.getElementById("mb_video_syncad"),"floating_banner")){Mb.syncad.forceFloatingUnit=true}if(mb_players[id].add_close_over_video==1){
var close=document.getElementById("mb_floating_close");if(close!=null){close.style.display="block";close.onclick=function(){var mainContainer=document.getElementById("mb_new_container");if(mainContainer!=null)mainContainer.parentNode.removeChild(mainContainer);var syncadContainer=document.getElementById("mb_video_syncad");if(syncadContainer!=null)syncadContainer.parentNode.parentNode.removeChild(syncadContainer.parentNode)};document.getElementById("mb_moving_container").style.overflow="visible"}
}for(var idx=0;idx<Mb.syncad.slotsList.length;idx++){if(videoPosition=="inread"&&Mb.syncad.slotsList[idx]=="mb_video_syncad")continue;if(videoPosition=="bottom"&&Mb.syncad.slotsList[idx]=="mb_video_syncad_bottom"){if(Mb.syncad.forceFloatingUnit)document.getElementById("mb_video_syncad_bottom").style.height="0px";continue}if(videoPosition=="keep"&&Mb.syncad.slotsList[idx]==Mb.syncad.currentContainer)continue
;if((videoPosition=="bottom"||videoPosition=="keep"&&Mb.syncad.currentContainer=="mb_video_syncad_bottom")&&Mb.syncad.slotsList[idx]=="mb_video_syncad"){document.getElementById("mb_video_syncad").parentNode.style.height="0px";continue}var slot=document.getElementById(Mb.syncad.slotsList[idx]);if(Mb.syncad.slotsList[idx]=="mb_video_syncad_bottom")slot.parentNode.removeChild(slot);else slot.parentNode.parentNode.removeChild(slot.parentNode)}Mb.syncad.videoEnded(0);Mb.syncad.slotsList=[]
;if(videoPosition=="inread"||videoPosition=="keep"&&Mb.syncad.currentContainer=="mb_video_syncad"){if(Mb.enableSyncAd&&!Mb.syncrollHasAd)Mb.syncad.playerDisplayed=true;Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad"));Mb.helpers.resizeContainer(document.getElementById("mb_video_syncad").parentNode)}else if(videoPosition=="bottom"||videoPosition=="keep"&&Mb.syncad.currentContainer=="mb_video_syncad_bottom"){
Mb.syncad.currentContainer="";Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad_bottom"))}Mb.syncad.currentContainer=""}if(Mb.enableSyncAd&&Mb.syncrollHasAd==false){Mb.player.callBack.event(id,"syncrollNoAd");if(typeof window.MB_noAd!=="undefined"){window.MB_noAd(id)}}if(Mb.retargetingTrackers&&Mb.retargetingTrackers.attn){var url=Mb.helpers.parseUrl(Mb.retargetingTrackers.attn,{},id)
;Mb.helpers.loadUrl(url,"text/javascript","script",function(){})}},videoEnded:function(skipClicked){var skipAd=document.getElementById("mb_skipad");if(skipAd!=null)skipAd.parentNode.removeChild(skipAd);var nextItems=document.getElementsByClassName("mb_next_video");while(nextItems.length>0){nextItems[0].parentNode.removeChild(nextItems[0])}var nextItems=document.getElementsByClassName("mb_ad_title");while(nextItems.length>0){nextItems[0].parentNode.removeChild(nextItems[0])}
var cta=document.getElementsByClassName("mb_ad_cta");while(cta[0]){cta[0].parentNode.removeChild(cta[0])}if(Mb.endAfterPrerollCompleted[Mb.syncad.mainPlayerId]){Mb.syncad.prerollCompleted(Mb.syncad.mainPlayerId);return}if(window.MB_PAUSE_AFTER_AD==0){var player=Mb.getPlayer(Mb.syncad.mainPlayerId);player.playVideo()}var title=document.getElementById("mb_video_syncad_title");if(title!=null)title.parentNode.removeChild(title);return},startDisplayChecker:function(player,id){
if(Mb.helpers.getOffset(player,true)>50)return;var timeoutid=window.setTimeout(function(){Mb.syncad.checkDisplay(player,id);Mb.syncad.startDisplayChecker(player,id)},200);Mb.timeouts.push(timeoutid)},scrolled:function(id){if(Mb.syncrollScrolled==false){Mb.syncrollScrolled=true;Mb.player.callBack.event(id,"syncrollScrolled")}},checkDisplay:function(player,id){if(player==null||Mb.syncad.prerollCompletedDone)return
;if(typeof window.MB_ARTICLE_DISPLAY_DETECTION!="undefined"&&window.MB_ARTICLE_DISPLAY_DETECTION!=""){if(document.querySelectorAll(window.MB_ARTICLE_DISPLAY_DETECTION).length==0)return}if(Mb.syncad.floatingOnly){if(!Mb.syncad.playerDisplayed){var animateTo=Mb.helpers.calculateElementHeightByRatio(document.getElementById("mb_video_syncad_bottom"));var mbSyncadHeight=Mb.helpers.addTitleAndCtaHeight(animateTo);document.getElementById("mb_container").style.height=animateTo+"px"
;if(document.getElementById("mb_next_video")!=null)document.getElementById("mb_next_video").style.visibility="visible";Mb.syncad.scrolled(id);Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad_bottom"));if(Mb.syncad.floatLeft)var floatingSide="left";else var floatingSide="right"
;if(Mb.helpers.areCssAnimationsAvailable())Mb.helpers.cssAnimate(document.getElementById("mb_moving_container"),floatingSide,10,800,"linear");else Mb.helpers.animate(document.getElementById("mb_moving_container"),floatingSide,510,800);Mb.syncad.playerDisplayed=true}return}var pcent=0,pcentSyncad=0;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom"&&["floating","bottom","top"].indexOf(Mb.syncadtype)!=-1){
var vscroll=document.all?document.scrollTop:window.pageYOffset,bottomCont=Mb.helpers.getBounds(document.getElementById("mb_video_syncad_bottom"));if(vscroll<=bottomCont.top){pcent=0}else pcent=100;var _offset=0;if(typeof Mb.enableIntelligentSyncroll!="undefined"&&Mb.enableIntelligentSyncroll&&document.getElementById("mb_video_syncad")!=null){var _viewPort=Mb.getViewport();_offset=parseInt(_viewPort.height*.25)}
var _pcent=Mb.helpers.getVisiblePcent(document.getElementById("mb_video_syncad").parentNode,_offset);if(_pcent>5){Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad"));player.pauseAd();Mb.player.callBack.adPaused(id);return}pcent=100}else{
if(Mb.syncad.currentContainer!=null&&Mb.syncad.currentContainer!="mb_video_syncad_bottom"&&Mb.helpers.isBodyOverflowHidden())Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById(Mb.syncad.currentContainer));var _offset=0;if(typeof Mb.enableIntelligentSyncroll!="undefined"&&Mb.enableIntelligentSyncroll&&document.getElementById("mb_video_syncad")!=null){var _viewPort=Mb.getViewport();_offset=parseInt(_viewPort.height*.25)}
pcent=Mb.helpers.getVisiblePcent(document.getElementById("mb_moving_container"),_offset)}if(document.getElementById("mb_video_syncad")!=null){var _offset=0;if(typeof Mb.enableIntelligentSyncroll!="undefined"&&Mb.enableIntelligentSyncroll&&document.getElementById("mb_video_syncad")!=null){var _viewPort=Mb.getViewport();_offset=parseInt(_viewPort.height*.25)}if(Mb.helpers.getOffset(document.getElementById("mb_video_syncad").parentNode,true)<50&&!Mb.helpers.inIframe()){_offset+=200}
pcentSyncad=Mb.helpers.getVisiblePcent(document.getElementById("mb_video_syncad").parentNode,_offset)}var parentId=Mb.helpers.getParentNode(player).id;if(pcent==0&&pcentSyncad==0){if(Mb.syncad.slotsList.length>0){var closestContainer=Mb.helpers.getClosestElementDuringScroll(Mb.syncad.slotsList);var fireGetPosition=false;var testHeight=1;var testHeight2=2
;var elementPadding=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-top"));elementPadding+=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-bottom"));testHeight+=elementPadding;testHeight2+=elementPadding;var _height=Mb.helpers.getOffset(document.getElementById("mb_video_syncad").parentNode,true)
;if(closestContainer.id!="mb_video_syncad"&&(_height==testHeight||_height==testHeight2)){var animateTo=Mb.helpers.calculateElementHeightByRatio(document.getElementById("mb_video_syncad"));var mbSyncadHeight=Mb.helpers.addTitleAndCtaHeight(animateTo);document.getElementById("mb_video_syncad").parentNode.style.height=mbSyncadHeight+"px";document.getElementById("mb_container").style.height=animateTo+"px";document.getElementById("mb_video_syncad").style.height=animateTo+"px"
;if(document.getElementById("mb_next_video")!=null)document.getElementById("mb_next_video").style.visibility="visible";Mb.preventScrollEvent=false;fireGetPosition=true;Mb.syncad.playerDisplayed=true;Mb.syncad.scrolled(id)}else if(closestContainer.id!="mb_video_syncad"&&typeof window.MB_FIXED_SYNCROLL!=="undefined"&&window.MB_FIXED_SYNCROLL==1){Mb.syncad.scrolled(id)}Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),closestContainer);if(fireGetPosition){
Mb.playerState[id]=0;Mb.getPosition(id)}}}else if(pcentSyncad>0){var offsetHeight=Mb.helpers.getOffset(document.getElementById("mb_video_syncad").parentNode,true);var testHeight=1;var testHeight2=2;var elementPadding=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-top"));elementPadding+=parseInt(window.getComputedStyle(document.getElementById("mb_video_syncad").parentNode,null).getPropertyValue("padding-bottom"))
;testHeight+=elementPadding;testHeight2+=elementPadding;if((offsetHeight==testHeight||offsetHeight==testHeight2)&&!Mb.scrollAnimationInProgress){Mb.scrollAnimationInProgress=true;var animateTo=Mb.helpers.calculateElementHeightByRatio(document.getElementById("mb_video_syncad"));var mbSyncadHeight=Mb.helpers.addTitleAndCtaHeight(animateTo);var animationCallback1=function(){Mb.preventScrollEvent=false
;if(typeof window.MB_PADDING!="undefined")document.getElementById("mb_video_syncad").parentNode.style.marginTop=window.MB_PADDING+"px";document.getElementById("mb_video_syncad").parentNode.style.paddingTop="";document.getElementById("mb_video_syncad").parentNode.style.backgroundColor="";document.getElementById("mb_video_syncad").style.paddingTop=""};var animationCallback2=function(){Mb.syncad.playerDisplayed=true;Mb.syncad.scrolled(id)
;Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad"));Mb.preventScrollEvent=false;Mb.playerState[id]=0;Mb.getPosition(id);Mb.scrollAnimationInProgress=false;if(document.getElementById("mb_next_video")!=null)document.getElementById("mb_next_video").style.visibility="visible";Mb.syncad.scrolled(id)};var _player=Mb.getPlayer(Mb.syncad.mainPlayerId);_player.playAd();if(Mb.helpers.areCssAnimationsAvailable()){
Mb.helpers.cssAnimate(document.getElementById("mb_video_syncad").parentNode,"height",mbSyncadHeight,400,"linear",animationCallback1);Mb.helpers.cssAnimate(document.getElementById("mb_container"),"height",animateTo,400,"linear",animationCallback2)}else{Mb.helpers.animate(document.getElementById("mb_video_syncad").parentNode,"height",mbSyncadHeight,200,animationCallback1);Mb.helpers.animate(document.getElementById("mb_container"),"height",animateTo,200,animationCallback2,true)}
}else if(!Mb.scrollAnimationInProgress){Mb.syncad.playerDisplayed=true;Mb.helpers.moveToContainer(document.getElementById("mb_moving_container"),document.getElementById("mb_video_syncad"));Mb.preventScrollEvent=false;Mb.getPosition(id);if(typeof window.MB_FIXED_SYNCROLL!=="undefined"&&window.MB_FIXED_SYNCROLL==1||Mb.helpers.inIframe()){Mb.syncad.scrolled(id)}}}},addSkip:function(id){var skipad=document.getElementById("mb_skipad");if(skipad!=null)return
;var player=document.getElementById(id),skip=document.createElement("div");if(player==null)return;Mb.helpers.getParentNode(player).style.position="relative";skip.id="mb_skipad";skip.innerHTML="";skip.style.cursor="pointer";skip.style.position="absolute";skip.style.zIndex="10000001";if(Mb.playerIsHtml5&&!Mb.isIphone()){skip.style.top="30px";skip.style.left="0px";skip.style.padding="6px"}else{skip.style.bottom="35px";skip.style.right="0px";skip.style.padding="3px"}
skip.style.backgroundImage="url(//static.mediabong.com/bg/000000.png)";skip.style.color="#fff";skip.style.fontFamily="Helvetica";skip.style.fontSize="11px";skip.style.fontWeight="normal";skip.style.width="120px";skip.style.textAlign="center";Mb.helpers.getParentNode(player).appendChild(skip);Mb.syncad.skipCounter(skip,id);Mb.syncad.playingSyncAd=true},skipCounter:function(skipObj,playerId){if(Mb.syncad.skipDelay>0){skipObj.innerHTML=window.mb_skipin+" "+Mb.syncad.skipDelay+" s"
;Mb.syncad.skipDelay--;var timeoutid=window.setTimeout(function(){Mb.syncad.skipCounter(skipObj)},1e3);Mb.timeouts.push(timeoutid)}else{skipObj.innerHTML="<a href='javascript:Mb.syncad.skipAd();' style='color: #fff;'>"+window.mb_skip+"</a>";skipObj.onclick=function(){Mb.syncad.skipAd()}}},skipAd:function(skipButton){var mainPlayer=document.getElementById(Mb.syncad.mainPlayerId);var player=Mb.getPlayer(Mb.syncad.mainPlayerId);window.MB_PAUSE_AFTER_AD=0;Mb.syncad.adSkipped=true
;if(typeof player.isIMA!=="undefined"){if(typeof player.ima!=="undefined"&&player.isIMA)player.ima.adSkipped_();else if(!player.isIMA)Mb.mobile.canvas.skipped()}try{Mb.syncad.prerollCompleted(Mb.syncad.mainPlayerId)}catch(e){return}Mb.player.callBack.adCloseLinear(Mb.syncad.mainPlayerId);Mb.syncad.playingSyncAd=false;Mb.syncad.videoEnded(1);return},addNextVideo:function(container){if(container==null)return;if(Mb.endAfterPrerollCompleted[Mb.syncad.mainPlayerId]&&Mb.appendAdTitle){
if(document.getElementById("mb_ad_title")!=null)return;if(typeof window.Mb_adTitleType=="undefined")window.Mb_adTitleType="default";var titleStyle=document.createElement("style");if(window.Mb_adTitleType=="iframe"){var bottomContainer=document.createElement("iframe");bottomContainer.style.display="block";bottomContainer.style.border="0px";bottomContainer.style.width="100%";bottomContainer.style.height="30px";bottomContainer.src=window.Mb_ctaUrl}else if(window.Mb_adTitleType=="cta"){
var bottomContainer=document.createElement("div");bottomContainer.style.border="0px";bottomContainer.style.width="100%";bottomContainer.style.height="30px";bottomContainer.innerHTML=window.Mb_ctaContent}else{if(window.Mb_adTitle==""&&window.Mb_adResume=="")return;var bottomContainer=document.createElement("div"),title=document.createElement("div"),resume=document.createElement("div"),titleLink=document.createElement("a"),resumeLink=document.createElement("a");title.style.fontWeight="bold"
;resume.style.fontSize="70%";title.style.whiteSpace="nowrap";title.style.fontSize="85%";resume.style.marginTop="5px";resume.style.whiteSpace="nowrap";if(window.Mb_adTitle!=""){var titleText=document.createTextNode(window.Mb_adTitle);titleLink.appendChild(titleText);titleLink.href=window.Mb_adLink;titleLink.target="_blank";titleLink.style.textDecoration="none";titleLink.style.color="#000";title.appendChild(titleLink);bottomContainer.appendChild(title)}if(window.Mb_adResume!=""){
var resumeText=document.createTextNode(window.Mb_adResume);resumeLink.appendChild(resumeText);resumeLink.href=window.Mb_adLink;resumeLink.target="_blank";resumeLink.style.textDecoration="none";resumeLink.style.color="#000";resume.appendChild(resumeLink);bottomContainer.appendChild(resume)}bottomContainer.style.border="1px solid";bottomContainer.style.borderTop="0px";bottomContainer.style.borderColor="#e9eaed #e9eaed #d1d1d1";bottomContainer.style.padding="3px"
;bottomContainer.style.backgroundColor="#eee";bottomContainer.style.overflow="hidden";bottomContainer.className="mb_ad_title"}bottomContainer.id="mb_ad_title";container.parentNode.appendChild(bottomContainer);Mb.syncad.adjustContainer();return}if(Mb.endAfterPrerollCompleted[Mb.syncad.mainPlayerId])return;if(container.parentNode.getElementsByClassName("mb_next_video").length==0){if(Mb.helpers.hasClass(container.parentNode.parentNode,"mb_bloc"))return
;var nextVideo=document.createElement("div"),nextThumb=document.createElement("img"),nextTitle=document.createElement("div"),nextLine=document.createElement("table");nextLine.style.width=container.offsetWidth+"px";nextLine.style.tableLayout="fixed";nextLine.id="mb_next_video_table";nextLine.style.border="0px";nextLine.style.borderSpacing="0px";nextVideo.className="mb_next_video";nextVideo.id="mb_next_video";nextVideo.style.position="relative";nextVideo.style.bottom="0px"
;nextVideo.style.background="#000";if(!Mb.syncad.playerDisplayed)nextVideo.style.visibility="hidden";nextVideo.style.height="30px";nextTitle.style.fontSize="12px";nextVideo.style.clear="both";var row=nextLine.insertRow(0);var titleCell=row.insertCell(0),thumbCell=row.insertCell(1);titleCell.id="mb_next_video_title";thumbCell.id="mb_next_video_thumb";titleCell.style.color="#fff";titleCell.style.padding="0px";titleCell.style.lineHeight="100%";titleCell.style.verticalAlign="middle"
;titleCell.style.background="#000";titleCell.style.border="none";nextTitle.style.overflow="hidden";nextTitle.style.whiteSpace="nowrap";nextTitle.style.textOverflow="ellipsis";nextTitle.id="mb_next_video_title_div";thumbCell.style.width="15%";thumbCell.style.padding="0px";thumbCell.style.textAlign="right";thumbCell.style.background="#000";thumbCell.style.border="none";nextThumb.src=mb_players[Mb.syncad.mainPlayerId].thumbnail;nextThumb.style.maxWidth="53px";nextThumb.style.maxHeight="30px"
;nextThumb.style.cssFloat="right";thumbCell.appendChild(nextThumb);nextTitle.innerHTML=mb_players[Mb.syncad.mainPlayerId].title;nextTitle.style.paddingLeft="15px";titleCell.appendChild(nextTitle);nextVideo.appendChild(nextLine);container.parentNode.appendChild(nextVideo);container.parentNode.parentNode.style.position="relative";container.parentNode.parentNode.style.height=Mb.helpers.getOffset(container.parentNode.parentNode,true)+Mb.helpers.getOffset(nextVideo,true)+"px"}},
manifestLoaded:function(id){document.getElementById(id).pauseVideo()},videoCompleted:function(){Mb.syncad.playingSyncAd=false;Mb.syncad.videoEnded(0);mb_players[Mb.syncad.mainPlayerId].checkScroll=false;mb_players[Mb.syncad.mainPlayerId].checkStopScroll=false;mb_players[Mb.syncad.mainPlayerId].pcent=0;var player=document.getElementById(Mb.syncad.mainPlayerId);player.loadManifest(Mb.syncad.mainManifest)}},addscrollEvent:function(func){var elt=window.top||window.parent||window;try{elt.onscroll
}catch(e){elt=window}var oldonscroll=elt.onscroll;if(!Mb.addScrollEventCalled){if(oldonscroll)Mb.externalScrollEvent=oldonscroll;Mb.addScrollEventCalled=true}if(typeof elt.onscroll!="function"){elt.onscroll=func}else{elt.onscroll=function(){func();if(oldonscroll){oldonscroll()}}}document.addEventListener("touchcancel",func);document.addEventListener("touchstart",func);Mb.addToEventsList("touchcancel",func,document,false);Mb.addToEventsList("touchstart",func,document,false)},userGesture:{
scrollTop:document.all?document.scrollTop:window.pageYOffset,scrollLeft:document.all?document.scrollLeft:window.pageXOffset,currentScroll:[0,0],currentPos:[0,0],callbacks:[],emulationStarted:false,handleTouchStart:function(e){Mb.userGesture.emulationStarted=true;var touch=e.changedTouches[0];Mb.userGesture.currentScroll[0]=document.all?document.scrollLeft:window.pageXOffset;Mb.userGesture.currentScroll[1]=document.all?document.scrollTop:window.pageYOffset
;if(e.touches.length==1)Mb.userGesture.currentPos=[touch.screenX,touch.screenY];e.preventDefault()},handleTouchMove:function(e){if(!Mb.userGesture.emulationStarted)return;var zoom=MbDetectZoom.zoom();if(e.touches.length==1){var touch=e.changedTouches[0];var scrollX=-(touch.screenX-Mb.userGesture.currentPos[0])/zoom,scrollY=-(touch.screenY-Mb.userGesture.currentPos[1])/zoom;Mb.userGesture.currentScroll[0]+=scrollX;Mb.userGesture.currentScroll[1]+=scrollY
;window.scrollTo(Mb.userGesture.currentScroll[0],Mb.userGesture.currentScroll[1]);Mb.userGesture.currentPos=[touch.screenX,touch.screenY]}},handleTouchEnd:function(e,func){if(!Mb.userGesture.emulationStarted)return;for(var idx=0;idx<Mb.userGesture.callbacks.length;idx++)Mb.userGesture.callbacks[idx]();Mb.userGesture.reset()},handle:function(func){if(Mb.userGesture.callbacks.length==0){document.addEventListener("touchstart",Mb.userGesture.handleTouchStart,{passive:false})
;document.addEventListener("touchmove",Mb.userGesture.handleTouchMove,false);document.addEventListener("touchend",Mb.userGesture.handleTouchEnd,false);Mb.addToEventsList("touchstart",Mb.userGesture.handleTouchStart,document,false);Mb.addToEventsList("touchmove",Mb.userGesture.handleTouchMove,document,false);Mb.addToEventsList("touchend",Mb.userGesture.handleTouchEnd,document,false)}Mb.userGesture.callbacks.push(func)},reset:function(){Mb.userGesture.callbacks=[]
;document.removeEventListener("touchstart",Mb.userGesture.handleTouchStart);document.removeEventListener("touchmove",Mb.userGesture.handleTouchMove);document.removeEventListener("touchend",Mb.userGesture.handleTouchEnd);Mb.userGesture.emulationStarted=false}},getViewport:function(){var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;var tmp={width:x,height:y};return tmp},
getElementSizeInScreen:function(id){var elt=document.getElementById(id),viewPort=Mb.getViewport();if(elt==null)return 0;var eltHeight=Mb.helpers.getOffset(elt,true);var ratio=eltHeight/viewPort.height;return Math.round(ratio*100)/100},getScrollValue:function(){return document.all?document.scrollTop:window.pageYOffset},getVisibilityInAttentionZone:function(id){var pcent=0;if(document.getElementById(id)==null)return 0
;var elem=document.getElementById(id),viewPort=Mb.getViewport(),height=Mb.helpers.getOffset(elem,true);if(Mb.helpers.inIframe()&&window.frameElement!==null){elem=window.frameElement;var w=window.top,d=window.top.document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;viewPort={width:x,height:y}}var newPos=elem.getBoundingClientRect(),pos={left:newPos.left,top:newPos.top,bottom:newPos.bottom}
;var playerRatio=height/viewPort.height,attentionZoneHeight=parseInt(viewPort.height*.25);viewPort.height=parseInt(viewPort.height*.5);if(playerRatio>=.25&&playerRatio<.75)triggerPcent=40;else if(playerRatio>=.75)triggerPcent=70;pos.top-=attentionZoneHeight;pos.bottom-=attentionZoneHeight;if(pos.top<0){pos.top=0}if(pos.top>viewPort.height){pos.top=viewPort.height}if(pos.bottom>viewPort.height){pos.bottom=viewPort.height}if(pos.bottom<0){pos.bottom=0}visible=pos.bottom-pos.top
;if(visible>viewPort.height){visible=viewPort.height}pcent=visible*100/height;pcent=Math.ceil(pcent);if(pcent>100)pcent=100;return pcent},getVisibility:function(id,forTracking){var pcent=0;if(document.getElementById(id)==null)return 0;var elem=document.getElementById(id),viewPort=Mb.getViewport(),height=Mb.helpers.getOffset(elem,true);if(Mb.helpers.inIframe()&&window.frameElement!==null){elem=window.frameElement
;var w=window.top,d=window.top.document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;viewPort={width:x,height:y}}var newPos=elem.getBoundingClientRect(),pos={left:newPos.left,top:newPos.top,bottom:newPos.bottom};if(forTracking==false&&typeof Mb.enableIntelligentSyncroll!="undefined"&&Mb.enableIntelligentSyncroll&&document.getElementById("mb_video_syncad")!=null){
var playerRatio=height/viewPort.height,attentionZoneHeight=parseInt(viewPort.height*.25);viewPort.height=parseInt(viewPort.height*.5);if(playerRatio>=.25&&playerRatio<.75)triggerPcent=40;else if(playerRatio>=.75)triggerPcent=70;pos.top-=attentionZoneHeight;pos.bottom-=attentionZoneHeight}if(pos.top<0){pos.top=0}if(pos.top>viewPort.height){pos.top=viewPort.height}if(pos.bottom>viewPort.height){pos.bottom=viewPort.height}if(pos.bottom<0){pos.bottom=0}visible=pos.bottom-pos.top
;if(visible>viewPort.height){visible=viewPort.height}pcent=visible*100/height;pcent=Math.ceil(pcent);if(pcent>100)pcent=100;return pcent},getVisiblePixels:function(elem){var elementOffsets=Mb.helpers.getOffsets(elem),elemBounds=elem.getBoundingClientRect();var windowHeight=window.innerHeight,windowWidth=window.innerWidth;var visibleHeight=elementOffsets.height,visibleWidth=elementOffsets.width;if(elemBounds.top<0)visibleHeight+=elemBounds.top
;if(elemBounds.bottom>windowHeight)visibleHeight-=elemBounds.bottom-windowHeight;if(elemBounds.left<0)visibleWidth+=elemBounds.left;if(elemBounds.right>windowWidth)visibleWidth-=elemBounds.right-windowWidth;elementVisibleSurface=visibleHeight*visibleWidth;if(elementVisibleSurface<0)elementVisibleSurface=0;return elementVisibleSurface},getPosition:function(id,returnEvent){var _event="none";if(Mb.preventScrollEvent)return _event;Mb.fireCallbacks("scroll",id)
;if(document.getElementById(id)==null)return _event;if(Mb.stopEvent==true)return _event;if(!mb_players[id].ready)return _event;if(!mb_players[id].checkScroll&&!mb_players[id].checkStopScroll)return _event;mb_players[id].pcent=parseInt(mb_players[id].pcent);var triggerPcent=mb_players[id].pcent;var now=0,duration=0,visible=0,bottom=0,elem=document.getElementById(id),pos={left:0,top:0
},vscroll=document.all?document.scrollTop:window.pageYOffset,viewPort=Mb.getViewport(),height=Mb.helpers.getOffset(elem,true);duration=(now-mb_players[id].start)/1e3;mb_players[id].start=now;if(Mb.helpers.inIframe()&&window.frameElement!==null){elem=window.frameElement;var w=window.top,d=window.top.document,e=d.documentElement,g=d.getElementsByTagName("body")[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;viewPort={width:x,height:y}}
var newPos=elem.getBoundingClientRect();pos={left:newPos.left,top:newPos.top,bottom:newPos.bottom};if(typeof Mb.enableIntelligentSyncroll!="undefined"&&Mb.enableIntelligentSyncroll&&document.getElementById("mb_video_syncad")!=null){var playerRatio=height/viewPort.height,attentionZoneHeight=parseInt(viewPort.height*.25);viewPort.height=parseInt(viewPort.height*.5);if(window.MB_DEV_SCRIPT&&mb_players[id].pcent>50)triggerPcent=mb_players[id].pcent;else triggerPcent=50;pos.top-=attentionZoneHeight
;pos.bottom-=attentionZoneHeight}if(pos.top<0){pos.top=0}if(pos.top>viewPort.height){pos.top=viewPort.height}if(pos.bottom>viewPort.height){pos.bottom=viewPort.height}if(pos.bottom<0){pos.bottom=0}visible=pos.bottom-pos.top;if(visible>viewPort.height){visible=viewPort.height}pcent=visible*100/height;pcent=Math.ceil(pcent);if(Mb.enableEnhancedBehavior&&Mb.documentVisibility=="hidden")pcent=0;if(mb_players[id].checkScroll){if(pcent>=triggerPcent){if(returnEvent==true)return"play";Mb.delayStart(id)
}else{}}if(mb_players[id].checkStopScroll){if(pcent<triggerPcent&&Mb.playerState[id]==1){if(returnEvent==true)return"pause";Mb.player.pause(id)}else{return"none"}}},delayStart:function(id){if(Mb.playerState[id]==1)return;Mb.player.start(id,mb_players[id].delay,Mb.events[id].doMute);mb_players[id].delay=0;Mb.events[id].doMute=false},stopDelay:function(id){if(!mb_players[id].ready){return false}clearTimeout(mb_players[id].timeoutObj)},isVisible:function(id,evt){var v="visible",h="hidden",evtMap={
focus:v,focusin:v,pageshow:v,blur:h,focusout:h,pagehide:h};evt=evt||window.event},iOSversion:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var v=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseFloat(parseInt(v[1],10)+"."+parseInt(v[2],10))}return 0},androidVersion:function(){var ua=navigator.userAgent.toLowerCase();var match=ua.match(/android\s([0-9\.]*)/);return match?match[1]:false},isIphone:function(){
if(/iPad/i.test(navigator.userAgent)&&Mb.ipadAsIphone)return true;if(/iPhone|iPod/i.test(navigator.userAgent))return true;return false},registerCallBack:function(event,callbackFunction){if(Mb.callbacks[event]===undefined)Mb.callbacks[event]=[];Mb.callbacks[event].push(callbackFunction)},fireCallbacks:function(event,playerId){if(Mb.callbacks[event]===undefined)return;var idx=0;for(idx=0;idx<Mb.callbacks[event].length;idx++){Mb.callbacks[event][idx](playerId)}},
addToEventsList:function(event,fn,obj,capture){Mb.eventsList.push({event:event,obj:obj,fn:fn,capture:capture})},clearEvents:function(){for(var idx=0;idx<Mb.eventsList.length;idx++){var elem=Mb.eventsList[idx].obj;var event=Mb.eventsList[idx].event;var fn=Mb.eventsList[idx].fn;if(elem.removeEventListener){elem.removeEventListener(event,fn,Mb.eventsList[idx].capture)}else if(elem.detachEvent){elem.detachEvent("on"+event,fn)}else{elem["on"+type]=""}}var elt=window.top||window.parent||window
;elt.onscroll=Mb.externalScrollEvent},clearTimeouts:function(){for(var idx=0;idx<Mb.timeouts.length;idx++)clearTimeout(Mb.timeouts[idx])},clearIntervals:function(){for(var idx=0;idx<Mb.intervals.length;idx++)clearInterval(Mb.intervals[idx])},clearHtml:function(){if(document.getElementById("mb_container")!=null)document.getElementById("mb_container").parentNode.removeChild(document.getElementById("mb_container"))
;if(document.getElementById("mb_new_container")!=null)document.getElementById("mb_new_container").parentNode.removeChild(document.getElementById("mb_new_container"));if(document.getElementById("mb_video_syncad")!=null)document.getElementById("mb_video_syncad").parentNode.parentNode.removeChild(document.getElementById("mb_video_syncad").parentNode)
;if(document.getElementById("mb_video_syncad_bottom")!=null)document.getElementById("mb_video_syncad_bottom").parentNode.removeChild(document.getElementById("mb_video_syncad_bottom"));if(document.getElementById("mb_video_syncad_floating")!=null)document.getElementById("mb_video_syncad_floating").parentNode.removeChild(document.getElementById("mb_video_syncad_floating"))
;if(document.getElementsByClassName("syncad_slot").length>0)document.getElementsByClassName("syncad_slot")[0].parentNode.removeChild(document.getElementsByClassName("syncad_slot")[0]);var title=document.getElementById("mb_video_syncad_title");if(title!=null)title.parentNode.removeChild(title);for(var idx=0;idx<Mb.syncad.slotsList.length;idx++){var slot=document.getElementById(Mb.syncad.slotsList[idx]);if(slot!=null){
if(Mb.syncad.slotsList[idx]=="mb_video_syncad_bottom")slot.parentNode.removeChild(slot);else slot.parentNode.parentNode.removeChild(slot.parentNode)}}},destroy:function(){if(typeof window.jsmpeg!=="undefined")window.jsmpeg=undefined;if(typeof window.mbjpeg!=="undefined")window.mbjpeg=undefined;if(Mb.playerIsHtml5){window.vjs=undefined;window.DMVAST=undefined;window.Mb.videojs=undefined}window.Mb=undefined;window.MbLoadPlayer=undefined;window.onMediabongExternalPlayerReady=undefined},
stop:function(){Mb.clearEvents();Mb.clearTimeouts();Mb.clearIntervals();if(Mb.playerIsHtml5){var _player=Mb.getPlayer(Mb.syncad.mainPlayerId);_player.stop()}Mb.clearHtml();Mb.destroy()}};window.Mb=Mb;(function(root,ns,factory){"use strict";root[ns]=factory(ns,root)})(window,"MbDetectZoom",function(){var devicePixelRatio=function(){return window.devicePixelRatio||1};var fallback=function(){return{zoom:1,devicePxPerCssPx:1}};var ie8=function(){
var zoom=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:zoom,devicePxPerCssPx:zoom*devicePixelRatio()}};var ie10=function(){var zoom=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:zoom,devicePxPerCssPx:zoom*devicePixelRatio()}};var chrome=function(){var zoom=Math.round(window.outerWidth/window.innerWidth*100)/100;return{zoom:zoom,devicePxPerCssPx:zoom*devicePixelRatio()}};var safari=function(){
var zoom=Math.round(document.documentElement.clientWidth/window.innerWidth*100)/100;return{zoom:zoom,devicePxPerCssPx:zoom*devicePixelRatio()}};var webkitMobile=function(){var deviceWidth=Math.abs(window.orientation)==90?screen.height:screen.width;var zoom=deviceWidth/window.innerWidth;return{zoom:zoom,devicePxPerCssPx:zoom*devicePixelRatio()}};var webkit=function(){var important=function(str){return str.replace(/;/g," !important;")};var div=document.createElement("div")
;div.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0";div.setAttribute("style",important("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var container=document.createElement("div");container.setAttribute("style",important("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;"));container.appendChild(div);document.body.appendChild(container)
;var zoom=1e3/div.clientHeight;zoom=Math.round(zoom*100)/100;document.body.removeChild(container);return{zoom:zoom,devicePxPerCssPx:zoom*devicePixelRatio()}};var firefox4=function(){var zoom=mediaQueryBinarySearch("min--moz-device-pixel-ratio","",0,10,20,1e-4);zoom=Math.round(zoom*100)/100;return{zoom:zoom,devicePxPerCssPx:zoom}};var firefox18=function(){return{zoom:firefox4().zoom,devicePxPerCssPx:devicePixelRatio()}};var opera11=function(){var zoom=window.top.outerWidth/window.top.innerWidth
;zoom=Math.round(zoom*100)/100;return{zoom:zoom,devicePxPerCssPx:zoom*devicePixelRatio()}};var mediaQueryBinarySearch=function(property,unit,a,b,maxIter,epsilon){var matchMedia;var head,style,div;if(window.matchMedia){matchMedia=window.matchMedia}else{head=document.getElementsByTagName("head")[0];style=document.createElement("style");head.appendChild(style);div=document.createElement("div");div.className="mediaQueryBinarySearch";div.style.display="none";document.body.appendChild(div)
;matchMedia=function(query){style.sheet.insertRule("@media "+query+"{.mediaQueryBinarySearch "+"{text-decoration: underline} }",0);var matched=getComputedStyle(div,null).textDecoration=="underline";style.sheet.deleteRule(0);return{matches:matched}}}var ratio=binarySearch(a,b,maxIter);if(div){head.removeChild(style);document.body.removeChild(div)}return ratio;function binarySearch(a,b,maxIter){var mid=(a+b)/2;if(maxIter<=0||b-a<epsilon){return mid}var query="("+property+":"+mid+unit+")"
;if(matchMedia(query).matches){return binarySearch(mid,b,maxIter-1)}else{return binarySearch(a,mid,maxIter-1)}}};var detectFunction=function(){var func=fallback;if(!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)){func=ie8}else if(window.navigator.msMaxTouchPoints){func=ie10}else if(!!window.chrome&&!(!!window.opera||navigator.userAgent.indexOf(" Opera")>=0)){func=chrome}else if(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0){func=safari
}else if("orientation"in window&&"webkitRequestAnimationFrame"in window){func=webkitMobile}else if("webkitRequestAnimationFrame"in window){func=webkit}else if(navigator.userAgent.indexOf("Opera")>=0){func=opera11}else if(window.devicePixelRatio){func=firefox18}else if(firefox4().zoom>.001){func=firefox4}return func}();return{zoom:function(){return detectFunction().zoom},device:function(){return detectFunction().devicePxPerCssPx}}});document.createElement("video");document.createElement("audio")
;document.createElement("track");var vjs=function(id,options,ready){var tag;if(typeof id==="string"){if(id.indexOf("#")===0)id=id.slice(1);if(vjs.players[id])return vjs.players[id];else tag=vjs.el(id)}else tag=id;if(!tag||!tag.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return tag["player"]||new vjs.Player(tag,options,ready)};Mb.videojs=window["Mb.videojs"]=vjs;vjs.CDN_VERSION="4.8"
;vjs.ACCESS_PROTOCOL="https:"==document.location.protocol?"https://":"http://";vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,playbackRates:[],inactivityTimeout:2e3,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{},errorDisplay:{}},
language:document.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this video."};if(vjs.CDN_VERSION!=="GENERATED"+"_CDN_VSN")Mb.videojs.options["flash"]["swf"]=vjs.ACCESS_PROTOCOL+"vjs.zencdn.net/"+vjs.CDN_VERSION+"/video-js.swf";vjs.addLanguage=function(code,data){
if(vjs.options["languages"][code]!==undefined)vjs.options["languages"][code]=vjs.util.mergeOptions(vjs.options["languages"][code],data);else vjs.options["languages"][code]=data;return vjs.options["languages"]};vjs.players={};if(typeof define==="function"&&define["amd"])define([],function(){return Mb.videojs});else if(typeof exports==="object"&&typeof module==="object")module["exports"]=Mb.videojs;vjs.CoreObject=vjs["CoreObject"]=function(){};vjs.CoreObject.extend=function(props){var init,subObj
;props=props||{};init=props["init"]||props.init||this.prototype["init"]||this.prototype.init||function(){};subObj=function(){init.apply(this,arguments)};subObj.prototype=vjs.obj.create(this.prototype);subObj.prototype.constructor=subObj;subObj.extend=vjs.CoreObject.extend;subObj.create=vjs.CoreObject.create;for(var name in props)if(props.hasOwnProperty(name))subObj.prototype[name]=props[name];return subObj};vjs.CoreObject.create=function(){var inst=vjs.obj.create(this.prototype)
;this.apply(inst,arguments);return inst};vjs.on=function(elem,type,fn){if(vjs.obj.isArray(type))return _handleMultipleEvents(vjs.on,elem,type,fn);var data=vjs.getData(elem);if(!data.handlers)data.handlers={};if(!data.handlers[type])data.handlers[type]=[];if(!fn.guid)fn.guid=vjs.guid++;data.handlers[type].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event){if(data.disabled)return;event=vjs.fixEvent(event);var handlers=data.handlers[event.type];if(handlers){
var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++)if(event.isImmediatePropagationStopped())break;else handlersCopy[m].call(elem,event)}}}if(data.handlers[type].length==1)if(elem.addEventListener)elem.addEventListener(type,data.dispatcher,false);else if(elem.attachEvent)elem.attachEvent("on"+type,data.dispatcher)};vjs.off=function(elem,type,fn){if(elem==null)return;if(!vjs.hasData(elem))return;var data=vjs.getData(elem);if(!data.handlers)return
;if(vjs.obj.isArray(type))return _handleMultipleEvents(vjs.off,elem,type,fn);var removeType=function(t){data.handlers[t]=[];vjs.cleanUpEvents(elem,t)};if(!type){for(var t in data.handlers)removeType(t);return}var handlers=data.handlers[type];if(!handlers)return;if(!fn){removeType(type);return}if(fn.guid)for(var n=0;n<handlers.length;n++)if(handlers[n].guid===fn.guid)handlers.splice(n--,1);vjs.cleanUpEvents(elem,type)};vjs.cleanUpEvents=function(elem,type){var data=vjs.getData(elem)
;if(data.handlers[type].length===0){delete data.handlers[type];if(elem.removeEventListener)elem.removeEventListener(type,data.dispatcher,false);else if(elem.detachEvent)elem.detachEvent("on"+type,data.dispatcher)}if(vjs.isEmpty(data.handlers)){delete data.handlers;delete data.dispatcher;delete data.disabled}if(vjs.isEmpty(data))vjs.removeData(elem)};vjs.fixEvent=function(event){function returnTrue(){return true}function returnFalse(){return false}if(!event||!event.isPropagationStopped){
var old=event||window.event;event={};for(var key in old)if(key!=="layerX"&&key!=="layerY"&&key!=="keyboardEvent.keyLocation")if(!(key=="returnValue"&&old.preventDefault))event[key]=old[key];if(!event.target)event.target=event.srcElement||document;event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;event.preventDefault=function(){if(old.preventDefault)old.preventDefault();event.returnValue=false;event.isDefaultPrevented=returnTrue;event.defaultPrevented=true}
;event.isDefaultPrevented=returnFalse;event.defaultPrevented=false;event.stopPropagation=function(){if(old.stopPropagation)old.stopPropagation();event.cancelBubble=true;event.isPropagationStopped=returnTrue};event.isPropagationStopped=returnFalse;event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation)old.stopImmediatePropagation();event.isImmediatePropagationStopped=returnTrue;event.stopPropagation()};event.isImmediatePropagationStopped=returnFalse;if(event.clientX!=null){
var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}event.which=event.charCode||event.keyCode;if(event.button!=null)event.button=event.button&1?0:event.button&4?1:event.button&2?2:0}return event};vjs.trigger=function(elem,event){if(elem==null)return
;var elemData=vjs.hasData(elem)?vjs.getData(elem):{};var parent=elem.parentNode||elem.ownerDocument;if(typeof event==="string")event={type:event,target:elem};event=vjs.fixEvent(event);if(elemData.dispatcher)elemData.dispatcher.call(elem,event);if(parent&&!event.isPropagationStopped()&&event.bubbles!==false)vjs.trigger(parent,event);else if(!parent&&!event.defaultPrevented){var targetData=vjs.getData(event.target);if(event.target[event.type]){targetData.disabled=true
;if(typeof event.target[event.type]==="function")event.target[event.type]();targetData.disabled=false}}return!event.defaultPrevented};vjs.one=function(elem,type,fn){if(vjs.obj.isArray(type))return _handleMultipleEvents(vjs.one,elem,type,fn);var func=function(){vjs.off(elem,type,func);fn.apply(this,arguments)};func.guid=fn.guid=fn.guid||vjs.guid++;vjs.on(elem,type,func)};function _handleMultipleEvents(fn,elem,type,callback){vjs.arr.forEach(type,function(type){fn(elem,type,callback)})}
var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(tagName,properties){var el;tagName=tagName||"div";properties=properties||{};el=document.createElement(tagName);vjs.obj.each(properties,function(propName,val){if(propName.indexOf("aria-")!==-1||propName=="role")el.setAttribute(propName,val);else el[propName]=val});return el};vjs.capitalize=function(string){return string.charAt(0).toUpperCase()+string.slice(1)};vjs.obj={};vjs.obj.create=Object.create||function(obj){function F(){}
F.prototype=obj;return new F};vjs.obj.each=function(obj,fn,context){for(var key in obj)if(hasOwnProp.call(obj,key))fn.call(context||this,key,obj[key])};vjs.obj.merge=function(obj1,obj2){if(!obj2)return obj1;for(var key in obj2)if(hasOwnProp.call(obj2,key))obj1[key]=obj2[key];return obj1};vjs.obj.deepMerge=function(obj1,obj2){var key,val1,val2;obj1=vjs.obj.copy(obj1);for(key in obj2)if(hasOwnProp.call(obj2,key)){val1=obj1[key];val2=obj2[key]
;if(vjs.obj.isPlain(val1)&&vjs.obj.isPlain(val2))obj1[key]=vjs.obj.deepMerge(val1,val2);else obj1[key]=obj2[key]}return obj1};vjs.obj.copy=function(obj){return vjs.obj.merge({},obj)};vjs.obj.isPlain=function(obj){return!!obj&&typeof obj==="object"&&obj.toString()==="[object Object]"&&obj.constructor===Object};vjs.obj.isArray=Array.isArray||function(arr){return Object.prototype.toString.call(arr)==="[object Array]"};vjs.isNaN=function(num){return num!==num};vjs.bind=function(context,fn,uid){
if(!fn.guid)fn.guid=vjs.guid++;var ret=function(){return fn.apply(context,arguments)};ret.guid=uid?uid+"_"+fn.guid:fn.guid;return ret};vjs.cache={};vjs.guid=1;vjs.expando="vdata"+(new Date).getTime();vjs.getData=function(el){var id=el[vjs.expando];if(!id){id=el[vjs.expando]=vjs.guid++;vjs.cache[id]={}}return vjs.cache[id]};vjs.hasData=function(el){var id=el[vjs.expando];return!(!id||vjs.isEmpty(vjs.cache[id]))};vjs.removeData=function(el){var id=el[vjs.expando];if(!id)return;delete vjs.cache[id]
;try{delete el[vjs.expando]}catch(e){if(el.removeAttribute)el.removeAttribute(vjs.expando);else el[vjs.expando]=null}};vjs.isEmpty=function(obj){for(var prop in obj)if(obj[prop]!==null)return false;return true};vjs.addClass=function(element,classToAdd){if((" "+element.className+" ").indexOf(" "+classToAdd+" ")==-1)element.className=element.className===""?classToAdd:element.className+" "+classToAdd};vjs.removeClass=function(element,classToRemove){var classNames,i
;if(element.className.indexOf(classToRemove)==-1)return;classNames=element.className.split(" ");for(i=classNames.length-1;i>=0;i--)if(classNames[i]===classToRemove)classNames.splice(i,1);element.className=classNames.join(" ")};vjs.TEST_VID=vjs.createEl("video");vjs.USER_AGENT=navigator.userAgent;vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT);vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT);vjs.IS_IPOD=/iPod/i.test(vjs.USER_AGENT);vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD
;vjs.IOS_VERSION=function(){var match=vjs.USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1])return match[1]}();vjs.IS_ANDROID=/Android/i.test(vjs.USER_AGENT);vjs.ANDROID_VERSION=function(){var match=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),major,minor;if(!match)return null;major=match[1]&&parseFloat(match[1]);minor=match[2]&&parseFloat(match[2]);if(major&&minor)return parseFloat(match[1]+"."+match[2]);else if(major)return major;else return null}()
;vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&/webkit/i.test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3;vjs.IS_FIREFOX=/Firefox/i.test(vjs.USER_AGENT);vjs.IS_CHROME=/Chrome/i.test(vjs.USER_AGENT);vjs.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);vjs.setElementAttributes=function(el,attributes){vjs.obj.each(attributes,function(attrName,attrValue){
if(attrValue===null||typeof attrValue==="undefined"||attrValue===false)el.removeAttribute(attrName);else el.setAttribute(attrName,attrValue===true?"":attrValue)})};vjs.getElementAttributes=function(tag){var obj,knownBooleans,attrs,attrName,attrVal;obj={};knownBooleans=","+"autoplay,controls,loop,muted,default"+",";if(tag&&tag.attributes&&tag.attributes.length>0){attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){attrName=attrs[i].name;attrVal=attrs[i].value
;if(typeof tag[attrName]==="boolean"||knownBooleans.indexOf(","+attrName+",")!==-1)attrVal=attrVal!==null?true:false;obj[attrName]=attrVal}}return obj};vjs.getComputedDimension=function(el,strCssRule){var strValue="";if(document.defaultView&&document.defaultView.getComputedStyle)strValue=document.defaultView.getComputedStyle(el,"").getPropertyValue(strCssRule);else if(el.currentStyle)strValue=el["client"+strCssRule.substr(0,1).toUpperCase()+strCssRule.substr(1)]+"px";return strValue}
;vjs.insertFirst=function(child,parent){if(parent.firstChild)parent.insertBefore(child,parent.firstChild);else parent.appendChild(child)};vjs.browser={};vjs.el=function(id){if(id.indexOf("#")===0)id=id.slice(1);return document.getElementById(id)};vjs.formatTime=function(seconds,guide){guide=guide||seconds;var s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600);if(isNaN(seconds)||seconds===Infinity)h=m=s="-"
;h=h>0||gh>0?h+":":"";m=((h||gm>=10)&&m<10?"0"+m:m)+":";s=s<10?"0"+s:s;return h+m+s};vjs.blockTextSelection=function(){document.body.focus();document.onselectstart=function(){return false}};vjs.unblockTextSelection=function(){document.onselectstart=function(){return true}};vjs.trim=function(str){return(str+"").replace(/^\s+|\s+$/g,"")};vjs.round=function(num,dec){if(!dec)dec=0;return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec)};vjs.createTimeRange=function(start,end){return{length:1,
start:function(){return start},end:function(){return end}}};vjs.get=function(url,onSuccess,onError,withCredentials){if(typeof window.Mb.helpers.parseUrl!="undefined")url=window.Mb.helpers.parseUrl(url,{},Mb.syncad.mainPlayerId);var fileUrl,request,urlInfo,winLoc,crossOrigin;onError=onError||function(){};if(typeof XMLHttpRequest==="undefined")window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{
return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(f){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(g){}throw new Error("This browser does not support XMLHttpRequest.")};request=new XMLHttpRequest;urlInfo=vjs.parseUrl(url);winLoc=window.location;crossOrigin=urlInfo.protocol+urlInfo.host!==winLoc.protocol+winLoc.host;if(crossOrigin&&window.XDomainRequest&&!("withCredentials"in request)){request=new window.XDomainRequest;request.onload=function(){
onSuccess(request.responseText)};request.onerror=onError;request.onprogress=function(){};request.ontimeout=onError}else{fileUrl=urlInfo.protocol=="file:"||winLoc.protocol=="file:";request.onreadystatechange=function(){if(request.readyState===4)if(request.status===200||fileUrl&&request.status===0)onSuccess(request.responseText);else onError(request.responseText)}}try{request.open("GET",url,true);if(withCredentials)request.withCredentials=true}catch(e){onError(e);return}try{request.send()
}catch(e){onError(e)}};vjs.setLocalStorage=function(key,value){try{var localStorage=window.localStorage||false;if(!localStorage)return;localStorage[key]=value}catch(e){if(e.code==22||e.code==1014)vjs.log("LocalStorage Full (VideoJS)",e);else if(e.code==18)vjs.log("LocalStorage not allowed (VideoJS)",e);else vjs.log("LocalStorage Error (VideoJS)",e)}};vjs.getAbsoluteURL=function(url){if(!url.match(/^https?:\/\//))url=vjs.createEl("div",{innerHTML:'<a href="'+url+'">x</a>'}).firstChild.href
;return url};vjs.parseUrl=function(url){var div,a,addToBody,props,details;props=["protocol","hostname","port","pathname","search","hash","host"];a=vjs.createEl("a",{href:url});addToBody=a.host===""&&a.protocol!=="file:";if(addToBody){div=vjs.createEl("div");div.innerHTML='<a href="'+url+'"></a>';a=div.firstChild;div.setAttribute("style","display:none; position:absolute;");document.body.appendChild(div)}details={};for(var i=0;i<props.length;i++)details[props[i]]=a[props[i]]
;if(addToBody)document.body.removeChild(div);return details};function _logType(type,args){var argsArray,noop,console;argsArray=Array.prototype.slice.call(args);noop=function(){};console=window["console"]||{log:noop,warn:noop,error:noop};if(type)argsArray.unshift(type.toUpperCase()+":");else type="log";vjs.log.history.push(argsArray);argsArray.unshift("VIDEOJS:");if(console[type].apply)console[type].apply(console,argsArray);else console[type](argsArray.join(" "))}vjs.log=function(){
_logType(null,arguments)};vjs.log.history=[];vjs.log.error=function(){_logType("error",arguments)};vjs.log.warn=function(){_logType("warn",arguments)};vjs.findPosition=function(el){var box,docEl,body,clientLeft,scrollLeft,left,clientTop,scrollTop,top;if(el.getBoundingClientRect&&el.parentNode)box=el.getBoundingClientRect();if(!box)return{left:0,top:0};docEl=document.documentElement;body=document.body;clientLeft=docEl.clientLeft||body.clientLeft||0;scrollLeft=window.pageXOffset||body.scrollLeft
;left=box.left+scrollLeft-clientLeft;clientTop=docEl.clientTop||body.clientTop||0;scrollTop=window.pageYOffset||body.scrollTop;top=box.top+scrollTop-clientTop;return{left:vjs.round(left),top:vjs.round(top)}};vjs.arr={};vjs.arr.forEach=function(array,callback,thisArg){if(vjs.obj.isArray(array)&&callback instanceof Function)for(var i=0,len=array.length;i<len;++i)callback.call(thisArg||vjs,array[i],i,array);return array};vjs.util={};vjs.util.mergeOptions=function(obj1,obj2){var key,val1,val2
;obj1=vjs.obj.copy(obj1);for(key in obj2)if(obj2.hasOwnProperty(key)){val1=obj1[key];val2=obj2[key];if(vjs.obj.isPlain(val1)&&vjs.obj.isPlain(val2))obj1[key]=vjs.util.mergeOptions(val1,val2);else obj1[key]=obj2[key]}return obj1};vjs.Component=vjs.CoreObject.extend({init:function(player,options,ready){this.player_=player;this.options_=vjs.obj.copy(this.options_);options=this.options(options)
;this.id_=options["id"]||(options["el"]&&options["el"]["id"]?options["el"]["id"]:player.id()+"_component_"+vjs.guid++);this.name_=options["name"]||null;this.el_=options["el"]||this.createEl();this.children_=[];this.childIndex_={};this.childNameIndex_={};this.initChildren();this.ready(ready);if(options.reportTouchActivity!==false)this.enableTouchActivity()}});vjs.Component.prototype.dispose=function(){this.trigger({type:"dispose",bubbles:false})
;if(this.children_)for(var i=this.children_.length-1;i>=0;i--)if(this.children_[i].dispose)this.children_[i].dispose();this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.off();if(this.el_.parentNode)this.el_.parentNode.removeChild(this.el_);vjs.removeData(this.el_);this.el_=null};vjs.Component.prototype.player_=true;vjs.Component.prototype.player=function(){return this.player_};vjs.Component.prototype.options_;vjs.Component.prototype.options=function(obj){
if(obj===undefined)return this.options_;return this.options_=vjs.util.mergeOptions(this.options_,obj)};vjs.Component.prototype.el_;vjs.Component.prototype.createEl=function(tagName,attributes){return vjs.createEl(tagName,attributes)};vjs.Component.prototype.localize=function(string){var lang=this.player_.language(),languages=this.player_.languages();if(languages&&languages[lang]&&languages[lang][string])return languages[lang][string];return string};vjs.Component.prototype.el=function(){
return this.el_};vjs.Component.prototype.contentEl_;vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_};vjs.Component.prototype.id_;vjs.Component.prototype.id=function(){return this.id_};vjs.Component.prototype.name_;vjs.Component.prototype.name=function(){return this.name_};vjs.Component.prototype.children_;vjs.Component.prototype.children=function(){return this.children_};vjs.Component.prototype.childIndex_;vjs.Component.prototype.getChildById=function(id){
return this.childIndex_[id]};vjs.Component.prototype.childNameIndex_;vjs.Component.prototype.getChild=function(name){return this.childNameIndex_[name]};vjs.Component.prototype.addChild=function(child,options){var component,componentClass,componentName,componentId;if(typeof child==="string"){componentName=child;options=options||{};componentClass=options["componentClass"]||vjs.capitalize(componentName);options["name"]=componentName
;component=new window["Mb.videojs"][componentClass](this.player_||this,options)}else component=child;this.children_.push(component);if(typeof component.id==="function")this.childIndex_[component.id()]=component;componentName=componentName||component.name&&component.name();if(componentName)this.childNameIndex_[componentName]=component;if(typeof component["el"]==="function"&&component["el"]())this.contentEl().appendChild(component["el"]());return component}
;vjs.Component.prototype.removeChild=function(component){if(typeof component==="string")component=this.getChild(component);if(!component||!this.children_)return;var childFound=false;for(var i=this.children_.length-1;i>=0;i--)if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break}if(!childFound)return;this.childIndex_[component.id]=null;this.childNameIndex_[component.name]=null;var compEl=component.el()
;if(compEl&&compEl.parentNode===this.contentEl())this.contentEl().removeChild(component.el())};vjs.Component.prototype.initChildren=function(){var parent,children,child,name,opts;parent=this;children=this.options()["children"];if(children)if(vjs.obj.isArray(children))for(var i=0;i<children.length;i++){child=children[i];if(typeof child=="string"){name=child;opts={}}else{name=child.name;opts=child}parent[name]=parent.addChild(name,opts)}else vjs.obj.each(children,function(name,opts){
if(opts===false)return;parent[name]=parent.addChild(name,opts)})};vjs.Component.prototype.buildCSSClass=function(){return""};vjs.Component.prototype.on=function(type,fn){vjs.on(this.el_,type,vjs.bind(this,fn));return this};vjs.Component.prototype.off=function(type,fn){vjs.off(this.el_,type,fn);return this};vjs.Component.prototype.one=function(type,fn){vjs.one(this.el_,type,vjs.bind(this,fn));return this};vjs.Component.prototype.trigger=function(event){vjs.trigger(this.el_,event);return this}
;vjs.Component.prototype.isReady_;vjs.Component.prototype.isReadyOnInitFinish_=true;vjs.Component.prototype.readyQueue_;vjs.Component.prototype.ready=function(fn){if(fn)if(this.isReady_)fn.call(this);else{if(this.readyQueue_===undefined)this.readyQueue_=[];this.readyQueue_.push(fn)}return this};vjs.Component.prototype.triggerReady=function(){this.isReady_=true;var readyQueue=this.readyQueue_;if(readyQueue&&readyQueue.length>0){for(var i=0,j=readyQueue.length;i<j;i++)readyQueue[i].call(this)
;this.readyQueue_=[];this.trigger("ready")}};vjs.Component.prototype.addClass=function(classToAdd){vjs.addClass(this.el_,classToAdd);return this};vjs.Component.prototype.removeClass=function(classToRemove){vjs.removeClass(this.el_,classToRemove);return this};vjs.Component.prototype.show=function(){this.el_.style.display="block";return this};vjs.Component.prototype.hide=function(){this.el_.style.display="none";return this};vjs.Component.prototype.unHide=function(){this.el_.style.display=""
;return this};vjs.Component.prototype.lockShowing=function(){this.addClass("vjs-lock-showing");return this};vjs.Component.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing");return this};vjs.Component.prototype.disable=function(){this.hide();this.show=function(){}};vjs.Component.prototype.width=function(num,skipListeners){return this.dimension("width",num,skipListeners)};vjs.Component.prototype.height=function(num,skipListeners){
return this.dimension("height",num,skipListeners)};vjs.Component.prototype.dimensions=function(width,height){return this.width(width,true).height(height)};vjs.Component.prototype.dimension=function(widthOrHeight,num,skipListeners){if(num!==undefined){if(num===null||vjs.isNaN(num))num=0;if((""+num).indexOf("%")!==-1||(""+num).indexOf("px")!==-1)this.el_.style[widthOrHeight]=num;else if(num==="auto")this.el_.style[widthOrHeight]="";else this.el_.style[widthOrHeight]=num+"px"
;if(!skipListeners)this.trigger("resize");return this}if(!this.el_)return 0;var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf("px");if(pxIndex!==-1)return parseInt(val.slice(0,pxIndex),10);else return parseInt(this.el_["offset"+vjs.capitalize(widthOrHeight)],10)};vjs.Component.prototype.onResize;vjs.Component.prototype.emitTapEvents=function(){var touchStart,firstTouch,touchTime,couldBeTap,noTap,xdiff,ydiff,touchDistance,tapMovementThreshold;touchStart=0;firstTouch=null
;tapMovementThreshold=22;this.on("touchstart",function(event){if(event.touches.length===1){firstTouch=event.touches[0];touchStart=(new Date).getTime();couldBeTap=true}});this.on("touchmove",function(event){if(event.touches.length>1)couldBeTap=false;else if(firstTouch){xdiff=event.touches[0].pageX-firstTouch.pageX;ydiff=event.touches[0].pageY-firstTouch.pageY;touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold)couldBeTap=false}});noTap=function(){
couldBeTap=false};this.on("touchleave",noTap);this.on("touchcancel",noTap);this.on("touchend",function(event){firstTouch=null;if(couldBeTap===true){touchTime=(new Date).getTime()-touchStart;if(touchTime<250){event.preventDefault();this.trigger("tap")}}})};vjs.Component.prototype.enableTouchActivity=function(){var report,touchHolding,touchEnd;report=vjs.bind(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){report();clearInterval(touchHolding)
;touchHolding=setInterval(report,250)});touchEnd=function(event){report();clearInterval(touchHolding)};this.on("touchmove",report);this.on("touchend",touchEnd);this.on("touchcancel",touchEnd)};vjs.Button=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);this.emitTapEvents();this.on("tap",this.onClick);this.on("click",this.onClick);this.on("focus",this.onFocus);this.on("blur",this.onBlur)}});vjs.Button.prototype.createEl=function(type,props){var el
;props=vjs.obj.merge({className:this.buildCSSClass(),role:"button","aria-live":"polite",tabIndex:0},props);el=vjs.Component.prototype.createEl.call(this,type,props);if(!props.innerHTML){this.contentEl_=vjs.createEl("div",{className:"vjs-control-content"});this.controlText_=vjs.createEl("span",{className:"vjs-control-text",innerHTML:this.localize(this.buttonText)||"Need Text"});this.contentEl_.appendChild(this.controlText_);el.appendChild(this.contentEl_)}return el}
;vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)};vjs.Button.prototype.onClick=function(){};vjs.Button.prototype.onFocus=function(){vjs.on(document,"keydown",vjs.bind(this,this.onKeyPress))};vjs.Button.prototype.onKeyPress=function(event){if(event.which==32||event.which==13){event.preventDefault();this.onClick()}};vjs.Button.prototype.onBlur=function(){vjs.off(document,"keydown",vjs.bind(this,this.onKeyPress))}
;vjs.Slider=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);this.bar=this.getChild(this.options_["barName"]);this.handle=this.getChild(this.options_["handleName"]);this.on("mousedown",this.onMouseDown);this.on("touchstart",this.onMouseDown);this.on("focus",this.onFocus);this.on("blur",this.onBlur);this.on("click",this.onClick);this.player_.on("controlsvisible",vjs.bind(this,this.update));player.on(this.playerEvent,vjs.bind(this,this.update))
;this.boundEvents={};this.boundEvents.move=vjs.bind(this,this.onMouseMove);this.boundEvents.end=vjs.bind(this,this.onMouseUp)}});vjs.Slider.prototype.createEl=function(type,props){props=props||{};props.className=props.className+" vjs-slider";props=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},props);return vjs.Component.prototype.createEl.call(this,type,props)};vjs.Slider.prototype.onMouseDown=function(event){event.preventDefault()
;vjs.blockTextSelection();this.addClass("vjs-sliding");vjs.on(document,"mousemove",this.boundEvents.move);vjs.on(document,"mouseup",this.boundEvents.end);vjs.on(document,"touchmove",this.boundEvents.move);vjs.on(document,"touchend",this.boundEvents.end);this.onMouseMove(event)};vjs.Slider.prototype.onMouseMove=function(){};vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection();this.removeClass("vjs-sliding");vjs.off(document,"mousemove",this.boundEvents.move,false)
;vjs.off(document,"mouseup",this.boundEvents.end,false);vjs.off(document,"touchmove",this.boundEvents.move,false);vjs.off(document,"touchend",this.boundEvents.end,false);this.update()};vjs.Slider.prototype.update=function(){if(!this.el_)return;var barProgress,progress=this.getPercent(),handle=this.handle,bar=this.bar;if(isNaN(progress))progress=0;barProgress=progress;if(handle){
var box=this.el_,boxWidth=box.offsetWidth,handleWidth=handle.el().offsetWidth,handlePercent=handleWidth?handleWidth/boxWidth:0,boxAdjustedPercent=1-handlePercent,adjustedProgress=progress*boxAdjustedPercent;barProgress=adjustedProgress+handlePercent/2;handle.el().style.left=vjs.round(adjustedProgress*100,2)+"%"}if(bar)bar.el().style.width=vjs.round(barProgress*100,2)+"%"};vjs.Slider.prototype.calculateDistance=function(event){var el,box,boxX,boxY,boxW,boxH,handle,pageX,pageY;el=this.el_
;box=vjs.findPosition(el);boxW=boxH=el.offsetWidth;handle=this.handle;if(this.options()["vertical"]){boxY=box.top;if(event.changedTouches)pageY=event.changedTouches[0].pageY;else pageY=event.pageY;if(handle){var handleH=handle.el().offsetHeight;boxY=boxY+handleH/2;boxH=boxH-handleH}return Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH))}else{boxX=box.left;if(event.changedTouches)pageX=event.changedTouches[0].pageX;else pageX=event.pageX;if(handle){var handleW=handle.el().offsetWidth
;boxX=boxX+handleW/2;boxW=boxW-handleW}return Math.max(0,Math.min(1,(pageX-boxX)/boxW))}};vjs.Slider.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Slider.prototype.onKeyPress=function(event){if(event.which==37||event.which==40){event.preventDefault();this.stepBack()}else if(event.which==38||event.which==39){event.preventDefault();this.stepForward()}};vjs.Slider.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))}
;vjs.Slider.prototype.onClick=function(event){event.stopImmediatePropagation();event.preventDefault()};vjs.SliderHandle=vjs.Component.extend();vjs.SliderHandle.prototype.defaultValue=0;vjs.SliderHandle.prototype.createEl=function(type,props){props=props||{};props.className=props.className+" vjs-slider-handle";props=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},props);return vjs.Component.prototype.createEl.call(this,"div",props)}
;vjs.Menu=vjs.Component.extend();vjs.Menu.prototype.addItem=function(component){this.addChild(component);component.on("click",vjs.bind(this,function(){this.unlockShowing()}))};vjs.Menu.prototype.createEl=function(){var contentElType=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(contentElType,{className:"vjs-menu-content"});var el=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});el.appendChild(this.contentEl_)
;vjs.on(el,"click",function(event){event.preventDefault();event.stopImmediatePropagation()});return el};vjs.MenuItem=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);this.selected(options["selected"])}});vjs.MenuItem.prototype.createEl=function(type,props){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.options_["label"]},props))};vjs.MenuItem.prototype.onClick=function(){this.selected(true)}
;vjs.MenuItem.prototype.selected=function(selected){if(selected){this.addClass("vjs-selected");this.el_.setAttribute("aria-selected",true)}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-selected",false)}};vjs.MenuButton=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);this.menu=this.createMenu();this.addChild(this.menu);if(this.items&&this.items.length===0)this.hide();this.on("keyup",this.onKeyPress)
;this.el_.setAttribute("aria-haspopup",true);this.el_.setAttribute("role","button")}});vjs.MenuButton.prototype.buttonPressed_=false;vjs.MenuButton.prototype.createMenu=function(){var menu=new vjs.Menu(this.player_);if(this.options().title)menu.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.options().title),tabindex:-1}));this.items=this["createItems"]();if(this.items)for(var i=0;i<this.items.length;i++)menu.addItem(this.items[i]);return menu}
;vjs.MenuButton.prototype.createItems=function(){};vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.MenuButton.prototype.onFocus=function(){};vjs.MenuButton.prototype.onBlur=function(){};vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing();this.el_.blur()}));if(this.buttonPressed_)this.unpressButton();else this.pressButton()}
;vjs.MenuButton.prototype.onKeyPress=function(event){event.preventDefault();if(event.which==32||event.which==13)if(this.buttonPressed_)this.unpressButton();else this.pressButton();else if(event.which==27)if(this.buttonPressed_)this.unpressButton()};vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=true;this.menu.lockShowing();this.el_.setAttribute("aria-pressed",true);if(this.items&&this.items.length>0)this.items[0].el().focus()}
;vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-pressed",false)};vjs.MediaError=function(code){if(typeof code==="number")this.code=code;else if(typeof code==="string")this.message=code;else if(typeof code==="object")vjs.obj.merge(this,code);if(!this.message)this.message=vjs.MediaError.defaultMessages[this.code]||""};vjs.MediaError.prototype.code=0;vjs.MediaError.prototype.message=""
;vjs.MediaError.prototype.status=null;vjs.MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];vjs.MediaError.defaultMessages={1:"You aborted the video playback",2:"A network error caused the video download to fail part-way.",3:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",
4:"The video could not be loaded, either because the server or network failed or because the format is not supported.",5:"The video is encrypted and we do not have the keys to decrypt it."};for(var errNum=0;errNum<vjs.MediaError.errorTypes.length;errNum++){vjs.MediaError[vjs.MediaError.errorTypes[errNum]]=errNum;vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]]=errNum}(function(){var apiMap,specApi,browserApi,i;vjs.browser.fullscreenAPI
;apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]]
;specApi=apiMap[0];for(i=0;i<apiMap.length;i++)if(apiMap[i][1]in document){browserApi=apiMap[i];break}if(browserApi){vjs.browser.fullscreenAPI={};for(i=0;i<browserApi.length;i++)vjs.browser.fullscreenAPI[specApi[i]]=browserApi[i]}})();vjs.Player=vjs.Component.extend({init:function(tag,options,ready){this.tag=tag;this.adsLoaded=false;this.videoPlayTracked=false;this.videoStarted=false;this.mbVideoSrc="";tag.id=tag.id||"vjs_video_"+vjs.guid++;this.tagAttributes=tag&&vjs.getElementAttributes(tag)
;options=vjs.obj.merge(this.getTagSettings(tag),options);this.language_=options["language"]||vjs.options["language"];this.languages_=options["languages"]||vjs.options["languages"];this.cache_={};this.poster_=options["poster"];this.controls_=options["controls"];tag.controls=false;options.reportTouchActivity=false;vjs.Component.call(this,this,options,ready);this.mbVideoSrc=this.src();if(Mb.adsEnabled)this.src("//player.mediabong.com/static/videojs/black.mp4")
;if(this.controls())this.addClass("vjs-controls-enabled");else this.addClass("vjs-controls-disabled");vjs.players[this.id_]=this;if(options["plugins"])vjs.obj.each(options["plugins"],function(key,val){this[key](val)},this);this.listenForUserActivity()}});vjs.Player.prototype.language_;vjs.Player.prototype.language=function(languageCode){if(languageCode===undefined)return this.language_;this.language_=languageCode;return this};vjs.Player.prototype.languages_
;vjs.Player.prototype.languages=function(){return this.languages_};vjs.Player.prototype.options_=vjs.options;vjs.Player.prototype.dispose=function(){this.trigger("dispose");this.off("dispose");vjs.players[this.id_]=null;if(this.tag&&this.tag["player"])this.tag["player"]=null;if(this.el_&&this.el_["player"])this.el_["player"]=null;if(this.tech)this.tech.dispose();vjs.Component.prototype.dispose.call(this)};vjs.Player.prototype.getTagSettings=function(tag){var options={sources:[],tracks:[]}
;vjs.obj.merge(options,vjs.getElementAttributes(tag));if(tag.hasChildNodes()){var children,child,childName,i,j;children=tag.childNodes;for(i=0,j=children.length;i<j;i++){child=children[i];childName=child.nodeName.toLowerCase();if(childName==="source")options["sources"].push(vjs.getElementAttributes(child));else if(childName==="track")options["tracks"].push(vjs.getElementAttributes(child))}}return options};vjs.Player.prototype.createEl=function(){
var el=this.el_=vjs.Component.prototype.createEl.call(this,"div"),tag=this.tag,attrs;tag.removeAttribute("width");tag.removeAttribute("height");if(tag.hasChildNodes()){var nodes,nodesLength,i,node,nodeName,removeNodes;nodes=tag.childNodes;nodesLength=nodes.length;removeNodes=[];while(nodesLength--){node=nodes[nodesLength];nodeName=node.nodeName.toLowerCase();if(nodeName==="track")removeNodes.push(node)}for(i=0;i<removeNodes.length;i++)tag.removeChild(removeNodes[i])}
attrs=vjs.getElementAttributes(tag);vjs.obj.each(attrs,function(attr){el.setAttribute(attr,attrs[attr])});tag.id+="_html5_api";tag.className="vjs-tech";tag["player"]=el["player"]=this;this.addClass("vjs-paused");this.width(this.options_["width"],true);this.height(this.options_["height"],true);if(tag.parentNode)tag.parentNode.insertBefore(el,tag);vjs.insertFirst(tag,el);this.el_=el;this.on("loadstart",this.onLoadStart);this.on("waiting",this.onWaiting)
;this.on(["canplay","canplaythrough","playing","ended"],this.onWaitEnd);this.on("seeking",this.onSeeking);this.on("seeked",this.onSeeked);this.on("ended",this.onEnded);this.on("play",this.onPlay);this.on("firstplay",this.onFirstPlay);this.on("pause",this.onPause);this.on("progress",this.onProgress);this.on("durationchange",this.onDurationChange);this.on("fullscreenchange",this.onFullscreenChange);return el};vjs.Player.prototype.loadTech=function(techName,source){if(this.tech)this.unloadTech()
;if(techName!=="Html5"&&this.tag){vjs.Html5.disposeMediaElement(this.tag);this.tag=null}this.techName=techName;this.isReady_=false;var techReady=function(){this.player_.triggerReady()};var techOptions=vjs.obj.merge({source:source,parentEl:this.el_},this.options_[techName.toLowerCase()]);if(source){this.currentType_=source.type;if(source.src==this.cache_.src&&this.cache_.currentTime>0)techOptions["startTime"]=this.cache_.currentTime;this.cache_.src=source.src}
this.tech=new window["Mb.videojs"][techName](this,techOptions);this.tech.ready(techReady)};vjs.Player.prototype.unloadTech=function(){this.isReady_=false;this.tech.dispose();this.tech=false};vjs.Player.prototype.onLoadStart=function(){this.error(null);if(!this.paused())this.trigger("firstplay");else{this.hasStarted(false);this.one("play",function(){this.hasStarted(true)})}};vjs.Player.prototype.hasStarted_=false;vjs.Player.prototype.hasStarted=function(hasStarted){if(hasStarted!==undefined){
if(this.hasStarted_!==hasStarted){this.hasStarted_=hasStarted;if(hasStarted){this.addClass("vjs-has-started");this.trigger("firstplay")}else this.removeClass("vjs-has-started")}return this}return this.hasStarted_};vjs.Player.prototype.onLoadedMetaData;vjs.Player.prototype.onLoadedData;vjs.Player.prototype.onLoadedAllData;vjs.Player.prototype.onPlay=function(){this.removeClass("vjs-paused");this.addClass("vjs-playing");var player=this.player()
;if(window.mb_players[player.options().mb_video_id].doConvert){Mb.helpers.loadUrl(window.mb_players[player.options().mb_video_id].server+"/t/convert.php?bloc="+window.mb_players[player.options().mb_video_id].blocplayer_id+"&sessid="+Mb.sessid+"&sid="+window.mb_players[player.options().mb_video_id].snap_id+"&url="+encodeURIComponent(document.location.href)+"&m=1"+"&timestamp="+(new Date).getTime(),"text/javascript","script",function(){})
;window.mb_players[player.options().mb_video_id].doConvert=false}var adservers_list=null;if(typeof MB_RTB_ADSERVER!=="undefined"&&MB_RTB_ADSERVER!=null){adservers_list=MB_RTB_ADSERVER;adservers_list[0].url="data:text/xml,"+adservers_list[0].url;MB_RTB_ADSERVER=null}else adservers_list=window.mb_players[player.options().mb_video_id].jsonDoc.mobile_adservers;if(adservers_list.length==0){if(!player.videoPlayTracked&&player.mbVideoSrc!=player.src()){player.pause();player.src(player.mbVideoSrc)
;player.play()}try{if(!Mb.syncad.prerollCompletedDone)Mb.syncad.prerollCompleted(player.options().mb_video_id)}catch(e){return}}else if(!player.adsLoaded){if(!Mb.adsEnabled)return;player.pause();player.adsLoaded=true;player.adserver_reporting_url=window.mb_players[player.options().mb_video_id].jsonDoc.adserver_reporting_url;for(var evt in window.mb_players[player.options().mb_video_id].jsonDoc.ad_tracking){(function(event,player){
var url=window.mb_players[player.options().mb_video_id].jsonDoc.ad_tracking[event];event=event.charAt(0).toUpperCase()+event.slice(1);Mb.registerCallBack("ad"+event,function(){url=Mb.helpers.parseUrl(url,{ad_server_id:player.current_adserver_id},player.options().mb_video_id);Mb.helpers.loadUrl(url,"text/javascript","script",function(){})})})(evt,player)}if(!player.isIMA){if(typeof player.ads==="function")player.ads();player.vast({url:adservers_list});player.play();return}player.initIMA()
;var urlIdx=0;var loadNextMbAd=function(){if(typeof adservers_list[urlIdx]=="undefined"){player.off("contentupdate");Mb.player.callBack.adserverListEmptied(player.options().mb_video_id);player.ima.endIMA_();player.trigger("adabort");return}if(typeof adservers_list[urlIdx].name=="undefined"){var url=adservers_list[urlIdx].url,adserver_id=adservers_list[urlIdx].id,click_behavior=0
;if(typeof adservers_list[urlIdx].videoAdClickBehavior!=="undefined")click_behavior=adservers_list[urlIdx].videoAdClickBehavior;else if(typeof adservers_list[urlIdx].video_ad_click_behavior!=="undefined")click_behavior=adservers_list[urlIdx].video_ad_click_behavior;player.current_adserver_id=adserver_id;if(typeof MB_RTB_ADSERVER!=="undefined"&&MB_RTB_ADSERVER!=null)Mb.helpers.log("Try ["+adserver_id+"] : RTB adserver");else Mb.helpers.log("Try ["+adserver_id+"] : "+url);urlIdx++
;Mb.player.callBack.adserverLoading(player.options().mb_video_id);var loadAdserverCallback=function(adTagResponse){if(adTagResponse.status>=200&&adTagResponse.status<300)Mb.player.callBack.adserverCompleted(player.options().mb_video_id);else{Mb.mobile.prReportingTracking(player.options().mb_video_id,4);Mb.player.callBack.adserverFailed(player.options().mb_video_id);player.trigger("adsloaderror");return}try{Mb.adTagResponse=adTagResponse
;var responseHeaders=Mb.helpers.parseResponseHeaders(adTagResponse.getAllResponseHeaders());if(responseHeaders.hasOwnProperty("ID-DE-JEAN")){var headerResp=responseHeaders["ID-DE-JEAN"];headerResp=JSON.parse(headerResp);Mb.rtb_dealId=headerResp.d;Mb.rtb_partnerId=headerResp.p;Mb.rtb_seatId=headerResp.s;Mb.rtb_cpm=headerResp.a}else{Mb.rtb_dealId="";Mb.rtb_partnerId="";Mb.rtb_seatId="";Mb.rtb_cpm=0}if(Mb.dealId==null)Mb.dealId=""}catch(e){console.log(e);Mb.rtb_dealId=headerResp;Mb.rtb_partnerId=""
;Mb.rtb_seatId="";Mb.rtb_cpm=0}adTagResponse=adTagResponse.responseText;adTagResponse=Mb.helpers.parseUrl(adTagResponse,{vast:true,ad_server_id:adserver_id},player.options().mb_video_id);player.ima.setAdTagResponse(adTagResponse);player.ima.setAdClickBehavior(click_behavior)
;if(typeof MB_RTB_ADSERVER==="undefined"&&(url.indexOf("stickyadstv")>-1||url.indexOf("liverail")>-1||url.indexOf("spotxchange")>-1||url.indexOf("rubiconproject")>-1||url.indexOf("mediabong")>-1))player.ima.setVpaidMode("INSECURE");else player.ima.setVpaidMode("ENABLED");player.ima.requestAds()};var loadAdserverErrorCallback=function(e){Mb.helpers.log("Error loading the adserver.");Mb.mobile.prReportingTracking(player.options().mb_video_id,4)
;Mb.player.callBack.adserverFailed(player.options().mb_video_id);player.trigger("adsloaderror");return};try{url=Mb.helpers.parseUrl(url,{},player.options().mb_video_id);Mb.helpers.doXdr(url,true,true,loadAdserverCallback,loadAdserverErrorCallback)}catch(e){Mb.helpers.log(e);Mb.mobile.prReportingTracking(player.options().mb_video_id,4);Mb.player.callBack.adserverFailed(player.options().mb_video_id);player.trigger("adsloaderror");return}}else{
var poolUrls=adservers_list[urlIdx].urls,poolTimeout=adservers_list[urlIdx].timeout;var poolUrls=adservers_list[urlIdx].urls,poolTimeout=adservers_list[urlIdx].timeout;Mb.player.loadAdservers(player.options().mb_video_id,poolUrls,poolTimeout,function(){Mb.helpers.log("No ad for pool : "+adservers_list[urlIdx].name);loadNextMbAd()},function(winner){adTagResponse=winner.responseText;adserver_id=winner.adserver_id;url=winner.responseURL;click_behavior=winner.click_behavior
;player.current_adserver_id=adserver_id;adTagResponse=Mb.helpers.parseUrl(adTagResponse,{vast:true,ad_server_id:adserver_id},player.options().mb_video_id);player.ima.setAdTagResponse(adTagResponse);player.ima.setAdClickBehavior(click_behavior)
;if(typeof MB_RTB_ADSERVER==="undefined"&&(url.indexOf("stickyadstv")>-1||url.indexOf("liverail")>-1||url.indexOf("spotxchange")>-1||url.indexOf("rubiconproject")>-1||url.indexOf("mediabong")>-1))player.ima.setVpaidMode("INSECURE");else player.ima.setVpaidMode("ENABLED");player.ima.requestAds()});urlIdx++}};player.on("adsloaderror",function(){loadNextMbAd()});player.on("adserror",function(){if(player.ads.state=="preroll?"){player.ima.imaInitialized=false;player.ads.state="ads-ready?"
;player.initIMA();loadNextMbAd()}else player.ima.endIMA_()});player.on("adend",function(){try{player.ima.clearIntervals();if(!player.ima.adCompleted&&!Mb.syncad.prerollCompletedDone)Mb.syncad.prerollCompleted(player.options().mb_video_id)}catch(e){return}});loadNextMbAd();player.off("contentupdate");if(Mb.syncad.prerollCompletedDone&&(typeof window.MB_PAUSE_AFTER_AD!=="undefined"&&window.MB_PAUSE_AFTER_AD==1||Mb.enableSyncAd&&!Mb.syncrollHasAd))return;player.play();return}
if(!player.videoPlayTracked)setTimeout(function(){if(player.videoPlayTracked||player.el_==null)return;if(player.src()==player.mbVideoSrc){player.videoPlayTracked=true;var playUrl=window.mb_players[player.options().mb_video_id].jsonDoc.video_tracking.start+"&m=1";if(typeof Mb.helpers.parseUrl!="undefined")playUrl=Mb.helpers.parseUrl(playUrl,{ad_server_id:mb_players[player.options().mb_video_id].current_adserver_id,ad_impression_called:mb_players[player.options().mb_video_id].ad_impression_called
},player.options().mb_video_id);vjs.get(playUrl,function(){},function(){})}},1e3)};vjs.Player.prototype.onWaiting=function(){this.addClass("vjs-waiting")};vjs.Player.prototype.onWaitEnd=function(){this.removeClass("vjs-waiting")};vjs.Player.prototype.onSeeking=function(){this.addClass("vjs-seeking")};vjs.Player.prototype.onSeeked=function(){this.removeClass("vjs-seeking")};vjs.Player.prototype.onFirstPlay=function(){if(this.options_["starttime"])this.currentTime(this.options_["starttime"])
;this.addClass("vjs-has-started")};vjs.Player.prototype.onPause=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused")};vjs.Player.prototype.onTimeUpdate;vjs.Player.prototype.onProgress=function(){if(this.bufferedPercent()==1)this.trigger("loadedalldata")};vjs.Player.prototype.onEnded=function(){if(this.src()=="//static.mediabong.com/videojs/black.mp4")return
;if(this.src()==this.mbVideoSrc)Mb.player.callBack.videoCompleted(this.options().mb_video_id);else if(!this.isIMA&&this.src()==this.vast.sources[0].src){var that=this;window.setTimeout(function(){Mb.player.callBack.adComplete(that.options().mb_video_id);Mb.player.callBack.adCompleted(that.options().mb_video_id)},0)}if(this.options_["loop"]){this.currentTime(0);this.play()}else if(!this.paused())this.pause()};vjs.Player.prototype.onDurationChange=function(){var duration=this.techGet("duration")
;if(duration){if(duration<0)duration=Infinity;this.duration(duration);if(duration===Infinity)this.addClass("vjs-live");else this.removeClass("vjs-live")}};vjs.Player.prototype.onVolumeChange;vjs.Player.prototype.onFullscreenChange=function(){if(this.isFullscreen())this.addClass("vjs-fullscreen");else this.removeClass("vjs-fullscreen")};vjs.Player.prototype.cache_;vjs.Player.prototype.getCache=function(){return this.cache_};vjs.Player.prototype.techCall=function(method,arg){
if(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[method](arg)});else try{this.tech[method](arg)}catch(e){vjs.log(e);throw e}};vjs.Player.prototype.techGet=function(method){if(this.tech&&this.tech.isReady_)try{return this.tech[method]()}catch(e){if(this.tech[method]===undefined)vjs.log("Video.js: "+method+" method not defined for "+this.techName+" playback technology.",e);else if(e.name=="TypeError"){
vjs.log("Video.js: "+method+" unavailable on "+this.techName+" playback technology element.",e);this.tech.isReady_=false}else vjs.log(e);throw e}return};vjs.Player.prototype.playVideo=function(){this.techCall("play");return this};vjs.Player.prototype.play=function(){this.techCall("play");return this};vjs.Player.prototype.pause=function(){this.techCall("pause");return this};vjs.Player.prototype.pauseVideo=function(){this.techCall("pause");return this};vjs.Player.prototype.paused=function(){
return this.techGet("paused")===false?false:true};vjs.Player.prototype.stop=function(){if(typeof this.isIMA!=="undefined"){if(this.isIMA&&typeof this.ima!=="undefined"&&typeof this.ima.stopIMA_!=="undefined"){this.ima.clearIntervals();this.ima.stopIMA_()}else if(!this.isIMA&&Mb.mobile.canvas.mbplayer.el()!=null)Mb.mobile.canvas.end()}if(this.el_!=null)this.dispose();return this};vjs.Player.prototype.currentTime=function(seconds){if(seconds!==undefined){this.techCall("setCurrentTime",seconds)
;return this}return this.cache_.currentTime=this.techGet("currentTime")||0};vjs.Player.prototype.duration=function(seconds){if(seconds!==undefined){this.cache_.duration=parseFloat(seconds);return this}if(this.cache_.duration===undefined)this.onDurationChange();return this.cache_.duration||0};vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()};vjs.Player.prototype.buffered=function(){var buffered=this.techGet("buffered")
;if(!buffered||!buffered.length)buffered=vjs.createTimeRange(0,0);return buffered};vjs.Player.prototype.bufferedPercent=function(){var duration=this.duration(),buffered=this.buffered(),bufferedDuration=0,start,end;if(!duration)return 0;for(var i=0;i<buffered.length;i++){start=buffered.start(i);end=buffered.end(i);if(end>duration)end=duration;bufferedDuration+=end-start}return bufferedDuration/duration};vjs.Player.prototype.bufferedEnd=function(){
var buffered=this.buffered(),duration=this.duration(),end=buffered.end(buffered.length-1);if(end>duration)end=duration;return end};vjs.Player.prototype.volume=function(percentAsDecimal){var vol;if(percentAsDecimal!==undefined){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall("setVolume",vol)
;if(this.isIMA&&typeof this.ima!=="undefined"&&typeof this.ima.changeVolume!=="undefined")this.ima.changeVolume(vol);else if(typeof this.isIMA!=="undefined"&&!this.isIMA)Mb.mobile.canvas.volume(vol);vjs.setLocalStorage("volume",vol);return this}vol=parseFloat(this.techGet("volume"));return isNaN(vol)?1:vol};vjs.Player.prototype.muted=function(muted){if(muted!==undefined){this.techCall("setMuted",muted);return this}return this.techGet("muted")||false}
;vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||false};vjs.Player.prototype.isFullscreen_=false;vjs.Player.prototype.isFullscreen=function(isFS){if(isFS!==undefined){this.isFullscreen_=!!isFS;return this}return this.isFullscreen_};vjs.Player.prototype.isFullScreen=function(isFS){vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');return this.isFullscreen(isFS)}
;vjs.Player.prototype.requestFullscreen=function(){var fsApi=vjs.browser.fullscreenAPI;this.isFullscreen(true);if(fsApi){vjs.on(document,fsApi["fullscreenchange"],vjs.bind(this,function(e){this.isFullscreen(document[fsApi.fullscreenElement]);if(this.isFullscreen()===false)vjs.off(document,fsApi["fullscreenchange"],arguments.callee);this.trigger("fullscreenchange")}));this.el_[fsApi.requestFullscreen]()}else if(this.tech.supportsFullScreen())this.techCall("enterFullScreen");else{
this.enterFullWindow();this.trigger("fullscreenchange")}return this};vjs.Player.prototype.requestFullScreen=function(){vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")');return this.requestFullscreen()};vjs.Player.prototype.exitFullscreen=function(){var fsApi=vjs.browser.fullscreenAPI;this.isFullscreen(false);if(fsApi)document[fsApi.exitFullscreen]();else if(this.tech.supportsFullScreen())this.techCall("exitFullScreen");else{
this.exitFullWindow();this.trigger("fullscreenchange")}return this};vjs.Player.prototype.cancelFullScreen=function(){vjs.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()");return this.exitFullscreen()};vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=true;this.docOrigOverflow=document.documentElement.style.overflow;vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey));document.documentElement.style.overflow="hidden"
;vjs.addClass(document.body,"vjs-full-window");this.trigger("enterFullWindow")};vjs.Player.prototype.fullWindowOnEscKey=function(event){if(event.keyCode===27)if(this.isFullscreen()===true)this.exitFullscreen();else this.exitFullWindow()};vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=false;vjs.off(document,"keydown",this.fullWindowOnEscKey);document.documentElement.style.overflow=this.docOrigOverflow;vjs.removeClass(document.body,"vjs-full-window")
;this.trigger("exitFullWindow")};vjs.Player.prototype.selectSource=function(sources){for(var i=0,j=this.options_["techOrder"];i<j.length;i++){var techName=vjs.capitalize(j[i]),tech=window["Mb.videojs"][techName];if(!tech){vjs.log.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');continue}if(tech.isSupported())for(var a=0,b=sources;a<b.length;a++){var source=b[a];if(tech["canPlaySource"](source))return{source:source,tech:techName}}}return false}
;vjs.Player.prototype.src=function(source){if(source===undefined)return this.techGet("src");if(vjs.obj.isArray(source))this.sourceList_(source);else if(typeof source==="string")this.src({src:source});else if(source instanceof Object)if(source.type&&!window["Mb.videojs"][this.techName]["canPlaySource"](source))this.sourceList_([source]);else{this.cache_.src=source.src;this.currentType_=source.type||"";this.ready(function(){this.techCall("src",source.src)
;if(this.options_["preload"]=="auto")this.load();if(this.options_["autoplay"])this.play()})}return this};vjs.Player.prototype.sourceList_=function(sources){var sourceTech=this.selectSource(sources),errorTimeout;if(sourceTech)if(sourceTech.tech===this.techName)this.src(sourceTech.source);else this.loadTech(sourceTech.tech,sourceTech.source);else{errorTimeout=setTimeout(vjs.bind(this,function(){this.error({code:4,message:this.localize(this.options()["notSupportedMessage"])})}),0)
;this.triggerReady();this.on("dispose",function(){clearTimeout(errorTimeout)})}};vjs.Player.prototype.load=function(){this.techCall("load");return this};vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""};vjs.Player.prototype.currentType=function(){return this.currentType_||""};vjs.Player.prototype.preload=function(value){if(value!==undefined){this.techCall("setPreload",value);this.options_["preload"]=value;return this}return this.techGet("preload")
};vjs.Player.prototype.autoplay=function(value){if(value!==undefined){this.techCall("setAutoplay",value);this.options_["autoplay"]=value;return this}return this.techGet("autoplay",value)};vjs.Player.prototype.loop=function(value){if(value!==undefined){this.techCall("setLoop",value);this.options_["loop"]=value;return this}return this.techGet("loop")};vjs.Player.prototype.poster_;vjs.Player.prototype.poster=function(src){if(src===undefined)return this.poster_;this.poster_=src
;this.techCall("setPoster",src);this.trigger("posterchange")};vjs.Player.prototype.controls_;vjs.Player.prototype.controls=function(bool){if(bool!==undefined){bool=!!bool;if(this.controls_!==bool){this.controls_=bool;if(bool){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled")}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled")}}return this}return this.controls_}
;vjs.Player.prototype.usingNativeControls_;vjs.Player.prototype.usingNativeControls=function(bool){if(bool!==undefined){bool=!!bool;if(this.usingNativeControls_!==bool){this.usingNativeControls_=bool;if(bool){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}}return this}return this.usingNativeControls_};vjs.Player.prototype.error_=null;vjs.Player.prototype.error=function(err){
if(err===undefined)return this.error_;if(err===null){this.error_=err;this.removeClass("vjs-error");return this}if(err instanceof vjs.MediaError)this.error_=err;else this.error_=new vjs.MediaError(err);this.trigger("error");this.addClass("vjs-error");vjs.log.error("(CODE:"+this.error_.code+" "+vjs.MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_);return this};vjs.Player.prototype.ended=function(){return this.techGet("ended")};vjs.Player.prototype.seeking=function(){
return this.techGet("seeking")};vjs.Player.prototype.userActivity_=true;vjs.Player.prototype.reportUserActivity=function(event){this.userActivity_=true};vjs.Player.prototype.userActive_=true;vjs.Player.prototype.userActive=function(bool){if(bool!==undefined){bool=!!bool;if(bool!==this.userActive_){this.userActive_=bool;if(bool){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive")}else{this.userActivity_=false
;if(this.tech)this.tech.one("mousemove",function(e){e.stopPropagation();e.preventDefault()});this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}}return this}return this.userActive_};vjs.Player.prototype.listenForUserActivity=function(){var onActivity,onMouseMove,onMouseDown,mouseInProgress,onMouseUp,activityCheck,inactivityTimeout,lastMoveX,lastMoveY;onActivity=vjs.bind(this,this.reportUserActivity);onMouseMove=function(e){
if(e.screenX!=lastMoveX||e.screenY!=lastMoveY){lastMoveX=e.screenX;lastMoveY=e.screenY;onActivity()}};onMouseDown=function(){onActivity();clearInterval(mouseInProgress);mouseInProgress=setInterval(onActivity,250)};onMouseUp=function(event){onActivity();clearInterval(mouseInProgress)};this.on("mousedown",onMouseDown);this.on("mousemove",onMouseMove);this.on("mouseup",onMouseUp);this.on("keydown",onActivity);this.on("keyup",onActivity);activityCheck=setInterval(vjs.bind(this,function(){
if(this.userActivity_){this.userActivity_=false;this.userActive(true);clearTimeout(inactivityTimeout);var timeout=this.options()["inactivityTimeout"];if(timeout>0)inactivityTimeout=setTimeout(vjs.bind(this,function(){if(!this.userActivity_)this.userActive(false)}),timeout)}}),250);this.on("dispose",function(){clearInterval(activityCheck);clearTimeout(inactivityTimeout)})};vjs.Player.prototype.playbackRate=function(rate){if(rate!==undefined){this.techCall("setPlaybackRate",rate);return this}
if(this.tech&&this.tech["featuresPlaybackRate"])return this.techGet("playbackRate");else return 1};vjs.ControlBar=vjs.Component.extend();vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},liveDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{},playbackRateMenuButton:{}}};vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{
className:"vjs-control-bar"})};vjs.LiveDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.LiveDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-live-controls vjs-control"});this.contentEl_=vjs.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE"),"aria-live":"off"})
;el.appendChild(this.contentEl_);return el};vjs.PlayToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);player.on("play",vjs.bind(this,this.onPlay));player.on("pause",vjs.bind(this,this.onPause))}});vjs.PlayToggle.prototype.buttonText="Play";vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.PlayToggle.prototype.onClick=function(){
if(this.player_.paused())this.player_.play();else this.player_.pause()};vjs.PlayToggle.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused");vjs.addClass(this.el_,"vjs-playing");this.el_.children[0].children[0].innerHTML=this.localize("Pause")};vjs.PlayToggle.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing");vjs.addClass(this.el_,"vjs-paused");this.el_.children[0].children[0].innerHTML=this.localize("Play")};vjs.CurrentTimeDisplay=vjs.Component.extend({
init:function(player,options){vjs.Component.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.CurrentTimeDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.contentEl_=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>'+"0:00","aria-live":"off"});el.appendChild(this.contentEl_)
;return el};vjs.CurrentTimeDisplay.prototype.updateContent=function(){var time=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Current Time")+"</span> "+vjs.formatTime(time,this.player_.duration())};vjs.DurationDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateContent))}})
;vjs.DurationDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});this.contentEl_=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> "+"0:00","aria-live":"off"});el.appendChild(this.contentEl_);return el};vjs.DurationDisplay.prototype.updateContent=function(){var duration=this.player_.duration()
;if(duration)this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> "+vjs.formatTime(duration)};vjs.TimeDivider=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};vjs.RemainingTimeDisplay=vjs.Component.extend({
init:function(player,options){vjs.Component.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.RemainingTimeDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.contentEl_=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> "+"-0:00","aria-live":"off"})
;el.appendChild(this.contentEl_);return el};vjs.RemainingTimeDisplay.prototype.updateContent=function(){if(this.player_.duration())this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> "+"-"+vjs.formatTime(this.player_.remainingTime())};vjs.FullscreenToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options)}});vjs.FullscreenToggle.prototype.buttonText="Fullscreen"
;vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.FullscreenToggle.prototype.onClick=function(){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();this.controlText_.innerHTML=this.localize("Non-Fullscreen")}else{this.player_.exitFullscreen();this.controlText_.innerHTML=this.localize("Fullscreen")}};vjs.ProgressControl=vjs.Component.extend({init:function(player,options){
vjs.Component.call(this,player,options)}});vjs.ProgressControl.prototype.options_={children:{seekBar:{}}};vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};vjs.SeekBar=vjs.Slider.extend({init:function(player,options){vjs.Slider.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateARIAAttributes));player.ready(vjs.bind(this,this.updateARIAAttributes))}})
;vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"};vjs.SeekBar.prototype.playerEvent="timeupdate";vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})};vjs.SeekBar.prototype.updateARIAAttributes=function(){
var time=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(this.getPercent()*100,2));this.el_.setAttribute("aria-valuetext",vjs.formatTime(time,this.player_.duration()))};vjs.SeekBar.prototype.getPercent=function(){return this.player_.currentTime()/this.player_.duration()};vjs.SeekBar.prototype.onMouseDown=function(event){vjs.Slider.prototype.onMouseDown.call(this,event);this.player_.scrubbing=true
;this.videoWasPlaying=!this.player_.paused();this.player_.pause()};vjs.SeekBar.prototype.onMouseMove=function(event){var newTime=this.calculateDistance(event)*this.player_.duration();if(newTime==this.player_.duration())newTime=newTime-.1;this.player_.currentTime(newTime)};vjs.SeekBar.prototype.onMouseUp=function(event){vjs.Slider.prototype.onMouseUp.call(this,event);this.player_.scrubbing=false;if(this.videoWasPlaying)this.player_.play()};vjs.SeekBar.prototype.stepForward=function(){
this.player_.currentTime(this.player_.currentTime()+5)};vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};vjs.LoadProgressBar=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);player.on("progress",vjs.bind(this,this.update))}});vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",
innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})};vjs.LoadProgressBar.prototype.update=function(){var i,start,end,part,buffered=this.player_.buffered(),duration=this.player_.duration(),bufferedEnd=this.player_.bufferedEnd(),children=this.el_.children,percentify=function(time,end){var percent=time/end||0;return percent*100+"%"};this.el_.style.width=percentify(bufferedEnd,duration);for(i=0;i<buffered.length;i++){start=buffered.start(i),
end=buffered.end(i),part=children[i];if(!part)part=this.el_.appendChild(vjs.createEl());part.style.left=percentify(start,bufferedEnd);part.style.width=percentify(end-start,bufferedEnd)}for(i=children.length;i>buffered.length;i--)this.el_.removeChild(children[i-1])};vjs.PlayProgressBar=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{
className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})};vjs.SeekHandle=vjs.SliderHandle.extend({init:function(player,options){vjs.SliderHandle.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.SeekHandle.prototype.defaultValue="00:00";vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle","aria-live":"off"
})};vjs.SeekHandle.prototype.updateContent=function(){var time=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.innerHTML='<span class="vjs-control-text">'+vjs.formatTime(time,this.player_.duration())+"</span>"};vjs.VolumeControl=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);if(player.tech&&player.tech["featuresVolumeControl"]===false)this.addClass("vjs-hidden")
;player.on("loadstart",vjs.bind(this,function(){if(player.tech["featuresVolumeControl"]===false)this.addClass("vjs-hidden");else this.removeClass("vjs-hidden")}))}});vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}};vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})};vjs.VolumeBar=vjs.Slider.extend({init:function(player,options){vjs.Slider.call(this,player,options)
;player.on("volumechange",vjs.bind(this,this.updateARIAAttributes));player.ready(vjs.bind(this,this.updateARIAAttributes))}});vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(this.player_.volume()*100,2));this.el_.setAttribute("aria-valuetext",vjs.round(this.player_.volume()*100,2)+"%")};vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"}
;vjs.VolumeBar.prototype.playerEvent="volumechange";vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})};vjs.VolumeBar.prototype.onMouseMove=function(event){if(this.player_.muted())this.player_.muted(false);this.player_.volume(this.calculateDistance(event))};vjs.VolumeBar.prototype.getPercent=function(){if(this.player_.muted())return 0;else return this.player_.volume()}
;vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)};vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)};vjs.VolumeLevel=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})}
;vjs.VolumeHandle=vjs.SliderHandle.extend();vjs.VolumeHandle.prototype.defaultValue="00:00";vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})};vjs.MuteToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);player.on("volumechange",vjs.bind(this,this.update));if(player.tech&&player.tech["featuresVolumeControl"]===false)this.addClass("vjs-hidden")
;player.on("loadstart",vjs.bind(this,function(){if(player.tech["featuresVolumeControl"]===false)this.addClass("vjs-hidden");else this.removeClass("vjs-hidden")}))}});vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})};vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(this.player_.muted()?false:true)}
;vjs.MuteToggle.prototype.update=function(){var vol=this.player_.volume(),level=3;if(vol===0||this.player_.muted())level=0;else if(vol<.33)level=1;else if(vol<.67)level=2;if(this.player_.muted()){if(this.el_.children[0].children[0].innerHTML!=this.localize("Unmute"))this.el_.children[0].children[0].innerHTML=this.localize("Unmute")}else if(this.el_.children[0].children[0].innerHTML!=this.localize("Mute"))this.el_.children[0].children[0].innerHTML=this.localize("Mute")
;for(var i=0;i<4;i++)vjs.removeClass(this.el_,"vjs-vol-"+i);vjs.addClass(this.el_,"vjs-vol-"+level)};vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(player,options){vjs.MenuButton.call(this,player,options);player.on("volumechange",vjs.bind(this,this.update));if(player.tech&&player.tech["featuresVolumeControl"]===false)this.addClass("vjs-hidden");player.on("loadstart",vjs.bind(this,function(){
if(player.tech["featuresVolumeControl"]===false)this.addClass("vjs-hidden");else this.removeClass("vjs-hidden")}));this.addClass("vjs-menu-button")}});vjs.VolumeMenuButton.prototype.createMenu=function(){var menu=new vjs.Menu(this.player_,{contentElType:"div"});var vc=new vjs.VolumeBar(this.player_,vjs.obj.merge({vertical:true},this.options_.volumeBar));menu.addChild(vc);return menu};vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this)
;vjs.MenuButton.prototype.onClick.call(this)};vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})};vjs.VolumeMenuButton.prototype.update=vjs.MuteToggle.prototype.update;vjs.PlaybackRateMenuButton=vjs.MenuButton.extend({init:function(player,options){vjs.MenuButton.call(this,player,options)
;this.updateVisibility();this.updateLabel();player.on("loadstart",vjs.bind(this,this.updateVisibility));player.on("ratechange",vjs.bind(this,this.updateLabel))}});vjs.PlaybackRateMenuButton.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-playback-rate vjs-menu-button vjs-control",innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+this.localize("Playback Rate")+"</span></div>"});this.labelEl_=vjs.createEl("div",{
className:"vjs-playback-rate-value",innerHTML:1});el.appendChild(this.labelEl_);return el};vjs.PlaybackRateMenuButton.prototype.createMenu=function(){var menu=new vjs.Menu(this.player());var rates=this.player().options()["playbackRates"];if(rates)for(var i=rates.length-1;i>=0;i--)menu.addChild(new vjs.PlaybackRateMenuItem(this.player(),{rate:rates[i]+"x"}));return menu};vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes=function(){
this.el().setAttribute("aria-valuenow",this.player().playbackRate())};vjs.PlaybackRateMenuButton.prototype.onClick=function(){var currentRate=this.player().playbackRate();var rates=this.player().options()["playbackRates"];var newRate=rates[0];for(var i=0;i<rates.length;i++)if(rates[i]>currentRate){newRate=rates[i];break}this.player().playbackRate(newRate)};vjs.PlaybackRateMenuButton.prototype.playbackRateSupported=function(){
return this.player().tech&&this.player().tech["featuresPlaybackRate"]&&this.player().options()["playbackRates"]&&this.player().options()["playbackRates"].length>0};vjs.PlaybackRateMenuButton.prototype.updateVisibility=function(){if(this.playbackRateSupported())this.removeClass("vjs-hidden");else this.addClass("vjs-hidden")};vjs.PlaybackRateMenuButton.prototype.updateLabel=function(){if(this.playbackRateSupported())this.labelEl_.innerHTML=this.player().playbackRate()+"x"}
;vjs.PlaybackRateMenuItem=vjs.MenuItem.extend({contentElType:"button",init:function(player,options){var label=this.label=options["rate"];var rate=this.rate=parseFloat(label,10);options["label"]=label;options["selected"]=rate===1;vjs.MenuItem.call(this,player,options);this.player().on("ratechange",vjs.bind(this,this.update))}});vjs.PlaybackRateMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this);this.player().playbackRate(this.rate)}
;vjs.PlaybackRateMenuItem.prototype.update=function(){this.selected(this.player().playbackRate()==this.rate)};vjs.PosterImage=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);if(player.poster())this.src(player.poster());if(!player.poster()||!player.controls())this.hide();player.on("posterchange",vjs.bind(this,function(){this.src(player.poster())}));player.on("play",vjs.bind(this,this.hide))}});var _backgroundSizeSupported="backgroundSize"in vjs.TEST_VID.style
;vjs.PosterImage.prototype.createEl=function(){var el=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1});if(!_backgroundSizeSupported)el.appendChild(vjs.createEl("img"));return el};vjs.PosterImage.prototype.src=function(url){var el=this.el();if(url===undefined)return;if(_backgroundSizeSupported)el.style.backgroundImage='url("'+url+'")';else el.firstChild.src=url};vjs.PosterImage.prototype.onClick=function(){if(this.player().controls())this.player_.play()}
;vjs.LoadingSpinner=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})};vjs.BigPlayButton=vjs.Button.extend();vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})
};vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()};vjs.ErrorDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);this.update();player.on("error",vjs.bind(this,this.update))}});vjs.ErrorDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-error-display"});this.contentEl_=vjs.createEl("div");el.appendChild(this.contentEl_);return el}
;vjs.ErrorDisplay.prototype.update=function(){if(this.player().error())this.contentEl_.innerHTML=this.localize(this.player().error().message)};vjs.MediaTechController=vjs.Component.extend({init:function(player,options,ready){options=options||{};options.reportTouchActivity=false;vjs.Component.call(this,player,options,ready);if(!this["featuresProgressEvents"])this.manualProgressOn();if(!this["featuresTimeupdateEvents"])this.manualTimeUpdatesOn();this.initControlsListeners()}})
;vjs.MediaTechController.prototype.initControlsListeners=function(){var player,tech,activateControls,deactivateControls;tech=this;player=this.player();var activateControls=function(){if(player.controls()&&!player.usingNativeControls())tech.addControlsListeners()};deactivateControls=vjs.bind(tech,tech.removeControlsListeners);this.ready(activateControls);player.on("controlsenabled",activateControls);player.on("controlsdisabled",deactivateControls);this.ready(function(){
if(this.networkState&&this.networkState()>0)this.player().trigger("loadstart")})};vjs.MediaTechController.prototype.addControlsListeners=function(){var userWasActive;this.on("mousedown",this.onClick);this.on("touchstart",function(event){userWasActive=this.player_.userActive()});this.on("touchmove",function(event){if(userWasActive)this.player().reportUserActivity()});this.on("touchend",function(event){event.preventDefault()});this.emitTapEvents();this.on("tap",this.onTap)}
;vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap");this.off("touchstart");this.off("touchmove");this.off("touchleave");this.off("touchcancel");this.off("touchend");this.off("click");this.off("mousedown")};vjs.MediaTechController.prototype.onClick=function(event){if(event.button!==0)return;if(this.player().controls())if(this.player().paused())this.player().play();else this.player().pause()};vjs.MediaTechController.prototype.onTap=function(){
this.player().userActive(!this.player().userActive())};vjs.MediaTechController.prototype.manualProgressOn=function(){this.manualProgress=true;this.trackProgress()};vjs.MediaTechController.prototype.manualProgressOff=function(){this.manualProgress=false;this.stopTrackingProgress()};vjs.MediaTechController.prototype.trackProgress=function(){this.progressInterval=setInterval(vjs.bind(this,function(){var bufferedPercent=this.player().bufferedPercent()
;if(this.bufferedPercent_!=bufferedPercent)this.player().trigger("progress");this.bufferedPercent_=bufferedPercent;if(bufferedPercent===1)this.stopTrackingProgress()}),500)};vjs.MediaTechController.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)};vjs.MediaTechController.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=true;this.player().on("play",vjs.bind(this,this.trackCurrentTime))
;this.player().on("pause",vjs.bind(this,this.stopTrackingCurrentTime));this.one("timeupdate",function(){this["featuresTimeupdateEvents"]=true;this.manualTimeUpdatesOff()})};vjs.MediaTechController.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};vjs.MediaTechController.prototype.trackCurrentTime=function(){
if(this.currentTimeInterval)this.stopTrackingCurrentTime();this.currentTimeInterval=setInterval(vjs.bind(this,function(){if(this.el_==null)this.stopTrackingCurrentTime();else this.player().trigger("timeupdate")}),250)};vjs.MediaTechController.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval);if(this.el_!=null)this.player().trigger("timeupdate")};vjs.MediaTechController.prototype.dispose=function(){if(this.manualProgress)this.manualProgressOff()
;if(this.manualTimeUpdates)this.manualTimeUpdatesOff();vjs.Component.prototype.dispose.call(this)};vjs.MediaTechController.prototype.setCurrentTime=function(){if(this.manualTimeUpdates)this.player().trigger("timeupdate")};vjs.MediaTechController.prototype.setPoster=function(){};vjs.MediaTechController.prototype["featuresVolumeControl"]=true;vjs.MediaTechController.prototype["featuresFullscreenResize"]=false;vjs.MediaTechController.prototype["featuresPlaybackRate"]=false
;vjs.MediaTechController.prototype["featuresProgressEvents"]=false;vjs.MediaTechController.prototype["featuresTimeupdateEvents"]=false;vjs.media={};vjs.Html5=vjs.MediaTechController.extend({init:function(player,options,ready){this["featuresVolumeControl"]=vjs.Html5.canControlVolume();this["featuresPlaybackRate"]=vjs.Html5.canControlPlaybackRate();this["movingMediaElementInDOM"]=!vjs.IS_IOS;this["featuresFullscreenResize"]=true;this["featuresProgressEvents"]=true
;vjs.MediaTechController.call(this,player,options,ready);this.setupTriggers();var source=options["source"];if(source&&this.el_.currentSrc!==source.src)this.el_.src=source.src;if(vjs.TOUCH_ENABLED&&player.options()["nativeControlsForTouch"]!==false)this.useNativeControls();player.ready(function(){if(this.tag&&this.options_["autoplay"]&&this.paused()){delete this.tag["poster"];this.play()}});this.triggerReady()}});vjs.Html5.prototype.dispose=function(){vjs.Html5.disposeMediaElement(this.el_)
;vjs.MediaTechController.prototype.dispose.call(this)};vjs.Html5.prototype.createEl=function(){var player=this.player_,el=player.tag,newEl,clone;if(!el||this["movingMediaElementInDOM"]===false){if(el){clone=el.cloneNode(false);vjs.Html5.disposeMediaElement(el);el=clone;player.tag=null}else{el=vjs.createEl("video");vjs.setElementAttributes(el,vjs.obj.merge(player.tagAttributes||{},{id:player.id()+"_html5_api",class:"vjs-tech"}))}el["player"]=player;vjs.insertFirst(el,player.el())}
var settingsAttrs=["autoplay","preload","loop","muted"];for(var i=settingsAttrs.length-1;i>=0;i--){var attr=settingsAttrs[i];var overwriteAttrs={};if(typeof player.options_[attr]!=="undefined")overwriteAttrs[attr]=player.options_[attr];vjs.setElementAttributes(el,overwriteAttrs)}return el};vjs.Html5.prototype.setupTriggers=function(){for(var i=vjs.Html5.Events.length-1;i>=0;i--)vjs.on(this.el_,vjs.Html5.Events[i],vjs.bind(this,this.eventHandler))};vjs.Html5.prototype.eventHandler=function(evt){
if(evt.type=="error"&&this.error())this.player().error(this.error().code);else{evt.bubbles=false;this.player().trigger(evt)}};vjs.Html5.prototype.useNativeControls=function(){var tech,player,controlsOn,controlsOff,cleanUp;tech=this;player=this.player();tech.setControls(player.controls());controlsOn=function(){tech.setControls(true)};controlsOff=function(){tech.setControls(false)};player.on("controlsenabled",controlsOn);player.on("controlsdisabled",controlsOff);cleanUp=function(){
player.off("controlsenabled",controlsOn);player.off("controlsdisabled",controlsOff)};tech.on("dispose",cleanUp);player.on("usingcustomcontrols",cleanUp);player.usingNativeControls(true)};vjs.Html5.prototype.play=function(){var player=this.player();if(typeof player.isIMA!=="undefined"&&!player.isIMA){if(typeof player.vast.sources!=="undefined"&&player.src()==player.vast.sources[0].src)return;player.trigger("play");this.manualProgressOff();this.manualTimeUpdatesOff()}else this.el_.play()}
;vjs.Html5.prototype.pause=function(){this.el_.pause()};vjs.Html5.prototype.paused=function(){return this.el_.paused};vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime};vjs.Html5.prototype.setCurrentTime=function(seconds){try{this.el_.currentTime=seconds}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}};vjs.Html5.prototype.duration=function(){return this.el_.duration||0};vjs.Html5.prototype.buffered=function(){return this.el_.buffered}
;vjs.Html5.prototype.volume=function(){return this.el_.volume};vjs.Html5.prototype.setVolume=function(percentAsDecimal){this.el_.volume=percentAsDecimal};vjs.Html5.prototype.muted=function(){return this.el_.muted};vjs.Html5.prototype.setMuted=function(muted){this.el_.muted=muted};vjs.Html5.prototype.width=function(){return this.el_.offsetWidth};vjs.Html5.prototype.height=function(){return this.el_.offsetHeight};vjs.Html5.prototype.supportsFullScreen=function(){
if(typeof this.el_.webkitEnterFullScreen=="function")if(/Android/.test(vjs.USER_AGENT)||!/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT))return true;return false};vjs.Html5.prototype.enterFullScreen=function(){var video=this.el_;if("webkitDisplayingFullscreen"in video)this.one("webkitbeginfullscreen",vjs.bind(this,function(e){this.player_.isFullscreen(true);this.one("webkitendfullscreen",vjs.bind(this,function(e){this.player_.isFullscreen(false);this.player_.trigger("fullscreenchange")}))
;this.player_.trigger("fullscreenchange")}));if(video.paused&&video.networkState<=video.HAVE_METADATA){this.el_.play();setTimeout(function(){video.pause();video.webkitEnterFullScreen()},0)}else video.webkitEnterFullScreen()};vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()};vjs.Html5.prototype.src=function(src){if(src===undefined)return this.el_.src;else this.el_.src=src};vjs.Html5.prototype.load=function(){this.el_.load()};vjs.Html5.prototype.currentSrc=function(){
return this.el_.currentSrc};vjs.Html5.prototype.poster=function(){return this.el_.poster};vjs.Html5.prototype.setPoster=function(val){this.el_.poster=val};vjs.Html5.prototype.preload=function(){return this.el_.preload};vjs.Html5.prototype.setPreload=function(val){this.el_.preload=val};vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay};vjs.Html5.prototype.setAutoplay=function(val){this.el_.autoplay=val};vjs.Html5.prototype.controls=function(){return this.el_.controls}
;vjs.Html5.prototype.setControls=function(val){this.el_.controls=!!val};vjs.Html5.prototype.loop=function(){return this.el_.loop};vjs.Html5.prototype.setLoop=function(val){this.el_.loop=val};vjs.Html5.prototype.error=function(){return this.el_.error};vjs.Html5.prototype.seeking=function(){return this.el_.seeking};vjs.Html5.prototype.ended=function(){return this.el_.ended};vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted};vjs.Html5.prototype.playbackRate=function(){
return this.el_.playbackRate};vjs.Html5.prototype.setPlaybackRate=function(val){this.el_.playbackRate=val};vjs.Html5.prototype.networkState=function(){return this.el_.networkState};vjs.Html5.isSupported=function(){try{vjs.TEST_VID["volume"]=.5}catch(e){return false}return!!vjs.TEST_VID.canPlayType};vjs.Html5.canPlaySource=function(srcObj){try{return!!vjs.TEST_VID.canPlayType(srcObj.type)}catch(e){return""}};vjs.Html5.canControlVolume=function(){var volume=vjs.TEST_VID.volume
;vjs.TEST_VID.volume=volume/2+.1;return volume!==vjs.TEST_VID.volume};vjs.Html5.canControlPlaybackRate=function(){var playbackRate=vjs.TEST_VID.playbackRate;vjs.TEST_VID.playbackRate=playbackRate/2+.1;return playbackRate!==vjs.TEST_VID.playbackRate};(function(){var canPlayType,mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,mp4RE=/^video\/mp4/i;vjs.Html5.patchCanPlayType=function(){if(vjs.ANDROID_VERSION>=4){if(!canPlayType)canPlayType=vjs.TEST_VID.constructor.prototype.canPlayType
;vjs.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mpegurlRE.test(type))return"maybe";return canPlayType.call(this,type)}}if(vjs.IS_OLD_ANDROID){if(!canPlayType)canPlayType=vjs.TEST_VID.constructor.prototype.canPlayType;vjs.TEST_VID.constructor.prototype.canPlayType=function(type){if(type&&mp4RE.test(type))return"maybe";return canPlayType.call(this,type)}}};vjs.Html5.unpatchCanPlayType=function(){var r=vjs.TEST_VID.constructor.prototype.canPlayType
;vjs.TEST_VID.constructor.prototype.canPlayType=canPlayType;canPlayType=null;return r};vjs.Html5.patchCanPlayType()})();vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(",");vjs.Html5.disposeMediaElement=function(el){if(!el)return;el["player"]=null;if(el.parentNode)el.parentNode.removeChild(el)
;while(el.hasChildNodes())el.removeChild(el.firstChild);el.removeAttribute("src");if(typeof el.load==="function")(function(){try{el.load()}catch(e){}})()};vjs.Flash=vjs.MediaTechController.extend({init:function(player,options,ready){vjs.MediaTechController.call(this,player,options,ready);var source=options["source"],parentEl=options["parentEl"],placeHolder=this.el_=vjs.createEl("div",{id:player.id()+"_temp_flash"
}),objId=player.id()+"_flash_api",playerOptions=player.options_,flashVars=vjs.obj.merge({readyFunction:"Mb.videojs.Flash.onReady",eventProxyFunction:"Mb.videojs.Flash.onEvent",errorEventProxyFunction:"Mb.videojs.Flash.onError",autoplay:playerOptions.autoplay,preload:playerOptions.preload,loop:playerOptions.loop,muted:playerOptions.muted},options["flashVars"]),params=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},options["params"]),attributes=vjs.obj.merge({id:objId,name:objId,class:"vjs-tech"
},options["attributes"]);if(source)if(source.type&&vjs.Flash.isStreamingType(source.type)){var parts=vjs.Flash.streamToParts(source.src);flashVars["rtmpConnection"]=encodeURIComponent(parts.connection);flashVars["rtmpStream"]=encodeURIComponent(parts.stream)}else flashVars["src"]=encodeURIComponent(vjs.getAbsoluteURL(source.src));vjs.insertFirst(placeHolder,parentEl);if(options["startTime"])this.ready(function(){this.load();this.play();this["currentTime"](options["startTime"])})
;if(vjs.IS_FIREFOX)this.ready(function(){vjs.on(this.el(),"mousemove",vjs.bind(this,function(){this.player().trigger({type:"mousemove",bubbles:false})}))});player.on("stageclick",player.reportUserActivity);this.el_=vjs.Flash.embed(options["swf"],placeHolder,flashVars,params,attributes)}});vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)};vjs.Flash.prototype.play=function(){this.el_.vjs_play()};vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()}
;vjs.Flash.prototype.src=function(src){if(src===undefined)return this["currentSrc"]();if(vjs.Flash.isStreamingSrc(src)){src=vjs.Flash.streamToParts(src);this.setRtmpConnection(src.connection);this.setRtmpStream(src.stream)}else{src=vjs.getAbsoluteURL(src);this.el_.vjs_src(src)}if(this.player_.autoplay()){var tech=this;setTimeout(function(){tech.play()},0)}};vjs.Flash.prototype["setCurrentTime"]=function(time){this.lastSeekTarget_=time;this.el_.vjs_setProperty("currentTime",time)
;vjs.MediaTechController.prototype.setCurrentTime.call(this)};vjs.Flash.prototype["currentTime"]=function(time){if(this.seeking())return this.lastSeekTarget_||0;return this.el_.vjs_getProperty("currentTime")};vjs.Flash.prototype["currentSrc"]=function(){var src=this.el_.vjs_getProperty("currentSrc");if(src==null){var connection=this["rtmpConnection"](),stream=this["rtmpStream"]();if(connection&&stream)src=vjs.Flash.streamFromParts(connection,stream)}return src}
;vjs.Flash.prototype.load=function(){this.el_.vjs_load()};vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")};vjs.Flash.prototype["setPoster"]=function(){};vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))};vjs.Flash.prototype.supportsFullScreen=function(){return false};vjs.Flash.prototype.enterFullScreen=function(){return false};(function(){
var api=vjs.Flash.prototype,readWrite="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),readOnly="error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(","),i;function createSetter(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);api["set"+attrUpper]=function(val){
return this.el_.vjs_setProperty(attr,val)}}function createGetter(attr){api[attr]=function(){return this.el_.vjs_getProperty(attr)}}for(i=0;i<readWrite.length;i++){createGetter(readWrite[i]);createSetter(readWrite[i])}for(i=0;i<readOnly.length;i++)createGetter(readOnly[i])})();vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10};vjs.Flash.canPlaySource=function(srcObj){var type;if(!srcObj.type)return"";type=srcObj.type.replace(/;.*/,"").toLowerCase()
;if(type in vjs.Flash.formats||type in vjs.Flash.streamingFormats)return"maybe"};vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};vjs.Flash["onReady"]=function(currSwf){var el,player;el=vjs.el(currSwf);player=el&&el.parentNode&&el.parentNode["player"];if(player){el["player"]=player;vjs.Flash["checkReady"](player.tech)}};vjs.Flash["checkReady"]=function(tech){if(!tech.el())return
;if(tech.el().vjs_getProperty)tech.triggerReady();else setTimeout(function(){vjs.Flash["checkReady"](tech)},50)};vjs.Flash["onEvent"]=function(swfID,eventName){var player=vjs.el(swfID)["player"];player.trigger(eventName)};vjs.Flash["onError"]=function(swfID,err){var player=vjs.el(swfID)["player"];var msg="FLASH: "+err;if(err=="srcnotfound")player.error({code:4,message:msg});else player.error(msg)};vjs.Flash.version=function(){var version="0,0,0";try{
version=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)version=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(err){}}return version.split(",")};vjs.Flash.embed=function(swf,placeHolder,flashVars,params,attributes){
var code=vjs.Flash.getEmbedCode(swf,flashVars,params,attributes),obj=vjs.createEl("div",{innerHTML:code}).childNodes[0],par=placeHolder.parentNode;placeHolder.parentNode.replaceChild(obj,placeHolder);var newObj=par.childNodes[0];setTimeout(function(){newObj.style.display="block"},1e3);return obj};vjs.Flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type="application/x-shockwave-flash"',flashVarsString="",paramsString="",attrsString=""
;if(flashVars)vjs.obj.each(flashVars,function(key,val){flashVarsString+=key+"="+val+"&amp;"});params=vjs.obj.merge({movie:swf,flashvars:flashVarsString,allowScriptAccess:"always",allowNetworking:"all"},params);vjs.obj.each(params,function(key,val){paramsString+='<param name="'+key+'" value="'+val+'" />'});attributes=vjs.obj.merge({data:swf,width:"100%",height:"100%"},attributes);vjs.obj.each(attributes,function(key,val){attrsString+=key+'="'+val+'" '})
;return objTag+attrsString+">"+paramsString+"</object>"};vjs.Flash.streamFromParts=function(connection,stream){return connection+"&"+stream};vjs.Flash.streamToParts=function(src){var parts={connection:"",stream:""};if(!src)return parts;var connEnd=src.indexOf("&");var streamBegin;if(connEnd!==-1)streamBegin=connEnd+1;else{connEnd=streamBegin=src.lastIndexOf("/")+1;if(connEnd===0)connEnd=streamBegin=src.length}parts.connection=src.substring(0,connEnd)
;parts.stream=src.substring(streamBegin,src.length);return parts};vjs.Flash.isStreamingType=function(srcType){return srcType in vjs.Flash.streamingFormats};vjs.Flash.RTMP_RE=/^rtmp[set]?:\/\//i;vjs.Flash.isStreamingSrc=function(src){return vjs.Flash.RTMP_RE.test(src)};vjs.MediaLoader=vjs.Component.extend({init:function(player,options,ready){vjs.Component.call(this,player,options,ready)
;if(!player.options_["sources"]||player.options_["sources"].length===0)for(var i=0,j=player.options_["techOrder"];i<j.length;i++){var techName=vjs.capitalize(j[i]),tech=window["Mb.videojs"][techName];if(tech&&tech.isSupported()){player.loadTech(techName);break}}else player.src(player.options_["sources"])}});vjs.Player.prototype.textTracks_;vjs.Player.prototype.textTracks=function(){this.textTracks_=this.textTracks_||[];return this.textTracks_}
;vjs.Player.prototype.addTextTrack=function(kind,label,language,options){var tracks=this.textTracks_=this.textTracks_||[];options=options||{};options["kind"]=kind;options["label"]=label;options["language"]=language;var Kind=vjs.capitalize(kind||"subtitles");var track=new window["Mb.videojs"][Kind+"Track"](this,options);tracks.push(track);if(track.dflt())this.ready(function(){setTimeout(function(){track.player().showTextTrack(track.id())},0)});return track}
;vjs.Player.prototype.addTextTracks=function(trackList){var trackObj;for(var i=0;i<trackList.length;i++){trackObj=trackList[i];this.addTextTrack(trackObj["kind"],trackObj["label"],trackObj["language"],trackObj)}return this};vjs.Player.prototype.showTextTrack=function(id,disableSameKind){var tracks=this.textTracks_,i=0,j=tracks.length,track,showTrack,kind;for(;i<j;i++){track=tracks[i];if(track.id()===id){track.show();showTrack=track
}else if(disableSameKind&&track.kind()==disableSameKind&&track.mode()>0)track.disable()}kind=showTrack?showTrack.kind():disableSameKind?disableSameKind:false;if(kind)this.trigger(kind+"trackchange");return this};vjs.TextTrack=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);this.id_=options["id"]||"vjs_"+options["kind"]+"_"+options["language"]+"_"+vjs.guid++;this.src_=options["src"];this.dflt_=options["default"]||options["dflt"]
;this.title_=options["title"];this.language_=options["srclang"];this.label_=options["label"];this.cues_=[];this.activeCues_=[];this.readyState_=0;this.mode_=0;this.player_.on("fullscreenchange",vjs.bind(this,this.adjustFontSize))}});vjs.TextTrack.prototype.kind_;vjs.TextTrack.prototype.kind=function(){return this.kind_};vjs.TextTrack.prototype.src_;vjs.TextTrack.prototype.src=function(){return this.src_};vjs.TextTrack.prototype.dflt_;vjs.TextTrack.prototype.dflt=function(){return this.dflt_}
;vjs.TextTrack.prototype.title_;vjs.TextTrack.prototype.title=function(){return this.title_};vjs.TextTrack.prototype.language_;vjs.TextTrack.prototype.language=function(){return this.language_};vjs.TextTrack.prototype.label_;vjs.TextTrack.prototype.label=function(){return this.label_};vjs.TextTrack.prototype.cues_;vjs.TextTrack.prototype.cues=function(){return this.cues_};vjs.TextTrack.prototype.activeCues_;vjs.TextTrack.prototype.activeCues=function(){return this.activeCues_}
;vjs.TextTrack.prototype.readyState_;vjs.TextTrack.prototype.readyState=function(){return this.readyState_};vjs.TextTrack.prototype.mode_;vjs.TextTrack.prototype.mode=function(){return this.mode_};vjs.TextTrack.prototype.adjustFontSize=function(){if(this.player_.isFullscreen())this.el_.style.fontSize=screen.width/this.player_.width()*1.4*100+"%";else this.el_.style.fontSize=""};vjs.TextTrack.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{
className:"vjs-"+this.kind_+" vjs-text-track"})};vjs.TextTrack.prototype.show=function(){this.activate();this.mode_=2;vjs.Component.prototype.show.call(this)};vjs.TextTrack.prototype.hide=function(){this.activate();this.mode_=1;vjs.Component.prototype.hide.call(this)};vjs.TextTrack.prototype.disable=function(){if(this.mode_==2)this.hide();this.deactivate();this.mode_=0};vjs.TextTrack.prototype.activate=function(){if(this.readyState_===0)this.load();if(this.mode_===0){
this.player_.on("timeupdate",vjs.bind(this,this.update,this.id_));this.player_.on("ended",vjs.bind(this,this.reset,this.id_));if(this.kind_==="captions"||this.kind_==="subtitles")this.player_.getChild("textTrackDisplay").addChild(this)}};vjs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",vjs.bind(this,this.update,this.id_));this.player_.off("ended",vjs.bind(this,this.reset,this.id_));this.reset();this.player_.getChild("textTrackDisplay").removeChild(this)}
;vjs.TextTrack.prototype.load=function(){if(this.readyState_===0){this.readyState_=1;vjs.get(this.src_,vjs.bind(this,this.parseCues),vjs.bind(this,this.onError))}};vjs.TextTrack.prototype.onError=function(err){this.error=err;this.readyState_=3;this.trigger("error")};vjs.TextTrack.prototype.parseCues=function(srcContent){var cue,time,text,lines=srcContent.split("\n"),line="",id;for(var i=1,j=lines.length;i<j;i++){line=vjs.trim(lines[i]);if(line){if(line.indexOf("-->")==-1){id=line
;line=vjs.trim(lines[++i])}else id=this.cues_.length;cue={id:id,index:this.cues_.length};time=line.split(/[\t ]+/);cue.startTime=this.parseCueTime(time[0]);cue.endTime=this.parseCueTime(time[2]);text=[];while(lines[++i]&&(line=vjs.trim(lines[i])))text.push(line);cue.text=text.join("<br/>");this.cues_.push(cue)}}this.readyState_=2;this.trigger("loaded")};vjs.TextTrack.prototype.parseCueTime=function(timeText){var parts=timeText.split(":"),time=0,hours,minutes,other,seconds,ms;if(parts.length==3){
hours=parts[0];minutes=parts[1];other=parts[2]}else{hours=0;minutes=parts[0];other=parts[1]}other=other.split(/\s+/);seconds=other.splice(0,1)[0];seconds=seconds.split(/\.|,/);ms=parseFloat(seconds[1]);seconds=seconds[0];time+=parseFloat(hours)*3600;time+=parseFloat(minutes)*60;time+=parseFloat(seconds);if(ms)time+=ms/1e3;return time};vjs.TextTrack.prototype.update=function(){if(this.cues_.length>0){var offset=this.player_.options()["trackTimeOffset"]||0
;var time=this.player_.currentTime()+offset;if(this.prevChange===undefined||time<this.prevChange||this.nextChange<=time){var cues=this.cues_,newNextChange=this.player_.duration(),newPrevChange=0,reverse=false,newCues=[],firstActiveIndex,lastActiveIndex,cue,i;if(time>=this.nextChange||this.nextChange===undefined)i=this.firstActiveIndex!==undefined?this.firstActiveIndex:0;else{reverse=true;i=this.lastActiveIndex!==undefined?this.lastActiveIndex:cues.length-1}while(true){cue=cues[i]
;if(cue.endTime<=time){newPrevChange=Math.max(newPrevChange,cue.endTime);if(cue.active)cue.active=false}else if(time<cue.startTime){newNextChange=Math.min(newNextChange,cue.startTime);if(cue.active)cue.active=false;if(!reverse)break}else{if(reverse){newCues.splice(0,0,cue);if(lastActiveIndex===undefined)lastActiveIndex=i;firstActiveIndex=i}else{newCues.push(cue);if(firstActiveIndex===undefined)firstActiveIndex=i;lastActiveIndex=i}newNextChange=Math.min(newNextChange,cue.endTime)
;newPrevChange=Math.max(newPrevChange,cue.startTime);cue.active=true}if(reverse)if(i===0)break;else i--;else if(i===cues.length-1)break;else i++}this.activeCues_=newCues;this.nextChange=newNextChange;this.prevChange=newPrevChange;this.firstActiveIndex=firstActiveIndex;this.lastActiveIndex=lastActiveIndex;this.updateDisplay();this.trigger("cuechange")}}};vjs.TextTrack.prototype.updateDisplay=function(){var cues=this.activeCues_,html="",i=0,j=cues.length
;for(;i<j;i++)html+='<span class="vjs-tt-cue">'+cues[i].text+"</span>";this.el_.innerHTML=html};vjs.TextTrack.prototype.reset=function(){this.nextChange=0;this.prevChange=this.player_.duration();this.firstActiveIndex=0;this.lastActiveIndex=0};vjs.CaptionsTrack=vjs.TextTrack.extend();vjs.CaptionsTrack.prototype.kind_="captions";vjs.SubtitlesTrack=vjs.TextTrack.extend();vjs.SubtitlesTrack.prototype.kind_="subtitles";vjs.ChaptersTrack=vjs.TextTrack.extend()
;vjs.ChaptersTrack.prototype.kind_="chapters";vjs.TextTrackDisplay=vjs.Component.extend({init:function(player,options,ready){vjs.Component.call(this,player,options,ready);if(player.options_["tracks"]&&player.options_["tracks"].length>0)this.player_.addTextTracks(player.options_["tracks"])}});vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})};vjs.TextTrackMenuItem=vjs.MenuItem.extend({
init:function(player,options){var track=this.track=options["track"];options["label"]=track.label();options["selected"]=track.dflt();vjs.MenuItem.call(this,player,options);this.player_.on(track.kind()+"trackchange",vjs.bind(this,this.update))}});vjs.TextTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this);this.player_.showTextTrack(this.track.id_,this.track.kind())};vjs.TextTrackMenuItem.prototype.update=function(){this.selected(this.track.mode()==2)}
;vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(player,options){options["track"]={kind:function(){return options["kind"]},player:player,label:function(){return options["kind"]+" off"},dflt:function(){return false},mode:function(){return false}};vjs.TextTrackMenuItem.call(this,player,options);this.selected(true)}});vjs.OffTextTrackMenuItem.prototype.onClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this)
;this.player_.showTextTrack(this.track.id_,this.track.kind())};vjs.OffTextTrackMenuItem.prototype.update=function(){var tracks=this.player_.textTracks(),i=0,j=tracks.length,track,off=true;for(;i<j;i++){track=tracks[i];if(track.kind()==this.track.kind()&&track.mode()==2)off=false}this.selected(off)};vjs.TextTrackButton=vjs.MenuButton.extend({init:function(player,options){vjs.MenuButton.call(this,player,options);if(this.items.length<=1)this.hide()}})
;vjs.TextTrackButton.prototype.createItems=function(){var items=[],track;items.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_}));for(var i=0;i<this.player_.textTracks().length;i++){track=this.player_.textTracks()[i];if(track.kind()===this.kind_)items.push(new vjs.TextTrackMenuItem(this.player_,{track:track}))}return items};vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready)
;this.el_.setAttribute("aria-label","Captions Menu")}});vjs.CaptionsButton.prototype.kind_="captions";vjs.CaptionsButton.prototype.buttonText="Captions";vjs.CaptionsButton.prototype.className="vjs-captions-button";vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready);this.el_.setAttribute("aria-label","Subtitles Menu")}});vjs.SubtitlesButton.prototype.kind_="subtitles"
;vjs.SubtitlesButton.prototype.buttonText="Subtitles";vjs.SubtitlesButton.prototype.className="vjs-subtitles-button";vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready);this.el_.setAttribute("aria-label","Chapters Menu")}});vjs.ChaptersButton.prototype.kind_="chapters";vjs.ChaptersButton.prototype.buttonText="Chapters";vjs.ChaptersButton.prototype.className="vjs-chapters-button"
;vjs.ChaptersButton.prototype.createItems=function(){var items=[],track;for(var i=0;i<this.player_.textTracks().length;i++){track=this.player_.textTracks()[i];if(track.kind()===this.kind_)items.push(new vjs.TextTrackMenuItem(this.player_,{track:track}))}return items};vjs.ChaptersButton.prototype.createMenu=function(){var tracks=this.player_.textTracks(),i=0,j=tracks.length,track,chaptersTrack,items=this.items=[];for(;i<j;i++){track=tracks[i]
;if(track.kind()==this.kind_)if(track.readyState()===0){track.load();track.on("loaded",vjs.bind(this,this.createMenu))}else{chaptersTrack=track;break}}var menu=this.menu;if(menu===undefined){menu=new vjs.Menu(this.player_);menu.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}))}if(chaptersTrack){var cues=chaptersTrack.cues_,cue,mi;i=0;j=cues.length;for(;i<j;i++){cue=cues[i];mi=new vjs.ChaptersTrackMenuItem(this.player_,{
track:chaptersTrack,cue:cue});items.push(mi);menu.addChild(mi)}this.addChild(menu)}if(this.items.length>0)this.show();return menu};vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(player,options){var track=this.track=options["track"],cue=this.cue=options["cue"],currentTime=player.currentTime();options["label"]=cue.text;options["selected"]=cue.startTime<=currentTime&&currentTime<cue.endTime;vjs.MenuItem.call(this,player,options);track.on("cuechange",vjs.bind(this,this.update))}})
;vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};vjs.ChaptersTrackMenuItem.prototype.update=function(){var cue=this.cue,currentTime=this.player_.currentTime();this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime)};vjs.obj.merge(vjs.ControlBar.prototype.options_["children"],{subtitlesButton:{},captionsButton:{},chaptersButton:{}});vjs.JSON
;if(typeof window.JSON!=="undefined"&&window.JSON.parse==="function")vjs.JSON=window.JSON;else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}
return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}
throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var options,vid,player,vids=document.getElementsByTagName("video");if(vids&&vids.length>0)for(var i=0,j=vids.length;i<j;i++){vid=vids[i];if(vid&&vid.getAttribute){if(vid["player"]===undefined){options=vid.getAttribute("data-setup");if(options!==null){options=vjs.JSON.parse(options||"{}");player=Mb.videojs(vid,options)}}}else{vjs.autoSetupTimeout(1);break}
}else if(!vjs.windowLoaded)vjs.autoSetupTimeout(1)};vjs.autoSetupTimeout=function(wait){setTimeout(vjs.autoSetup,wait)};if(document.readyState==="complete")vjs.windowLoaded=true;else vjs.one(window,"load",function(){vjs.windowLoaded=true});vjs.autoSetupTimeout(1);vjs.plugin=function(name,init){vjs.Player.prototype[name]=init};vjs.Player.prototype.playAd=function(){this.techCall("play");if(typeof this.isIMA!=="undefined"){
if(this.isIMA&&typeof this.ima!=="undefined"&&typeof this.ima.resumeAd!=="undefined")this.ima.resumeAd();else if(!this.isIMA)Mb.mobile.canvas.play()}return this};vjs.Player.prototype.setVolume=function(volume){this.volume(volume);return this};vjs.Player.prototype.pauseAd=function(){this.techCall("pause");if(typeof this.isIMA!=="undefined"){if(this.isIMA&&typeof this.ima!=="undefined"&&typeof this.ima.pauseAd!=="undefined")this.ima.pauseAd();else if(!this.isIMA)Mb.mobile.canvas.pause()}
return this};vjs.Player.prototype.stopAd=function(){if(typeof this.isIMA!=="undefined"){if(this.isIMA&&typeof this.ima!=="undefined"&&typeof this.ima.stopIMA_!=="undefined")this.ima.stopIMA_();else if(!this.isIMA)Mb.mobile.canvas.end()}return this};vjs.Player.prototype.getAdMediaFile=function(){var mediaFile={};mediaFile.id="";if(this.isIMA){mediaFile.url=this.ima.getAdsManager().adUrl;mediaFile.mime_type=this.ima.getAdsManager().adType}else{mediaFile.mime_type=this.vast.sources[0].type
;mediaFile.url=this.vast.sources[0].src}return mediaFile};vjs.Player.prototype.getAdServerId=function(){return this.current_adserver_id};vjs.Player.prototype.getAdServerReportingUrl=function(){return this.adserver_reporting_url};vjs.Player.prototype.getAdDuration=function(){var duration=null;if(this.isIMA)duration=this.ima.getAdDuration();else duration=this.duration();if(!duration)duration=30;return duration};vjs.Component.prototype.loadManifest=function(manifest){
var player=this.player(),id=player.options().mb_video_id;var loadManifestCallback=function(jsonDoc){if(jsonDoc=="")return;player.stopAd();mb_players[id].jsonDoc=JSON.parse(jsonDoc);if(player.adsLoaded){player.adsLoaded=false;player.ads.state="content-set";player.src("//player.mediabong.com/static/videojs/black.mp4");if(!player.isIMA)Mb.mobile.canvas.reset();else player.ima.imaInitialized=false}};Mb.helpers.doXdr(unescape(manifest),true,false,loadManifestCallback);return}
;vjs.Component.prototype.initIMA=function(){var options={id:this.id(),adTagUrl:"",adsRenderingSettings:{mimeTypes:["video/mp4","video/webm"]}};this.ima(options);this.ima.initializeAdDisplayContainer();this.ima.adCompleted=false;return};(function(window,document,vjs,undefined){var extend=function(obj){var arg,i,k;for(i=1;i<arguments.length;i++){arg=arguments[i];for(k in arg)if(arg.hasOwnProperty(k))obj[k]=arg[k]}return obj},on=function(obj,events,handler){
var type=Object.prototype.toString.call(events),register=function(obj,event,handler){if(obj.addEventListener)obj.addEventListener(event,handler);else if(obj.on)obj.on(event,handler);else if(obj.attachEvent)obj.attachEvent("on"+event,handler);else throw new Error("object has no mechanism for adding event listeners")},i,ii;switch(type){case"[object String]":register(obj,events,handler);break;case"[object Array]":for(i=0,ii=events.length;i<ii;i++)register(obj,events[i],handler);break
;case"[object Object]":for(i in events)if(events.hasOwnProperty(i))register(obj,i,events[i]);break;default:throw new Error("Unrecognized events parameter type: "+type)}return obj},setImmediate=function(callback){return(window.setImmediate||window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.setTimeout)(callback,0)},clearImmediate=function(id){
return(window.clearImmediate||window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout)(id)},cancelContentPlay=function(player){if(player.ads.cancelPlayTimeout)return;player.ads.cancelPlayTimeout=setImmediate(function(){player.ads.cancelPlayTimeout=null;if(!player.paused())player.pause()})},getPlayerSnapshot=function(player){var tech=player.el().querySelector(".vjs-tech"),snapshot={src:player.mbVideoSrc,currentTime:player.currentTime(),
play:true};if(tech)snapshot.nativePoster=tech.poster;return snapshot},removeClass=function(element,className){var classes=element.className.split(/\s+/),i=classes.length,newClasses=[];while(i--)if(classes[i]!==className)newClasses.push(classes[i]);element.className=newClasses.join(" ")},restorePlayerSnapshot=function(player,snapshot){var tech=player.el().querySelector(".vjs-tech"),attempts=20,resume=function(){player.currentTime(snapshot.currentTime);if(snapshot.play)player.play()
},tryToResume=function(){if(tech.seekable===undefined){resume();return}if(tech.seekable.length>0){resume();return}if(attempts--)setTimeout(tryToResume,50)};if(snapshot.nativePoster)tech.poster=snapshot.nativePoster;if(player.currentSrc()===snapshot.src){player.play();return}player.src(snapshot.src);player.load();if(player.volume()==0||player.volume()==Mb.player.muteVolume){player.volume(1);player.muted(1)}
if(typeof window.MB_PAUSE_AFTER_AD!=="undefined"&&window.MB_PAUSE_AFTER_AD==0||typeof window.MB_PAUSE_AFTER_AD==="undefined")player.one("loadedmetadata",tryToResume)},removeNativePoster=function(player){var tech=player.el().querySelector(".vjs-tech");if(tech)tech.removeAttribute("poster")},defaults={timeout:1e4,prerollTimeout:100,debug:false},adFramework=function(options){var player=this,settings=extend({},defaults,options||{}),fsmHandler;player.ads={state:"content-set",
startLinearAdMode:function(){player.trigger("adstart")},endLinearAdMode:function(){player.trigger("adend")}};fsmHandler=function(event){var fsm={"content-set":{events:{adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?";this.snapshot=getPlayerSnapshot(player);cancelContentPlay(player);removeNativePoster(player)},adabort:function(){this.snapshot=getPlayerSnapshot(player);restorePlayerSnapshot(player,this.snapshot);this.state="content-playback"}}},"ads-ready":{
events:{play:function(){this.state="preroll?";cancelContentPlay(player)}}},"preroll?":{enter:function(){this.snapshot=getPlayerSnapshot(player);removeNativePoster(player);player.el().className+=" vjs-ad-loading";if(!player.isIMA)player.ads.timeout=window.setTimeout(function(){player.trigger("adtimeout")},settings.prerollTimeout);player.trigger("readyforpreroll")},leave:function(){if(!player.isIMA)window.clearTimeout(player.ads.timeout);clearImmediate(player.ads.cancelPlayTimeout)
;player.ads.cancelPlayTimeout=null;removeClass(player.el(),"vjs-ad-loading")},events:{play:function(){cancelContentPlay(player)},adstart:function(){this.state="ad-playback";player.el().className+=" vjs-ad-playing"},adend:function(){this.state="content-playback";removeClass(player.el(),"vjs-ad-playing");restorePlayerSnapshot(player,this.snapshot)},adtimeout:function(){restorePlayerSnapshot(player,this.snapshot);this.state="content-playback";player.play()}}},"ads-ready?":{enter:function(){
player.el().className+=" vjs-ad-loading";if(!player.isIMA)player.ads.timeout=window.setTimeout(function(){player.trigger("adtimeout")},settings.timeout)},leave:function(){if(!player.isIMA)window.clearTimeout(player.ads.timeout);removeClass(player.el(),"vjs-ad-loading")},events:{play:function(){cancelContentPlay(player)},adsready:function(){this.state="preroll?"},adend:function(){this.state="content-playback";removeClass(player.el(),"vjs-ad-playing");restorePlayerSnapshot(player,this.snapshot)},
adtimeout:function(){this.state="ad-timeout-playback"},adabort:function(){this.state="content-playback";removeClass(player.el(),"vjs-ad-playing");restorePlayerSnapshot(player,this.snapshot)}}},"ad-timeout-playback":{enter:function(){restorePlayerSnapshot(player,this.snapshot)},events:{adsready:function(){if(player.paused())this.state="ads-ready";else this.state="preroll?"},contentupdate:function(){if(player.paused())this.state="content-set";else this.state="ads-ready?"}}},"ad-playback":{events:{
adend:function(){this.state="content-playback";removeClass(player.el(),"vjs-ad-playing");restorePlayerSnapshot(player,this.snapshot)}}},"content-playback":{events:{adstart:function(){this.state="ad-playback";this.snapshot=getPlayerSnapshot(player);player.el().className+=" vjs-ad-playing";removeNativePoster(player)},contentupdate:function(){if(player.paused())this.state="content-set";else this.state="ads-ready?"}}}};(function(state){var noop=function(){}
;(fsm[state].events[event.type]||noop).apply(player.ads);if(state!==player.ads.state){(fsm[state].leave||noop).apply(player.ads);(fsm[player.ads.state].enter||noop).apply(player.ads);if(settings.debug)Mb.videojs.log("ads",state+" -> "+player.ads.state)}})(player.ads.state)};on(player,vjs.Html5.Events.concat(["adtimeout","contentupdate","adsready","adstart","adend","adabort"]),fsmHandler);(function(){var lastSrc,checkSrc=function(){var src;if(player.ads.state!=="ad-playback"){
src=player.currentSrc();if(src!==lastSrc){player.trigger({type:"contentupdate",oldValue:lastSrc,newValue:src});lastSrc=src}}};player.on("loadstart",checkSrc);setImmediate(checkSrc)})();if(!player.paused())fsmHandler({type:"play"})};vjs.plugin("ads",adFramework)})(window,document,Mb.videojs);!function(e){var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.DMVAST=e()}(function(){var define,module,exports;return function e(t,n,r){
function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){function EventEmitter(){this._events=this._events||{}
;this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners
;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:
len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={}
;if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){
this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){
this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type]
;if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners
;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{
while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret
;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],2:[function(_dereq_,module,exports){var VASTAd;VASTAd=function(){function VASTAd(){this.id=null;this.errorURLTemplates=[]
;this.impressionURLTemplates=[];this.creatives=[]}return VASTAd}();module.exports=VASTAd},{}],3:[function(_dereq_,module,exports){var VASTClient,VASTParser,VASTUtil;VASTParser=_dereq_("./parser");VASTUtil=_dereq_("./util");VASTClient=function(){function VASTClient(){}VASTClient.cappingFreeLunch=0;VASTClient.cappingMinimumTimeInterval=0;VASTClient.options={withCredentials:false,timeout:0};VASTClient.get=function(url,opts,cb){var extend,now,options;now=+new Date
;extend=exports.extend=function(object,properties){var key,val;for(key in properties){val=properties[key];object[key]=val}return object};if(!cb){if(typeof opts==="function"){cb=opts}options={}}options=extend(this.options,opts);if(this.totalCallsTimeout<now){this.totalCalls=1;this.totalCallsTimeout=now+60*60*1e3}else{this.totalCalls++}if(this.cappingFreeLunch>=this.totalCalls){cb(null);return}if(now-this.lastSuccessfullAd<this.cappingMinimumTimeInterval){cb(null);return}
return VASTParser.parse(url,options,function(_this){return function(response){return cb(response)}}(this))};(function(){var defineProperty,storage;storage=VASTUtil.storage;defineProperty=Object.defineProperty;["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(property){defineProperty(VASTClient,property,{get:function(){return storage.getItem(property)},set:function(value){return storage.setItem(property,value)},configurable:false,enumerable:true})})
;if(VASTClient.totalCalls==null){VASTClient.totalCalls=0}if(VASTClient.totalCallsTimeout==null){VASTClient.totalCallsTimeout=0}})();return VASTClient}();module.exports=VASTClient},{"./parser":8,"./util":14}],4:[function(_dereq_,module,exports){var VASTCompanionAd;VASTCompanionAd=function(){function VASTCompanionAd(){this.id=null;this.width=0;this.height=0;this.type=null;this.staticResource=null;this.htmlResource=null;this.iframeResource=null;this.companionClickThroughURLTemplate=null
;this.trackingEvents={}}return VASTCompanionAd}();module.exports=VASTCompanionAd},{}],5:[function(_dereq_,module,exports){var VASTCreative,VASTCreativeCompanion,VASTCreativeLinear,VASTCreativeNonLinear,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child}
;VASTCreative=function(){function VASTCreative(){this.trackingEvents={}}return VASTCreative}();VASTCreativeLinear=function(_super){__extends(VASTCreativeLinear,_super);function VASTCreativeLinear(){VASTCreativeLinear.__super__.constructor.apply(this,arguments);this.type="linear";this.duration=0;this.skipDelay=null;this.mediaFiles=[];this.videoClickThroughURLTemplate=null;this.videoClickTrackingURLTemplates=[];this.videoCustomClickURLTemplates=[];this.adParameters=null}return VASTCreativeLinear
}(VASTCreative);VASTCreativeNonLinear=function(_super){__extends(VASTCreativeNonLinear,_super);function VASTCreativeNonLinear(){return VASTCreativeNonLinear.__super__.constructor.apply(this,arguments)}return VASTCreativeNonLinear}(VASTCreative);VASTCreativeCompanion=function(_super){__extends(VASTCreativeCompanion,_super);function VASTCreativeCompanion(){this.type="companion";this.variations=[];this.videoClickTrackingURLTemplates=[]}return VASTCreativeCompanion}(VASTCreative);module.exports={
VASTCreativeLinear:VASTCreativeLinear,VASTCreativeNonLinear:VASTCreativeNonLinear,VASTCreativeCompanion:VASTCreativeCompanion}},{}],6:[function(_dereq_,module,exports){module.exports={client:_dereq_("./client"),tracker:_dereq_("./tracker"),parser:_dereq_("./parser"),util:_dereq_("./util")}},{"./client":3,"./parser":8,"./tracker":10,"./util":14}],7:[function(_dereq_,module,exports){var VASTMediaFile;VASTMediaFile=function(){function VASTMediaFile(){this.id=null;this.fileURL=null
;this.deliveryType="progressive";this.mimeType=null;this.codec=null;this.bitrate=0;this.minBitrate=0;this.maxBitrate=0;this.width=0;this.height=0;this.apiFramework=null;this.scalable=null;this.maintainAspectRatio=null}return VASTMediaFile}();module.exports=VASTMediaFile},{}],8:[function(_dereq_,module,exports){var EventEmitter,URLHandler,VASTAd,VASTCompanionAd,VASTCreativeCompanion,VASTCreativeLinear,VASTMediaFile,VASTParser,VASTResponse,VASTUtil,__indexOf=[].indexOf||function(item){
for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};URLHandler=_dereq_("./urlhandler");VASTResponse=_dereq_("./response");VASTAd=_dereq_("./ad");VASTUtil=_dereq_("./util");VASTCreativeLinear=_dereq_("./creative").VASTCreativeLinear;VASTCreativeCompanion=_dereq_("./creative").VASTCreativeCompanion;VASTMediaFile=_dereq_("./mediafile");VASTCompanionAd=_dereq_("./companionad");EventEmitter=_dereq_("events").EventEmitter;VASTParser=function(){var URLTemplateFilters
;function VASTParser(){}URLTemplateFilters=[];VASTParser.addURLTemplateFilter=function(func){if(typeof func==="function"){URLTemplateFilters.push(func)}};VASTParser.removeURLTemplateFilter=function(){return URLTemplateFilters.pop()};VASTParser.countURLTemplateFilters=function(){return URLTemplateFilters.length};VASTParser.clearUrlTemplateFilters=function(){return URLTemplateFilters=[]};VASTParser.parse=function(url,options,cb){if(!cb){if(typeof options==="function"){cb=options}options={}}
return this._parse(url,null,options,function(err,response){return cb(response)})};VASTParser.vent=new EventEmitter;VASTParser.track=function(templates,errorCode){this.vent.emit("VAST-error",errorCode);return VASTUtil.track(templates,errorCode)};VASTParser.on=function(eventName,cb){return this.vent.on(eventName,cb)};VASTParser.once=function(eventName,cb){return this.vent.once(eventName,cb)};VASTParser._parse=function(url,parentURLs,options,cb){
if(typeof window.Mb.helpers.parseUrl!="undefined")url=Mb.helpers.parseUrl(url,{},"mb_container");var filter,_i,_len;if(!cb){if(typeof options==="function"){cb=options}options={}}for(_i=0,_len=URLTemplateFilters.length;_i<_len;_i++){filter=URLTemplateFilters[_i];url=filter(url)}if(parentURLs==null){parentURLs=[]}parentURLs.push(url);return URLHandler.get(url,options,function(_this){return function(err,xml){var ad,complete,loopIndex,node,response,_j,_k,_len1,_len2,_ref,_ref1;if(err!=null){
return cb(err)}response=new VASTResponse;if(!((xml!=null?xml.documentElement:void 0)!=null&&xml.documentElement.nodeName==="VAST")){return cb()}_ref=xml.documentElement.childNodes;for(_j=0,_len1=_ref.length;_j<_len1;_j++){node=_ref[_j];if(node.nodeName==="Error"){response.errorURLTemplates.push(_this.parseNodeText(node))}}_ref1=xml.documentElement.childNodes;for(_k=0,_len2=_ref1.length;_k<_len2;_k++){node=_ref1[_k];if(node.nodeName==="Ad"){ad=_this.parseAdElement(node);if(ad!=null){
response.ads.push(ad)}else{_this.track(response.errorURLTemplates,{ERRORCODE:101})}}}complete=function(errorAlreadyRaised){var _l,_len3,_ref2;if(errorAlreadyRaised==null){errorAlreadyRaised=false}if(!response){return}_ref2=response.ads;for(_l=0,_len3=_ref2.length;_l<_len3;_l++){ad=_ref2[_l];if(ad.nextWrapperURL!=null){return}}if(response.ads.length===0){if(!errorAlreadyRaised){_this.track(response.errorURLTemplates,{ERRORCODE:303})}response=null}return cb(null,response)}
;loopIndex=response.ads.length;while(loopIndex--){ad=response.ads[loopIndex];if(ad.nextWrapperURL==null){continue}(function(ad){var baseURL,protocol,_ref2;if(parentURLs.length>=10||(_ref2=ad.nextWrapperURL,__indexOf.call(parentURLs,_ref2)>=0)){_this.track(ad.errorURLTemplates,{ERRORCODE:302});response.ads.splice(response.ads.indexOf(ad),1);complete();return}if(ad.nextWrapperURL.indexOf("//")===0){protocol=location.protocol;ad.nextWrapperURL=""+protocol+ad.nextWrapperURL
}else if(ad.nextWrapperURL.indexOf("://")===-1){baseURL=url.slice(0,url.lastIndexOf("/"));ad.nextWrapperURL=""+baseURL+"/"+ad.nextWrapperURL}return _this._parse(ad.nextWrapperURL,parentURLs,options,function(err,wrappedResponse){var creative,errorAlreadyRaised,eventName,index,wrappedAd,_base,_l,_len3,_len4,_len5,_len6,_m,_n,_o,_ref3,_ref4,_ref5,_ref6;errorAlreadyRaised=false;if(err!=null){_this.track(ad.errorURLTemplates,{ERRORCODE:301});response.ads.splice(response.ads.indexOf(ad),1)
;errorAlreadyRaised=true}else if(wrappedResponse==null){_this.track(ad.errorURLTemplates,{ERRORCODE:303});response.ads.splice(response.ads.indexOf(ad),1);errorAlreadyRaised=true}else{response.errorURLTemplates=response.errorURLTemplates.concat(wrappedResponse.errorURLTemplates);index=response.ads.indexOf(ad);response.ads.splice(index,1);_ref3=wrappedResponse.ads;for(_l=0,_len3=_ref3.length;_l<_len3;_l++){wrappedAd=_ref3[_l]
;wrappedAd.errorURLTemplates=ad.errorURLTemplates.concat(wrappedAd.errorURLTemplates);wrappedAd.impressionURLTemplates=ad.impressionURLTemplates.concat(wrappedAd.impressionURLTemplates);if(ad.trackingEvents!=null){_ref4=wrappedAd.creatives;for(_m=0,_len4=_ref4.length;_m<_len4;_m++){creative=_ref4[_m];if(creative.type==="linear"){_ref5=Object.keys(ad.trackingEvents);for(_n=0,_len5=_ref5.length;_n<_len5;_n++){eventName=_ref5[_n];(_base=creative.trackingEvents)[eventName]||(_base[eventName]=[])
;creative.trackingEvents[eventName]=creative.trackingEvents[eventName].concat(ad.trackingEvents[eventName])}}}}if(ad.videoClickTrackingURLTemplates!=null){_ref6=wrappedAd.creatives;for(_o=0,_len6=_ref6.length;_o<_len6;_o++){creative=_ref6[_o];if(creative.type==="linear"){creative.videoClickTrackingURLTemplates=creative.videoClickTrackingURLTemplates.concat(ad.videoClickTrackingURLTemplates)}}}response.ads.splice(index,0,wrappedAd)}}delete ad.nextWrapperURL;return complete(errorAlreadyRaised)})
})(ad)}return complete()}}(this))};VASTParser.childByName=function(node,name){var child,_i,_len,_ref;_ref=node.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];if(child.nodeName===name){return child}}};VASTParser.childsByName=function(node,name){var child,childs,_i,_len,_ref;childs=[];_ref=node.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];if(child.nodeName===name){childs.push(child)}}return childs};VASTParser.parseAdElement=function(adElement){
var adTypeElement,_i,_len,_ref;_ref=adElement.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){adTypeElement=_ref[_i];adTypeElement.id=adElement.getAttribute("id");if(adTypeElement.nodeName==="Wrapper"){return this.parseWrapperElement(adTypeElement)}else if(adTypeElement.nodeName==="InLine"){return this.parseInLineElement(adTypeElement)}}};VASTParser.parseWrapperElement=function(wrapperElement){var ad,creative,wrapperCreativeElement,wrapperURLElement,_i,_len,_ref
;ad=this.parseInLineElement(wrapperElement);wrapperURLElement=this.childByName(wrapperElement,"VASTAdTagURI");if(wrapperURLElement!=null){ad.nextWrapperURL=this.parseNodeText(wrapperURLElement)}else{wrapperURLElement=this.childByName(wrapperElement,"VASTAdTagURL");if(wrapperURLElement!=null){ad.nextWrapperURL=this.parseNodeText(this.childByName(wrapperURLElement,"URL"))}}wrapperCreativeElement=null;_ref=ad.creatives;for(_i=0,_len=_ref.length;_i<_len;_i++){creative=_ref[_i]
;if(creative.type==="linear"){wrapperCreativeElement=creative;break}}if(wrapperCreativeElement!=null){if(wrapperCreativeElement.trackingEvents!=null){ad.trackingEvents=wrapperCreativeElement.trackingEvents}if(wrapperCreativeElement.videoClickTrackingURLTemplates!=null){ad.videoClickTrackingURLTemplates=wrapperCreativeElement.videoClickTrackingURLTemplates}}if(ad.nextWrapperURL!=null){return ad}};VASTParser.parseInLineElement=function(inLineElement){
var ad,creative,creativeElement,creativeTypeElement,node,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2;ad=new VASTAd;ad.id=inLineElement.id;_ref=inLineElement.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];switch(node.nodeName){case"Error":ad.errorURLTemplates.push(this.parseNodeText(node));break;case"Impression":ad.impressionURLTemplates.push(this.parseNodeText(node));break;case"Creatives":_ref1=this.childsByName(node,"Creative");for(_j=0,_len1=_ref1.length;_j<_len1;_j++){
creativeElement=_ref1[_j];_ref2=creativeElement.childNodes;for(_k=0,_len2=_ref2.length;_k<_len2;_k++){creativeTypeElement=_ref2[_k];switch(creativeTypeElement.nodeName){case"Linear":creative=this.parseCreativeLinearElement(creativeTypeElement);if(creative){ad.creatives.push(creative)}break;case"CompanionAds":creative=this.parseCompanionAd(creativeTypeElement);if(creative){ad.creatives.push(creative)}}}}}}return ad};VASTParser.parseCreativeLinearElement=function(creativeElement){
var adParamsElement,clickTrackingElement,creative,customClickElement,eventName,maintainAspectRatio,mediaFile,mediaFileElement,mediaFilesElement,offset,percent,scalable,skipOffset,trackingElement,trackingEventsElement,trackingURLTemplate,videoClicksElement,_base,_i,_j,_k,_l,_len,_len1,_len2,_len3,_len4,_len5,_m,_n,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;creative=new VASTCreativeLinear;creative.duration=this.parseDuration(this.parseNodeText(this.childByName(creativeElement,"Duration")))
;if(creative.duration===-1&&creativeElement.parentNode.parentNode.parentNode.nodeName!=="Wrapper"){return null}skipOffset=creativeElement.getAttribute("skipoffset");if(skipOffset==null){creative.skipDelay=null}else if(skipOffset.charAt(skipOffset.length-1)==="%"){percent=parseInt(skipOffset,10);creative.skipDelay=creative.duration*(percent/100)}else{creative.skipDelay=this.parseDuration(skipOffset)}videoClicksElement=this.childByName(creativeElement,"VideoClicks");if(videoClicksElement!=null){
creative.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(videoClicksElement,"ClickThrough"));_ref=this.childsByName(videoClicksElement,"ClickTracking");for(_i=0,_len=_ref.length;_i<_len;_i++){clickTrackingElement=_ref[_i];creative.videoClickTrackingURLTemplates.push(this.parseNodeText(clickTrackingElement))}_ref1=this.childsByName(videoClicksElement,"CustomClick");for(_j=0,_len1=_ref1.length;_j<_len1;_j++){customClickElement=_ref1[_j]
;creative.videoCustomClickURLTemplates.push(this.parseNodeText(customClickElement))}}adParamsElement=this.childByName(creativeElement,"AdParameters");if(adParamsElement!=null){creative.adParameters=this.parseNodeText(adParamsElement)}_ref2=this.childsByName(creativeElement,"TrackingEvents");for(_k=0,_len2=_ref2.length;_k<_len2;_k++){trackingEventsElement=_ref2[_k];_ref3=this.childsByName(trackingEventsElement,"Tracking");for(_l=0,_len3=_ref3.length;_l<_len3;_l++){trackingElement=_ref3[_l]
;eventName=trackingElement.getAttribute("event");trackingURLTemplate=this.parseNodeText(trackingElement);if(eventName!=null&&trackingURLTemplate!=null){if(eventName==="progress"){offset=trackingElement.getAttribute("offset");if(!offset){continue}if(offset.charAt(offset.length-1)==="%"){eventName="progress-"+offset}else{eventName="progress-"+Math.round(this.parseDuration(offset))}}if((_base=creative.trackingEvents)[eventName]==null){_base[eventName]=[]}
creative.trackingEvents[eventName].push(trackingURLTemplate)}}}_ref4=this.childsByName(creativeElement,"MediaFiles");for(_m=0,_len4=_ref4.length;_m<_len4;_m++){mediaFilesElement=_ref4[_m];_ref5=this.childsByName(mediaFilesElement,"MediaFile");for(_n=0,_len5=_ref5.length;_n<_len5;_n++){mediaFileElement=_ref5[_n];mediaFile=new VASTMediaFile;mediaFile.id=mediaFileElement.getAttribute("id");mediaFile.fileURL=this.parseNodeText(mediaFileElement)
;mediaFile.deliveryType=mediaFileElement.getAttribute("delivery");mediaFile.codec=mediaFileElement.getAttribute("codec");mediaFile.mimeType=mediaFileElement.getAttribute("type");mediaFile.apiFramework=mediaFileElement.getAttribute("apiFramework");mediaFile.bitrate=parseInt(mediaFileElement.getAttribute("bitrate")||0);mediaFile.minBitrate=parseInt(mediaFileElement.getAttribute("minBitrate")||0);mediaFile.maxBitrate=parseInt(mediaFileElement.getAttribute("maxBitrate")||0)
;mediaFile.width=parseInt(mediaFileElement.getAttribute("width")||0);mediaFile.height=parseInt(mediaFileElement.getAttribute("height")||0);scalable=mediaFileElement.getAttribute("scalable");if(scalable&&typeof scalable==="string"){scalable=scalable.toLowerCase();if(scalable==="true"){mediaFile.scalable=true}else if(scalable==="false"){mediaFile.scalable=false}}maintainAspectRatio=mediaFileElement.getAttribute("maintainAspectRatio");if(maintainAspectRatio&&typeof maintainAspectRatio==="string"){
maintainAspectRatio=maintainAspectRatio.toLowerCase();if(maintainAspectRatio==="true"){mediaFile.maintainAspectRatio=true}else if(maintainAspectRatio==="false"){mediaFile.maintainAspectRatio=false}}creative.mediaFiles.push(mediaFile)}}return creative};VASTParser.parseCompanionAd=function(creativeElement){
var companionAd,companionResource,creative,eventName,htmlElement,iframeElement,staticElement,trackingElement,trackingEventsElement,trackingURLTemplate,_base,_i,_j,_k,_l,_len,_len1,_len2,_len3,_len4,_len5,_m,_n,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;creative=new VASTCreativeCompanion;_ref=this.childsByName(creativeElement,"Companion");for(_i=0,_len=_ref.length;_i<_len;_i++){companionResource=_ref[_i];companionAd=new VASTCompanionAd;companionAd.id=companionResource.getAttribute("id")||null
;companionAd.width=companionResource.getAttribute("width");companionAd.height=companionResource.getAttribute("height");_ref1=this.childsByName(companionResource,"HTMLResource");for(_j=0,_len1=_ref1.length;_j<_len1;_j++){htmlElement=_ref1[_j];companionAd.type=htmlElement.getAttribute("creativeType")||"text/html";companionAd.htmlResource=this.parseNodeText(htmlElement)}_ref2=this.childsByName(companionResource,"IFrameResource");for(_k=0,_len2=_ref2.length;_k<_len2;_k++){iframeElement=_ref2[_k]
;companionAd.type=iframeElement.getAttribute("creativeType")||0;companionAd.iframeResource=this.parseNodeText(iframeElement)}_ref3=this.childsByName(companionResource,"StaticResource");for(_l=0,_len3=_ref3.length;_l<_len3;_l++){staticElement=_ref3[_l];companionAd.type=staticElement.getAttribute("creativeType")||0;companionAd.staticResource=this.parseNodeText(staticElement)}_ref4=this.childsByName(companionResource,"TrackingEvents");for(_m=0,_len4=_ref4.length;_m<_len4;_m++){
trackingEventsElement=_ref4[_m];_ref5=this.childsByName(trackingEventsElement,"Tracking");for(_n=0,_len5=_ref5.length;_n<_len5;_n++){trackingElement=_ref5[_n];eventName=trackingElement.getAttribute("event");trackingURLTemplate=this.parseNodeText(trackingElement);if(eventName!=null&&trackingURLTemplate!=null){if((_base=companionAd.trackingEvents)[eventName]==null){_base[eventName]=[]}companionAd.trackingEvents[eventName].push(trackingURLTemplate)}}}
companionAd.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(companionResource,"CompanionClickThrough"));creative.variations.push(companionAd)}return creative};VASTParser.parseDuration=function(durationString){var durationComponents,hours,minutes,seconds,secondsAndMS;if(!(durationString!=null)){return-1}durationComponents=durationString.split(":");if(durationComponents.length!==3){return-1}secondsAndMS=durationComponents[2].split(".");seconds=parseInt(secondsAndMS[0])
;if(secondsAndMS.length===2){seconds+=parseFloat("0."+secondsAndMS[1])}minutes=parseInt(durationComponents[1]*60);hours=parseInt(durationComponents[0]*60*60);if(isNaN(hours||isNaN(minutes||isNaN(seconds||minutes>60*60||seconds>60)))){return-1}return hours+minutes+seconds};VASTParser.parseNodeText=function(node){return node&&(node.textContent||node.text||"").trim()};return VASTParser}();module.exports=VASTParser},{"./ad":2,"./companionad":4,"./creative":5,"./mediafile":7,"./response":9,
"./urlhandler":11,"./util":14,events:1}],9:[function(_dereq_,module,exports){var VASTResponse;VASTResponse=function(){function VASTResponse(){this.ads=[];this.errorURLTemplates=[]}return VASTResponse}();module.exports=VASTResponse},{}],10:[function(_dereq_,module,exports){var EventEmitter,VASTClient,VASTCreativeLinear,VASTTracker,VASTUtil,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){
this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};VASTClient=_dereq_("./client");VASTUtil=_dereq_("./util");VASTCreativeLinear=_dereq_("./creative").VASTCreativeLinear;EventEmitter=_dereq_("events").EventEmitter;VASTTracker=function(_super){__extends(VASTTracker,_super);function VASTTracker(ad,creative){var eventName,events,_ref;this.ad=ad;this.creative=creative;this.muted=false;this.impressed=false;this.skipable=false
;this.skipDelayDefault=-1;this.trackingEvents={};this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"];_ref=this.creative.trackingEvents;for(eventName in _ref){events=_ref[eventName];this.trackingEvents[eventName]=events.slice(0)}if(this.creative instanceof VASTCreativeLinear){this.setDuration(this.creative.duration);this.skipDelay=this.creative.skipDelay;this.linear=true
;this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate;this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}else{this.skipDelay=-1;this.linear=false}this.on("start",function(){VASTClient.lastSuccessfullAd=+new Date})}VASTTracker.prototype.setDuration=function(duration){this.assetDuration=duration;return this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,
thirdQuartile:Math.round(75*this.assetDuration)/100}};VASTTracker.prototype.setProgress=function(progress){var eventName,events,percent,quartile,skipDelay,time,_i,_len,_ref;skipDelay=this.skipDelay===null?this.skipDelayDefault:this.skipDelay;if(skipDelay!==-1&&!this.skipable){if(skipDelay>progress){this.emit("skip-countdown",skipDelay-progress)}else{this.skipable=true;this.emit("skip-countdown",0)}}if(this.linear&&this.assetDuration>0){events=[];if(progress>0){events.push("start")
;percent=Math.round(progress/this.assetDuration*100);events.push("progress-"+percent+"%");events.push("progress-"+Math.round(progress));_ref=this.quartiles;for(quartile in _ref){time=_ref[quartile];if(time<=progress&&progress<=time+1){events.push(quartile);Mb.mobile.canvas.handleQuartilesTracking(quartile)}}}for(_i=0,_len=events.length;_i<_len;_i++){eventName=events[_i];this.track(eventName,true)}if(progress<this.progress){this.track("rewind")}}return this.progress=progress}
;VASTTracker.prototype.setMuted=function(muted){if(this.muted!==muted){this.track(muted?"mute":"unmute")}return this.muted=muted};VASTTracker.prototype.setPaused=function(paused){if(this.paused!==paused){this.track(paused?"pause":"resume")}return this.paused=paused};VASTTracker.prototype.setFullscreen=function(fullscreen){if(this.fullscreen!==fullscreen){this.track(fullscreen?"fullscreen":"exitFullscreen")}return this.fullscreen=fullscreen};VASTTracker.prototype.setSkipDelay=function(duration){
if(typeof duration==="number"){return this.skipDelay=duration}};VASTTracker.prototype.load=function(){if(!this.impressed){this.impressed=true;this.trackURLs(this.ad.impressionURLTemplates);return this.track("creativeView")}};VASTTracker.prototype.errorWithCode=function(errorCode){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:errorCode})};VASTTracker.prototype.complete=function(){return this.track("complete")};VASTTracker.prototype.close=function(){
return this.track(this.linear?"closeLinear":"close")};VASTTracker.prototype.stop=function(){};VASTTracker.prototype.skip=function(){this.track("skip");return this.trackingEvents=[]};VASTTracker.prototype.click=function(){var clickThroughURL,variables,_ref;if((_ref=this.clickTrackingURLTemplates)!=null?_ref.length:void 0){this.trackURLs(this.clickTrackingURLTemplates)}if(this.clickThroughURLTemplate!=null){if(this.linear){variables={CONTENTPLAYHEAD:this.progressFormated()}}
clickThroughURL=VASTUtil.resolveURLTemplates([this.clickThroughURLTemplate],variables)[0];return this.emit("clickthrough",clickThroughURL)}};VASTTracker.prototype.track=function(eventName,once){var idx,trackingURLTemplates;if(once==null){once=false}if(eventName==="closeLinear"&&(this.trackingEvents[eventName]==null&&this.trackingEvents["close"]!=null)){eventName="close"}trackingURLTemplates=this.trackingEvents[eventName];idx=this.emitAlwaysEvents.indexOf(eventName)
;if(trackingURLTemplates!=null){this.emit(eventName,"");this.trackURLs(trackingURLTemplates)}else if(idx!==-1){this.emit(eventName,"")}if(once===true){delete this.trackingEvents[eventName];if(idx>-1){this.emitAlwaysEvents.splice(idx,1)}}};VASTTracker.prototype.trackURLs=function(URLTemplates,variables){if(variables==null){variables={}}if(this.linear){variables["CONTENTPLAYHEAD"]=this.progressFormated()}if(typeof window.Mb.helpers.parseUrl!="undefined"){var currentPlayerPosition=0
;if(Mb.syncad.currentContainer=="mb_video_syncad_bottom")currentPlayerPosition=1;var idx;for(idx in URLTemplates)URLTemplates[idx]=window.Mb.helpers.parseUrl(URLTemplates[idx],{ad_server_id:Mb.player.currentAdserverId,second:Mb.timestamps.currentAdTime,visibility:Mb.getVisibility(Mb.syncad.mainPlayerId,true),syncrollenabled:Mb.enableSyncAd,currentPosition:currentPlayerPosition,adblock:Mb.adsEnabled?0:1},"mb_container")}return VASTUtil.track(URLTemplates,variables)}
;VASTTracker.prototype.progressFormated=function(){var h,m,ms,s,seconds;seconds=parseInt(this.progress);h=seconds/(60*60);if(h.length<2){h="0"+h}m=seconds/60%60;if(m.length<2){m="0"+m}s=seconds%60;if(s.length<2){s="0"+m}ms=parseInt((this.progress-seconds)*100);return""+h+":"+m+":"+s+"."+ms};return VASTTracker}(EventEmitter);module.exports=VASTTracker},{"./client":3,"./creative":5,"./util":14,events:1}],11:[function(_dereq_,module,exports){var URLHandler,flash,xhr
;xhr=_dereq_("./urlhandlers/xmlhttprequest");flash=_dereq_("./urlhandlers/flash");URLHandler=function(){function URLHandler(){}URLHandler.get=function(url,options,cb){if(!cb){if(typeof options==="function"){cb=options}options={}}if(options.urlhandler&&options.urlhandler.supported()){return options.urlhandler.get(url,options,cb)}else if(typeof window==="undefined"||window===null){return _dereq_("./urlhandlers/"+"node").get(url,options,cb)}else if(xhr.supported()){return xhr.get(url,options,cb)
}else if(flash.supported()){return flash.get(url,options,cb)}else{return cb()}};return URLHandler}();module.exports=URLHandler},{"./urlhandlers/flash":12,"./urlhandlers/xmlhttprequest":13}],12:[function(_dereq_,module,exports){var FlashURLHandler;FlashURLHandler=function(){function FlashURLHandler(){}FlashURLHandler.xdr=function(){var xdr;if(window.XDomainRequest){xdr=new XDomainRequest}return xdr};FlashURLHandler.supported=function(){return!!this.xdr()}
;FlashURLHandler.get=function(url,options,cb){var xdr,xmlDocument;if(xmlDocument=typeof window.ActiveXObject==="function"?new window.ActiveXObject("Microsoft.XMLDOM"):void 0){xmlDocument.async=false}else{return cb()}xdr=this.xdr();xdr.open("GET",url);xdr.timeout=options.timeout||0;xdr.withCredentials=options.withCredentials||false;xdr.send();xdr.onprogress=function(){};return xdr.onload=function(){xmlDocument.loadXML(xdr.responseText);return cb(null,xmlDocument)}};return FlashURLHandler}()
;module.exports=FlashURLHandler},{}],13:[function(_dereq_,module,exports){var XHRURLHandler;XHRURLHandler=function(){function XHRURLHandler(){}XHRURLHandler.xhr=function(){var xhr;xhr=new window.XMLHttpRequest;if("withCredentials"in xhr){return xhr}};XHRURLHandler.supported=function(){return!!this.xhr()};XHRURLHandler.get=function(url,options,cb){var xhr;if(window.location.protocol==="https:"&&url.indexOf("http://")===0){return cb(new Error("Cannot go from HTTPS to HTTP."))}try{xhr=this.xhr()
;xhr.open("GET",url);xhr.timeout=options.timeout||0;xhr.withCredentials=options.withCredentials||false;xhr.send();return xhr.onreadystatechange=function(){if(xhr.readyState===4){return cb(null,xhr.responseXML)}}}catch(_error){return cb()}};return XHRURLHandler}();module.exports=XHRURLHandler},{}],14:[function(_dereq_,module,exports){var VASTUtil;VASTUtil=function(){function VASTUtil(){}VASTUtil.track=function(URLTemplates,variables){var URL,URLs,i,_i,_len,_results
;URLs=this.resolveURLTemplates(URLTemplates,variables);_results=[];for(_i=0,_len=URLs.length;_i<_len;_i++){URL=URLs[_i];if(typeof window!=="undefined"&&window!==null){i=new Image;_results.push(i.src=URL)}else{}}return _results};VASTUtil.resolveURLTemplates=function(URLTemplates,variables){var URLTemplate,URLs,key,macro1,macro2,resolveURL,value,_i,_len;URLs=[];if(variables==null){variables={}}if(!("CACHEBUSTING"in variables)){variables["CACHEBUSTING"]=Math.round(Math.random()*1e10)}
variables["random"]=variables["CACHEBUSTING"];for(_i=0,_len=URLTemplates.length;_i<_len;_i++){URLTemplate=URLTemplates[_i];resolveURL=URLTemplate;if(!resolveURL){continue}for(key in variables){value=variables[key];macro1="["+key+"]";macro2="%%"+key+"%%";resolveURL=resolveURL.replace(macro1,value);resolveURL=resolveURL.replace(macro2,value)}URLs.push(resolveURL)}return URLs};VASTUtil.storage=function(){var data,isDisabled,storage,storageError;try{
storage=typeof window!=="undefined"&&window!==null?window.localStorage||window.sessionStorage:null}catch(_error){storageError=_error;storage=null}isDisabled=function(store){var e,testValue;try{testValue="__VASTUtil__";store.setItem(testValue,testValue);if(store.getItem(testValue)!==testValue){return true}}catch(_error){e=_error;return true}return false};if(storage==null||isDisabled(storage)){data={};storage={length:0,getItem:function(key){return data[key]},setItem:function(key,value){
data[key]=value;this.length=Object.keys(data).length},removeItem:function(key){delete data[key];this.length=Object.keys(data).length},clear:function(){data={};this.length=0}}}return storage}();return VASTUtil}();module.exports=VASTUtil},{}]},{},[6])(6)});(function(vjs,vast){var extend=function(obj){var arg,i,k;for(i=1;i<arguments.length;i++){arg=arguments[i];for(k in arg)if(arg.hasOwnProperty(k))obj[k]=arg[k]}return obj},defaults={skip:5},vastPlugin=function(options){var player=this
;var settings=extend({},defaults,options||{});if(player.ads===undefined){console.log("VAST requires videojs-contrib-ads");try{if(!Mb.syncad.prerollCompletedDone)Mb.syncad.prerollCompleted(player.options().mb_video_id)}catch(e){return}return}if(settings.url===undefined||settings.url.length==0){player.trigger("adtimeout");try{if(!Mb.syncad.prerollCompletedDone)Mb.syncad.prerollCompleted(player.options().mb_video_id)}catch(e){return}return}player.on("contentupdate",function(){
player.off("contentupdate")});player.on("readyforpreroll",function(){player.vast.preroll();player.off("readyforpreroll")});player.vast.getContent=function(urlList){var urlIdx=0;var loadAd=function(){if(typeof urlList[urlIdx]==="undefined"){Mb.player.callBack.adserverListEmptied(player.options().mb_video_id);try{if(!Mb.syncad.prerollCompletedDone)Mb.syncad.prerollCompleted(player.options().mb_video_id)}catch(e){return}Mb.mobile.canvas.abort(player);return}
var url=urlList[urlIdx].url,adserver_id=urlList[urlIdx].id;if(typeof urlList[urlIdx].videoAdClickBehavior!=="undefined")player.vast.videoAdClickBehavior=urlList[urlIdx].videoAdClickBehavior;else if(typeof urlList[urlIdx].video_ad_click_behavior!=="undefined")player.vast.videoAdClickBehavior=urlList[urlIdx].video_ad_click_behavior;urlIdx++;player.current_adserver_id=adserver_id;Mb.player.callBack.adserverLoading(player.options().mb_video_id);vast.client.get(url,function(response){if(response){
Mb.player.callBack.adserverCompleted(player.options().mb_video_id);for(var adIdx=0;adIdx<response.ads.length;adIdx++){var ad=response.ads[adIdx];player.vast.companion=undefined;for(var creaIdx=0;creaIdx<ad.creatives.length;creaIdx++){if(Mb.mobile.canvas.timeout)return;var creative=ad.creatives[creaIdx],foundCreative=false,foundCompanion=false;if(creative.type==="linear"&&!foundCreative){if(creative.mediaFiles.length){player.vast.sources=player.vast.createSourceObjects(creative.mediaFiles)
;if(!player.vast.sources.length){Mb.mobile.prReportingTracking(player.options().mb_video_id,1);loadAd();return}var isInit=Mb.mobile.canvas.init(player);if(!isInit){Mb.mobile.prReportingTracking(player.options().mb_video_id,1);loadAd();return}player.vastTracker=new vast.tracker(ad,creative,player.options().mb_video_id);var errorOccurred=false,canplayFn=function(){this.vastTracker.load()},timeupdateFn=function(){
if(isNaN(this.vastTracker.assetDuration))this.vastTracker.assetDuration=this.duration();this.vastTracker.setProgress(this.currentTime())},playFn=function(){this.vastTracker.setPaused(false)},pauseFn=function(){this.vastTracker.setPaused(true)},errorFn=function(){vast.util.track(ad.errorURLTemplates,{ERRORCODE:405});errorOccurred=true;Mb.mobile.prReportingTracking(player.options().mb_video_id,3);player.trigger("ended")};player.on("canplay",canplayFn);player.on("timeupdate",timeupdateFn)
;player.on("play",playFn);player.on("pause",pauseFn);player.on("error",errorFn);player.one("ended",function(){player.off("canplay",canplayFn);player.off("timeupdate",timeupdateFn);player.off("play",playFn);player.off("pause",pauseFn);player.off("error",errorFn);if(!errorOccurred)this.vastTracker.complete()});foundCreative=true;window.mb_players[player.options().mb_video_id].current_adserver_id=adserver_id;window.mb_players[player.options().mb_video_id].ad_impression_called=0
;Mb.player.callBack.adMediaFileSelected(player.options().mb_video_id)}}else if(creative.type==="companion"&&!foundCompanion){player.vast.companion=creative;foundCompanion=true}}if(player.vastTracker){player.pause();break}else vast.util.track(ad.errorURLTemplates,{ERRORCODE:403})}}else Mb.player.callBack.adserverFailed(player.options().mb_video_id);if(!player.vastTracker){
if(!response)Mb.mobile.prReportingTracking(player.options().mb_video_id,4);else Mb.mobile.prReportingTracking(player.options().mb_video_id,1);loadAd()}})};loadAd()};player.vast.preroll=function(){player.ads.startLinearAdMode();player.vast.showControls=player.controls();if(player.vast.showControls)player.controls(false);var adSources=player.vast.sources;player.src(adSources);var clickthrough
;if(player.vastTracker.clickThroughURLTemplate)clickthrough=vast.util.resolveURLTemplates([player.vastTracker.clickThroughURLTemplate],{CACHEBUSTER:Math.round(Math.random()*1e10),CONTENTPLAYHEAD:player.vastTracker.progressFormated()})[0];var blocker=document.createElement("a");blocker.className="vast-blocker";blocker.href=clickthrough||"#";blocker.target="_blank";blocker.onclick=function(){if(Mb.isIphone()&&Mb.enableSyncAd){if(!Mb.mobile.canvas.isPlaying){Mb.mobile.canvas.play();return false}
}else{if(player.paused()){player.play();return false}}if(!player.vast.adClicked){var clicktrackers=player.vastTracker.clickTrackingURLTemplates;if(clicktrackers)player.vastTracker.trackURLs(clicktrackers);player.trigger("adclick");Mb.player.callBack.adClickTracking(player.options().mb_video_id);switch(player.vast.videoAdClickBehavior){case 0:player.vast.tearDown();try{Mb.syncad.prerollCompleted(Mb.syncad.mainPlayerId)}catch(e){return}break;case 1:
if(Mb.isIphone()&&Mb.enableSyncAd)Mb.mobile.canvas.pause();else player.pause();break}}else{if(Mb.isIphone()&&Mb.enableSyncAd)Mb.mobile.canvas.pause();else player.pause()}player.vast.adClicked=true};player.vast.blocker=blocker;player.el().insertBefore(blocker,player.controlBar.el());player.one("ended",player.vast.tearDown)};player.vast.tearDown=function(){player.vast.blocker.parentNode.removeChild(player.vast.blocker);player.off("ended",player.vast.tearDown);player.ads.endLinearAdMode()
;Mb.mobile.canvas.end();if(player.vast.showControls)player.controls(true)};player.vast.createSourceObjects=function(media_files){var sourcesByFormat={},i,j,tech;var techOrder=player.options().techOrder;for(i=0,j=techOrder.length;i<j;i++){var techName=techOrder[i].charAt(0).toUpperCase()+techOrder[i].slice(1);tech=window.Mb.videojs[techName];if(!tech)continue;if(tech.isSupported())for(var a=0,b=media_files.length;a<b;a++){var media_file=media_files[a];var source={type:media_file.mimeType,
src:media_file.fileURL};if(tech.canPlaySource(source)){if(sourcesByFormat[techOrder[i]]===undefined)sourcesByFormat[techOrder[i]]=[];sourcesByFormat[techOrder[i]].push({type:media_file.mimeType,src:media_file.fileURL.replace(/(\r\n|\n|\r)/gm,""),width:media_file.width,height:media_file.height})}}}var sources=[];for(j=0;j<techOrder.length;j++){tech=techOrder[j];if(sourcesByFormat[tech]!==undefined)for(i=0;i<sourcesByFormat[tech].length;i++)sources.push(sourcesByFormat[tech][i])}return sources}
;player.vast.videoAdClickBehavior=0;player.vast.adClicked=false;player.vast.getContent(settings.url)};vjs.plugin("vast",vastPlugin)})(window.Mb.videojs,window.DMVAST);if(Mb.adsEnabled)(function(vjs){"use strict";var extend=function(obj){var arg;var index;var key;for(index=1;index<arguments.length;index++){arg=arguments[index];for(key in arg){if(arg.hasOwnProperty(key)){obj[key]=arg[key]}}}return obj},ima_defaults={debug:false,timeout:8e3,prerollTimeout:100
},imaPlugin=function(options,readyCallback){var player=this;if(typeof player.ima.imaInitialized!=="undefined"&&player.ima.imaInitialized)return;player.ima.createAdContainer_=function(){var oldContainer=document.getElementById("ima-ad-container-mb");if(oldContainer!==null)oldContainer.parentNode.removeChild(oldContainer);vjsControls=player.getChild("controlBar");adContainerDiv=vjsControls.el().parentNode.insertBefore(document.createElement("div"),vjsControls.el())
;adContainerDiv.id="ima-ad-container-mb";adContainerDiv.style.width=player.width()+"px";adContainerDiv.style.height=player.height()+"px";adContainerDiv.style.display="none";adContainerDiv.addEventListener("mouseover",player.ima.showAdControls_,false);adContainerDiv.addEventListener("mouseout",player.ima.hideAdControls_,false);player.ima.createControls_();adDisplayContainer=new google.ima.AdDisplayContainer(adContainerDiv,contentPlayer)};player.ima.createControls_=function(){
controlsDiv=document.createElement("div");controlsDiv.id="ima-controls-div";controlsDiv.style.width="100%";countdownDiv=document.createElement("div");countdownDiv.id="ima-countdown-div";countdownDiv.innerHTML="Advertisement";countdownDiv.style.display=showCountdown?"block":"none";seekBarDiv=document.createElement("div");seekBarDiv.id="ima-seek-bar-div";seekBarDiv.style.width="100%";progressDiv=document.createElement("div");progressDiv.id="ima-progress-div"
;playPauseDiv=document.createElement("div");playPauseDiv.id="ima-play-pause-div";playPauseDiv.className="ima-playing";playPauseDiv.addEventListener("click",player.ima.onAdPlayPauseClick_,false);muteDiv=document.createElement("div");muteDiv.id="ima-mute-div";muteDiv.className="ima-non-muted";muteDiv.addEventListener("click",player.ima.onAdMuteClick_,false);adContainerDiv.insertBefore(controlsDiv,adContainerDiv.childNodes[adContainerDiv.childNodes.length])
;controlsDiv.insertBefore(countdownDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(seekBarDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(playPauseDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(muteDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);seekBarDiv.insertBefore(progressDiv,seekBarDiv.childNodes[controlsDiv.childNodes.length])}
;player.ima.initializeAdDisplayContainer=function(){if(adDisplayContainerInitialized)return;adDisplayContainerInitialized=true;adDisplayContainer.initialize()};player.ima.requestAds=function(){if(!adDisplayContainerInitialized){adDisplayContainerInitialized=true;adDisplayContainer.initialize()}var adsRequest=new google.ima.AdsRequest;adsRequest.adsResponse=settings.adTagResponse;adsRequest.linearAdSlotWidth=player.width();adsRequest.linearAdSlotHeight=player.height()
;adsRequest.nonLinearAdSlotWidth=settings.nonLinearWidth||player.width();adsRequest.nonLinearAdSlotHeight=settings.nonLinearHeight||player.height()/3;adsLoader.requestAds(adsRequest)};player.ima.onAdsManagerLoaded_=function(adsManagerLoadedEvent){adsManager=adsManagerLoadedEvent.getAdsManager(contentPlayheadTracker,adsRenderingSettings);adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,player.ima.onAdError_)
;adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,player.ima.onContentPauseRequested_);adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,player.ima.onContentResumeRequested_);adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,player.ima.onAdLoaded_);adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,player.ima.onAdStarted_);adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,player.ima.onAdComplete_)
;adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,player.ima.onAdSkipped_);adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,player.ima.onAdSkipped_);adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,player.ima.onAdImpression_);adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,player.ima.onAdFirstQuartile_);adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,player.ima.onAdMidPoint_)
;adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,player.ima.onAdThirdQuartile_);adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,player.ima.onAdClick_);adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,player.ima.onAdPaused_);adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,player.ima.onAdResumed_);player.trigger("adsready");player.pause()};player.ima.startAd=function(){try{adsManager.start();adStartCalled=true}catch(adError){
player.ima.onAdError_(adError)}};player.ima.start=function(){try{adsManager.init(player.width(),player.height(),google.ima.ViewMode.NORMAL);adsManager.setVolume(player.muted()?Mb.player.muteVolume:player.volume());if(player.muted())Mb.player.isMuted=1;else Mb.player.isMuted=0;if(Mb.enableSyncAd!=1){adsManager.start();adStartCalled=true}}catch(adError){player.ima.onAdError_(adError)}};player.ima.onAdsLoaderError_=function(event){
var empty_vast_errors=[google.ima.AdError.ErrorCode.VAST_ASSET_NOT_FOUND,google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE,google.ima.AdError.ErrorCode.VAST_LINEAR_ASSET_MISMATCH,google.ima.AdError.ErrorCode.VAST_NO_ADS_AFTER_WRAPPER,google.ima.AdError.ErrorCode.VAST_NONLINEAR_ASSET_MISMATCH];var no_vast_errors=[google.ima.AdError.ErrorCode.FAILED_TO_REQUEST_ADS,google.ima.AdError.ErrorCode.VAST_LOAD_TIMEOUT];var errorId=0;if(typeof event.getError!=="undefined"){
errorId=event.getError().getErrorCode();Mb.helpers.log("AdsLoader error: "+event.getError())}else{errorId=3;Mb.helpers.log("AdsLoader error: "+event)}if(adsManager){adsManager.destroy()}if(empty_vast_errors.indexOf(errorId)>-1)Mb.mobile.prReportingTracking(player.options().mb_video_id,1);else if(no_vast_errors.indexOf(errorId)>-1)Mb.mobile.prReportingTracking(player.options().mb_video_id,4);else Mb.mobile.prReportingTracking(player.options().mb_video_id,3);player.trigger("adsloaderror")}
;player.ima.onAdError_=function(adErrorEvent){if(typeof adErrorEvent.getError!=="undefined")Mb.helpers.log("Ad error: "+adErrorEvent.getError());else Mb.helpers.log("Ad error: "+adErrorEvent);adsManager.destroy();adContainerDiv.style.display="none";Mb.mobile.prReportingTracking(player.options().mb_video_id,3);player.trigger("adserror")};player.ima.onContentPauseRequested_=function(adEvent){adsActive=true;adPlaying=true;player.off("ended",localContentEndedListener)
;if(adEvent.getAd().getAdPodInfo().getPodIndex()!=-1){player.ads.startLinearAdMode()}adContainerDiv.style.display="block";controlsDiv.style.display="block";vjsControls.hide();player.pause()};player.ima.onContentResumeRequested_=function(adEvent){adsActive=false;adPlaying=false;player.on("ended",localContentEndedListener);adContainerDiv.style.display="none";vjsControls.unHide();if(!currentAd){player.ads.endLinearAdMode()}else if(!contentComplete&&currentAd.getAdPodInfo().getPodIndex()!=-1){
player.ads.endLinearAdMode()}countdownDiv.innerHTML="";if(player.volume()==0||player.volume()==Mb.player.muteVolume){player.volume(1);player.muted(1)}if(typeof window.MB_PAUSE_AFTER_AD!=="undefined"&&window.MB_PAUSE_AFTER_AD==0||typeof window.MB_PAUSE_AFTER_AD==="undefined")player.play()};player.ima.onAdLoaded_=function(adEvent){if(!adEvent.getAd().isLinear()){if(adsManager){adsManager.destroy();adsManager=null}Mb.helpers.log("Ad not linear")
;Mb.mobile.prReportingTracking(player.options().mb_video_id,3);player.trigger("adserror");return}this.adUrl=adEvent.getAdData().mediaUrl;this.adType=adEvent.getAd().getContentType();if(this.adType==""){this.adType="application/javascript";this.adUrl=adEvent.getAd().getDescription()}Mb.player.callBack.adMediaFileSelected(player.options().mb_video_id);Mb.player.callBack.adLoaded(player.options().mb_video_id);if(adsManager)adsManager.setVolume(player.muted()?Mb.player.muteVolume:player.volume())
;if(player.muted())Mb.player.isMuted=1;else Mb.player.isMuted=0};player.ima.onAdStarted_=function(adEvent){adStarted=true;currentAd=adEvent.getAd();if(currentAd.isLinear()){adTrackingTimer=setInterval(player.ima.onAdPlayheadTrackerInterval_,250);adContainerDiv.className=""}else{adContainerDiv.className="bumpable-ima-ad-container"}Mb.player.callBack.adStarted(player.options().mb_video_id);Mb.player.callBack.prerollStarted(player.options().mb_video_id)
;Mb.mobile.prReportingTracking(player.options().mb_video_id,2)};player.ima.onAdComplete_=function(adEvent){player.ima.adCompleted=true;if(currentAd.isLinear())clearInterval(adTrackingTimer);window.setTimeout(function(){Mb.player.callBack.adComplete(player.options().mb_video_id);Mb.player.callBack.adCompleted(player.options().mb_video_id)},0)};player.ima.onAdImpression_=function(adEvent){Mb.player.callBack.adImpression(player.options().mb_video_id)}
;player.ima.onAdFirstQuartile_=function(adEvent){Mb.player.callBack.adFirstQuartile(player.options().mb_video_id)};player.ima.onAdMidPoint_=function(adEvent){Mb.player.callBack.adMidPoint(player.options().mb_video_id)};player.ima.onAdThirdQuartile_=function(adEvent){Mb.player.callBack.adThirdQuartile(player.options().mb_video_id)};player.ima.onAdSkipped_=function(adEvent){if(currentAd.isLinear()){clearInterval(adTrackingTimer);Mb.player.callBack.adCloseLinear(player.options().mb_video_id)}
Mb.helpers.log("Ad Skipped ("+player.options().mb_video_id+")");try{Mb.syncad.prerollCompleted(player.options().mb_video_id)}catch(e){return}};player.ima.adSkipped_=function(){if(!player.ima.isSkipped){this.endIMA_();player.ima.isSkipped=true}};player.ima.onAdPaused_=function(adEvent){Mb.player.callBack.adPaused(player.options().mb_video_id)};player.ima.onAdResumed_=function(adEvent){Mb.player.callBack.adResumed(player.options().mb_video_id)};player.ima.onAdClick_=function(adEvent){
if(!adClicked)Mb.player.callBack.adClickTracking(player.options().mb_video_id);switch(videoAdClickBehavior){case 0:player.ima.endIMA_();break;case 1:playPauseDiv.className="ima-paused";adsManager.pause();adPlaying=false;break}adClicked=true};player.ima.onAdPlayheadTrackerInterval_=function(){var remainingTime=adsManager.getRemainingTime();var duration=currentAd.getDuration();var currentTime=duration-remainingTime;currentTime=currentTime>0?currentTime:0;var isPod=false;var adPosition,totalAds
;if(currentAd.getAdPodInfo()){isPod=true;adPosition=currentAd.getAdPodInfo().getAdPosition();totalAds=currentAd.getAdPodInfo().getTotalAds()}var remainingMinutes=Math.floor(remainingTime/60);var remainingSeconds=Math.floor(remainingTime%60);if(remainingSeconds.toString().length<2){remainingSeconds="0"+remainingSeconds}var podCount=": ";if(isPod){podCount=" ("+adPosition+" of "+totalAds+"): "}countdownDiv.innerHTML="Advertisement"+podCount+remainingMinutes+":"+remainingSeconds
;var playProgressRatio=currentTime/duration;var playProgressPercent=playProgressRatio*100;progressDiv.style.width=playProgressPercent+"%"};player.ima.hideAdControls_=function(){playPauseDiv.style.display="none";muteDiv.style.display="none";controlsDiv.style.height="14px"};player.ima.showAdControls_=function(){controlsDiv.style.height="37px";playPauseDiv.style.display="block";muteDiv.style.display="block"};player.ima.onAdPlayPauseClick_=function(){if(adPlaying){playPauseDiv.className="ima-paused"
;adsManager.pause();adPlaying=false}else{playPauseDiv.className="ima-playing";adsManager.resume();adPlaying=true}};player.ima.onAdMuteClick_=function(){Mb.player.stopMouseOverVolumeEvents=true;player.off("mouseover");player.off("mouseout");if(adMuted){muteDiv.className="ima-non-muted";adsManager.setVolume(1);player.volume(1);player.muted(false);adMuted=false;Mb.player.isMuted=0}else{muteDiv.className="ima-muted";adsManager.setVolume(Mb.player.muteVolume);player.volume(Mb.player.muteVolume)
;player.muted(true);adMuted=true;Mb.player.isMuted=1}};player.ima.onAdFullscreenClick_=function(){if(player.isFullscreen()){player.exitFullscreen()}else{player.requestFullscreen()}};player.ima.onFullscreenChange_=function(){if(player.isFullscreen()){adContainerDiv.style.width=window.screen.width+"px";adContainerDiv.style.height=window.screen.height+"px";adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)}else{adContainerDiv.style.width=player.width()+"px"
;adContainerDiv.style.height=player.height()+"px";adsManager.resize(player.width(),player.height(),google.ima.ViewMode.NORMAL)}};player.ima.changeVolume=function(volume){if(adsManager)adsManager.setVolume(volume);if(volume==0)Mb.player.isMuted=1;else Mb.player.isMuted=0;if(volume==0){adMuted=true;muteDiv.className="ima-muted"}else{adMuted=false;muteDiv.className="ima-non-muted"}};player.ima.seekContentToZero_=function(){player.off("loadedmetadata",player.ima.seekContentToZero_)
;player.currentTime(0)};player.ima.playContentFromZero_=function(){player.off("loadedmetadata",player.ima.playContentFromZero_);player.currentTime(0);player.play()};player.ima.resetIMA_=function(){if(adsManager){adsManager.destroy();adsManager=null}if(adsLoader&&!contentComplete){adsLoader.contentComplete()}contentComplete=false};player.ima.stopIMA_=function(){if(typeof currentAd!=="undefined"&&currentAd.isLinear())clearInterval(adTrackingTimer);if(adsManager)adsManager.destroy();adsActive=false
;adPlaying=false;if(adContainerDiv.parentNode)adContainerDiv.parentNode.removeChild(adContainerDiv);if(vjsControls.el_!=null)vjsControls.unHide()};player.ima.endIMA_=function(){player.ima.stopIMA_();player.ads.endLinearAdMode()};player.ima.addEventListener=function(event,callback){if(adsManager){adsManager.addEventListener(event,callback)}};player.ima.getAdsManager=function(){return adsManager};player.ima.getAdDuration=function(){
if(typeof currentAd!=="undefined")return currentAd.getDuration();else return null};player.ima.setContent=function(contentSrc,adTag,playOnLoad){player.ima.resetIMA_();settings.adTagResponse=adTag?adTag:settings.adTagResponse;if(!!player.currentSrc()){player.pause()}if(contentSrc){player.src(contentSrc)}if(playOnLoad){player.on("loadedmetadata",player.ima.playContentFromZero_)}else{player.on("loadedmetadata",player.ima.seekContentToZero_)}};player.ima.setAdTagUrl=function(adTag){
settings.adTagUrl=adTag?adTag:settings.adTagUrl};player.ima.setAdTagResponse=function(adTagResponse){settings.adTagResponse=adTagResponse?adTagResponse:settings.adTagResponse};player.ima.setAdClickBehavior=function(click_behavior){videoAdClickBehavior=click_behavior};player.ima.setVpaidMode=function(vpaidMode){
if(vpaidMode=="INSECURE")adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE);else if(vpaidMode=="ENABLED")adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED)};player.ima.addContentEndedListener=function(listener){contentEndedListeners.push(listener)};player.ima.pauseAd=function(){if(adStarted&&adsActive&&adPlaying){playPauseDiv.className="ima-paused";adsManager.pause();adPlaying=false}};player.ima.resumeAd=function(){
if(!adStartCalled&&typeof adsManager!=="undefined")player.ima.startAd();else if(adStarted&&adsActive&&!adPlaying){playPauseDiv.className="ima-playing";adsManager.resume();adPlaying=true}};player.ima.setUpPlayerIntervals_=function(){updateTimeIntervalHandle=setInterval(player.ima.updateCurrentTime,seekCheckInterval);seekCheckIntervalHandle=setInterval(player.ima.checkForSeeking,seekCheckInterval)};player.ima.updateCurrentTime=function(){if(!contentPlayheadTracker.seeking&&player.el_!==null){
contentPlayheadTracker.currentTime=player.currentTime()}};player.ima.checkForSeeking=function(){if(player.el_===null)return;var tempCurrentTime=player.currentTime();var diff=(tempCurrentTime-contentPlayheadTracker.previousTime)*1e3;if(Math.abs(diff)>seekCheckInterval+seekThreshold){contentPlayheadTracker.seeking=true}else{contentPlayheadTracker.seeking=false}contentPlayheadTracker.previousTime=player.currentTime()};player.ima.setShowCountdown=function(showCountdownIn){
showCountdown=showCountdownIn;countdownDiv.style.display=showCountdown?"block":"none"};player.ima.clearIntervals=function(adEvent){clearInterval(updateTimeIntervalHandle);clearInterval(seekCheckIntervalHandle)};var VERSION="0.2.0";var settings;var contentPlayer;var showCountdown;var vjsControls;var adContainerDiv;var controlsDiv;var countdownDiv;var seekBarDiv;var progressDiv;var playPauseDiv;var muteDiv;var adDisplayContainer;var adDisplayContainerInitialized=false
;player.ima.imaInitialized=false;player.ima.isSkipped=false;var adsLoader;var adsManager;var adsRenderingSettings=null;var adTagUrl;var adTagResponse;var currentAd;var contentTrackingTimer;var adTrackingTimer;var adsActive=false;var adPlaying=false;var adStartCalled=false;var adStarted=false;var adMuted=false;var adClicked=false;var contentComplete=false;var updateTimeIntervalHandle;var seekCheckIntervalHandle;var seekCheckInterval=1e3;var seekThreshold=100;var contentPlayheadTracker={
currentTime:0,previousTime:0,seeking:false,duration:0};var adPlayheadTracker={currentTime:0,duration:0,isPod:false,adPosition:0,totalAds:0};var contentEndedListeners=[];var videoAdClickBehavior=0;var localContentEndedListener=function(){if(adsLoader&&!contentComplete){adsLoader.contentComplete();contentComplete=true}for(var index in contentEndedListeners){contentEndedListeners[index]()}clearInterval(updateTimeIntervalHandle);clearInterval(seekCheckIntervalHandle)
;player.one("play",player.ima.setUpPlayerIntervals_)};settings=extend({},ima_defaults,options||{});if(!settings["id"]){Mb.helpers.log("Error: must provide id of video.js div");return}contentPlayer=document.getElementById(settings["id"]+"_html5_api");showCountdown=true;if(settings["showCountdown"]==false){showCountdown=false}player.one("play",player.ima.setUpPlayerIntervals_);player.on("ended",localContentEndedListener);var contrib_ads_defaults={debug:settings.debug,timeout:settings.timeout,
prerollTimeout:settings.prerollTimeout};var ads_plugin_settings=extend({},contrib_ads_defaults,options["contribAdsSettings"]||{});if(typeof player.ads==="function")player.ads(ads_plugin_settings);adsRenderingSettings=new google.ima.AdsRenderingSettings;adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=true;if(settings["adsRenderingSettings"]){for(var setting in settings["adsRenderingSettings"]){adsRenderingSettings[setting]=settings["adsRenderingSettings"][setting]}}
if(settings["locale"]){google.ima.settings.setLocale(settings["locale"])}player.ima.createAdContainer_();adsLoader=new google.ima.AdsLoader(adDisplayContainer);adsLoader.getSettings().setVpaidAllowed(true);if(settings.vpaidAllowed==false){adsLoader.getSettings().setVpaidAllowed(false)}if(settings.locale){adsLoader.getSettings().setLocale(settings.locale)}adsLoader.getSettings().setPlayerType("videojs-ima");adsLoader.getSettings().setPlayerVersion(VERSION)
;adsLoader.getSettings().setDisableFlashAds(true);adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,player.ima.onAdsManagerLoaded_,false);adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,player.ima.onAdsLoaderError_,false);if(!readyCallback){readyCallback=player.ima.start}player.on("readyforpreroll",readyCallback);player.on("fullscreenchange",player.ima.onFullscreenChange_);player.ima.imaInitialized=true};vjs.plugin("ima",imaPlugin)
})(window.Mb.videojs);var MB_mobile={addMBHTML:function(id){var tmp=document.getElementById("mediabongPopinContent_"+id);if(tmp!=null&&tmp.parentNode!=null)tmp.parentNode.removeChild(tmp)
;var html='<div id="mediabongPopinContent_'+id+'" class="mediabongPopinContent">'+'<div>Votre vid&eacute;o commencera dans <span id="mediabongSecArea_'+id+'" >___</span> seconde(s)...</div>'+'<button type="button" name="" value="" onclick="Mb.mobile.returnToAd(\''+id+'\')" class="choicesElem mediaBongGreen">Reprendre le visionnage</button><br/>'+'<button type="button" name="" value="" onclick="Mb.mobile.goToWebAd(\''+id+'\')" class="mediabongAdLink choicesElem mediaBongOrange">Aller sur le site de l&#39;annonceur</button>'+"</div>",popMB=document.createElement("div"),overlayMB=document.createElement("div")
;popMB.setAttribute("id","mediabongPopin_"+id);popMB.className="mediabongPopin";popMB.style.display="none";popMB.innerHTML=html;popMB.style.width=mb_players[id].width+"px";popMB.style.height=mb_players[id].height+"px";document.getElementById(id).appendChild(popMB);document.getElementById("mediabongPopinContent_"+id).style.height=mb_players[id].height-25+"px"},initialize:function(id){var serverList=new Array;for(idx in mb_players[id].jsonDoc.mobile_adservers)serverList.push({
serverId:mb_players[id].jsonDoc.mobile_adservers[idx].id,apiAddress:mb_players[id].jsonDoc.mobile_adservers[idx].url});var options={ads:{skipAd:{enabled:false,timeOut:5},servers:serverList,schedule:[{position:"pre-roll"}]}};var container=document.getElementById(id),parentContainer=container.parentNode;if(mb_players[id].myPlayer!=null)mb_players[id].myPlayer.dispose();var player=document.createElement("video"),_src=document.createElement("source"),_title=document.createElement("div")
;player=document.createElement("video");player.id="videoContent_"+id;player.className="video-js vjs-default-skin";player.setAttribute("preload","none");player.setAttribute("controls","controls");player.setAttribute("data-setup",'{"nativeControlsForTouch": true, "controls":true}');player.setAttribute("webkit-transform-style","preserve-3d");player.setAttribute("webkit-playsinline","true");player.setAttribute("width",parentContainer.offsetWidth)
;player.setAttribute("height",parentContainer.offsetHeight);player.poster="//static.mediabong.com/picture/e/"+parentContainer.offsetWidth+"/"+parentContainer.offsetHeight+"/"+mb_players[id].jsonDoc.preview_file_enc;_src.src=mb_players[id].jsonDoc.video_file;_src.type="video/mp4";player.appendChild(_src);var tmp=document.getElementById("video_title_"+id);if(tmp!=null&&tmp.parentNode!=null)tmp.parentNode.removeChild(tmp);_title.innerHTML=mb_players[id].jsonDoc.video_title
;_title.id="video_title_"+id;_title.style.cssText="display: none; background-color: black;width: "+mb_players[id].width+"px;color: #fff;text-align: center;overflow: hidden; white-space: nowrap;";document.getElementById(id).style.position="relative";Mb.mobile.addMBHTML(id);document.getElementById(id).innerHTML="";document.getElementById(id).appendChild(player);document.getElementById(id).appendChild(_title);options.mb_video_id=id;Mb.mobile.loadPlayer(id,options)},loadPlayer:function(id,options){
mb_players[id].myPlayer=Mb.videojs("videoContent_"+id,options).ready(function(){Mb.playerIsHtml5=true;Mb.player.html5Player[id]=this;var printUrl=mb_players[id].server+"/print.php?rnd="+Math.random()+"&m=1&sessid="+Mb.sessid+"&sid="+mb_players[id].snap_id+"&url="+encodeURIComponent(document.location.href);this.isIMA=true;if(Mb.isIphone()&&Mb.enableSyncAd)this.isIMA=false;Mb.player.callBack.playerReady(id)})},parseUrl:function(url,serverId){if(typeof url!="string")return url;var placeHolder={
"[referer]":encodeURIComponent(document.location.href),"[urldiff]":encodeURIComponent(document.location.href),"[timestamp]":(new Date).getTime(),"[rnd]":(new Date).getTime(),"[adCallId]":serverId};for(var ph in placeHolder)url=url.replace(ph,placeHolder[ph]);return url},updateTimeLeft:function(id,duration){var _duration=parseInt(duration);document.getElementById("mediabongSecArea_"+id).innerHTML=_duration},returnToAd:function(id){window.mb_players[id].myPlayer.el.style.visibility="visible"
;window.mb_players[id].myPlayer.play()},quitMsg:function(id){document.getElementById("mediabongPopin_"+id).style.display="none";window.mb_players[id].myPlayer.el.style.visibility="visible"},goToWebAd:function(id){window.mb_players[id].myPlayer.el.style.visibility="visible";var _v=window.mb_players[id].myPlayer.values;if(_v.currentSlot&&_v.currentSlot.link){window.open(_v.currentSlot.link);window.mb_players[id].myPlayer.vast.onClick()}},prReportingTracking:function(playerId,reporting_value){
var player=window.mb_players[playerId].myPlayer;var adid=player.getAdServerId();var url=player.getAdServerReportingUrl();Mb.helpers.loadUrl(Mb.helpers.parseUrl(url,{ad_server_id:adid,reporting_value:reporting_value},playerId),"text/javascript","script",function(){});if(reporting_value==3||reporting_value==4)Mb.player.callBack.adError(playerId)},canvas:{mp3player:null,mpgplayer:null,canvasplayer:null,mbplayer:null,timeIntervalMpg:null,timeUpdateInterval:null,isMpgLoaded:false,isPlaying:false,
timeout:false,hasStarted:false,isSkipped:false,wantedVolume:0,audio:null,audioContext:null,quartilesTrackers:null,videoHasAudio:true,mp3Enabled:false,init:function(player){var selected_adsource=null;for(var i in player.vast.sources){if(player.vast.sources[i].type=="video/mp4"){selected_adsource=player.vast.sources[i].src;break}}if(!selected_adsource)return false;var tech=player.el().querySelector(".vjs-tech");Mb.mobile.canvas.mbplayer=player;Mb.mobile.canvas.mbplayer.on("adtimeout",function(){
Mb.mobile.canvas.end();Mb.mobile.canvas.timeout=true;Mb.mobile.prReportingTracking(player.options().mb_video_id,3);try{if(!Mb.syncad.prerollCompletedDone)Mb.syncad.prerollCompleted(player.options().mb_video_id)}catch(e){return}});var response=null;var mp4Url=mb_players[player.options().mb_video_id].server+"/ios/video?src="+encodeURIComponent(selected_adsource);try{response=JSON.parse(Mb.helpers.doXdr(mp4Url,false,false))}catch(e){return false}
if(typeof response["exists"]==="undefined"||!response["exists"]||response["video_url"]==""&&response["mbjpeg_url"]=="")return false;if(response==null)return false;var mbjpgUrl=response["mbjpeg_url"];var mpgUrl=response["video_url"];var mp3Url=response["sound_url"];Mb.mobile.canvas.createElements(tech);var MbMpegLoaded=function(){if(typeof Mb==="undefined"||Mb.mobile.canvas.timeout)return;Mb.mobile.canvas.isMpgLoaded=true;tech.style.display="none";Mb.mobile.canvas.canvasplayer.style.display=""
;Mb.mobile.canvas.mbplayer.trigger("adsready");Mb.mobile.canvas.mbplayer.loadingSpinner.el().style.display="none";Mb.mobile.canvas.initEvents();Mb.player.callBack.adLoaded(player.options().mb_video_id);Mb.mobile.canvas.initEventsMpg();if(Mb.mobile.canvas.isPlaying)Mb.mobile.canvas.play()};if(mp3Url!=""){if(Mb.mobile.canvas.audio!=null)Mb.mobile.canvas.audio.init(mp3Url);else{var audioContext=window.AudioContext||window.webkitAudioContext;if(audioContext){
Mb.mobile.canvas.audioContext=new audioContext;Mb.mobile.canvas.apiAudio.init(mp3Url)}else Mb.mobile.canvas.htmlAudio.init(mp3Url)}}else{Mb.helpers.log("Info : No audio data.");Mb.mobile.canvas.videoHasAudio=false}if(Mb.iOSversion()<8&&Mb.iOSversion()>0&&mbjpgUrl!=""||mpgUrl==""){Mb.mobile.canvas.canvasplayer.width="640";Mb.mobile.canvas.canvasplayer.height="360";Mb.mobile.canvas.mpgplayer=new mbjpeg(mbjpgUrl,{canvas:Mb.mobile.canvas.canvasplayer,onload:MbMpegLoaded,
onfinished:Mb.mobile.canvas.handleEndedEvent})}else Mb.mobile.canvas.mpgplayer=new jsmpeg(mpgUrl,{canvas:Mb.mobile.canvas.canvasplayer,seekable:true,onload:MbMpegLoaded,onfinished:Mb.mobile.canvas.handleEndedEvent});Mb.mobile.canvas.quartilesTrackers={firstQuartile:Mb.player.callBack.adFirstQuartile,midpoint:Mb.player.callBack.adMidPoint,thirdQuartile:Mb.player.callBack.adThirdQuartile};return true},createElements:function(tech){if(Mb.mobile.canvas.canvasplayer==null){
var canvas=document.getElementById("mb_canvas");if(canvas==null){Mb.mobile.canvas.canvasplayer=document.createElement("canvas");Mb.mobile.canvas.canvasplayer.id="mb_canvas";Mb.mobile.canvas.canvasplayer.style.display="none";Mb.mobile.canvas.canvasplayer.style.width="100%";Mb.mobile.canvas.canvasplayer.style.height="100%";tech.parentNode.insertBefore(Mb.mobile.canvas.canvasplayer,tech.nextSibling)}else Mb.mobile.canvas.canvasplayer=canvas;tech.style.display="none"}
if(Mb.mobile.canvas.mp3player==null){Mb.mobile.canvas.mp3player=document.createElement("audio");Mb.mobile.canvas.mp3player.id="mb_audio"}},initEvents:function(){Mb.mobile.canvas.handleTimeUpdate();Mb.mobile.canvas.timeUpdateInterval=window.setInterval(Mb.mobile.canvas.handleTimeUpdate,1e3);Mb.intervals.push(Mb.mobile.canvas.timeUpdateInterval)},initEventsMpg:function(){if(Mb.mobile.canvas.videoHasAudio){Mb.mobile.canvas.timeIntervalMpg=window.setInterval(function(){
if(Mb.mobile.canvas.isPlaying&&Mb.mobile.canvas.hasStarted)Mb.mobile.canvas.checkSyncAudio()},250);Mb.intervals.push(Mb.mobile.canvas.timeIntervalMpg)}},play:function(){if(Mb.mobile.canvas.mbplayer!=null){Mb.mobile.canvas.isPlaying=true;if(!Mb.mobile.canvas.isMpgLoaded)return;Mb.mobile.canvas.mpgplayer.play();if(Mb.mobile.canvas.videoHasAudio)Mb.mobile.canvas.audio.play();if(!Mb.mobile.canvas.hasStarted){Mb.mobile.canvas.mbplayer.vastTracker.load();Mb.mobile.canvas.hasStarted=true
;Mb.player.callBack.adStarted(Mb.mobile.canvas.mbplayer.options().mb_video_id);Mb.player.callBack.adImpression(Mb.mobile.canvas.mbplayer.options().mb_video_id);Mb.player.callBack.prerollStarted(Mb.mobile.canvas.mbplayer.options().mb_video_id);Mb.mobile.prReportingTracking(Mb.mobile.canvas.mbplayer.options().mb_video_id,2)}else Mb.player.callBack.adResumed(Mb.mobile.canvas.mbplayer.options().mb_video_id)}},pause:function(){Mb.mobile.canvas.isPlaying=false;if(!Mb.mobile.canvas.isMpgLoaded)return
;Mb.player.callBack.adPaused(Mb.mobile.canvas.mbplayer.options().mb_video_id);Mb.mobile.canvas.mpgplayer.pause();if(Mb.mobile.canvas.videoHasAudio)Mb.mobile.canvas.audio.pause()},volume:function(vol){if(!Mb.mobile.canvas.videoHasAudio)return;if(Mb.mobile.canvas.audio!=null)Mb.mobile.canvas.audio.volume(vol);if(vol==0)Mb.player.isMuted=1;else Mb.player.isMuted=0},skipped:function(){if(!Mb.mobile.canvas.isSkipped){Mb.mobile.canvas.mbplayer.vastTracker.skip()
;Mb.mobile.canvas.mbplayer.vast.tearDown();Mb.mobile.canvas.isSkipped=true}},end:function(){Mb.mobile.canvas.mbplayer.off("timeupdate");var tech=Mb.mobile.canvas.mbplayer.el().querySelector(".vjs-tech");tech.style.display="";if(Mb.mobile.canvas.canvasplayer!=null)Mb.mobile.canvas.canvasplayer.style.display="none";if(Mb.mobile.canvas.mpgplayer!=null)Mb.mobile.canvas.mpgplayer.stop();if(Mb.mobile.canvas.audio!=null)Mb.mobile.canvas.audio.end();Mb.mobile.canvas.mpgplayer=null
;Mb.mobile.canvas.canvasplayer=null;window.clearInterval(Mb.mobile.canvas.timeIntervalMpg);window.clearInterval(Mb.mobile.canvas.timeUpdateInterval)},abort:function(player){player.el().querySelector(".vjs-tech").style.display="";player.loadingSpinner.el().style.display="none";player.off("timeupdate");player.off("contentupdate");player.trigger("adabort")},handleTimeUpdate:function(){var currentTimeMp3=0;if(Mb.mobile.canvas.videoHasAudio)currentTimeMp3=Mb.mobile.canvas.audio.currentTime()
;var currentTimeMpg=Mb.mobile.canvas.mpgplayer.currentTime;if(currentTimeMp3>currentTimeMpg)var currentTime=currentTimeMp3;else var currentTime=currentTimeMpg;Mb.mobile.canvas.mbplayer.vastTracker.setProgress(currentTime)},handleEndedEvent:function(){Mb.mobile.canvas.mbplayer.trigger("ended")},checkSyncAudio:function(){if(Mb.mobile.canvas.audio){var diffSync=Mb.mobile.canvas.audio.currentTime()-Mb.mobile.canvas.mpgplayer.currentTime
;if(diffSync>=.5)Mb.mobile.canvas.mpgplayer.seekToFrame(Mb.mobile.canvas.audio.currentTime()*Mb.mobile.canvas.mpgplayer.pictureRate|0,true);else if(diffSync<=-.5)Mb.mobile.canvas.audio.setCurrentTime(Mb.mobile.canvas.mpgplayer.currentTime)}},handleQuartilesTracking:function(quartile){Mb.mobile.canvas.quartilesTrackers[quartile](Mb.mobile.canvas.mbplayer.options().mb_video_id)},reset:function(){Mb.mobile.canvas.mpgplayer=null;Mb.mobile.canvas.canvasplayer=null;Mb.mobile.canvas.mbplayer=null
;Mb.mobile.canvas.timeIntervalMpg=null;Mb.mobile.canvas.timeUpdateInterval=null;Mb.mobile.canvas.isMpgLoaded=false;Mb.mobile.canvas.isPlaying=false;Mb.mobile.canvas.timeout=false;Mb.mobile.canvas.hasStarted=false;Mb.mobile.canvas.isSkipped=false;Mb.mobile.canvas.quartilesTrackers=null;Mb.mobile.canvas.videoHasAudio=true;if(Mb.mobile.canvas.audio!=null)Mb.mobile.canvas.audio.reset()},apiAudio:{source:null,gainNode:null,buffer:null,stopped:true,startOffset:0,startTime:0,audioEnabled:false,
init:function(mp3Url){Mb.mobile.canvas.apiAudio.loadMp3(mp3Url);Mb.mobile.canvas.audio=Mb.mobile.canvas.apiAudio},loadMp3:function(mp3Url){var request=new XMLHttpRequest;request.open("GET",mp3Url,true);request.responseType="arraybuffer";request.addEventListener("load",Mb.mobile.canvas.apiAudio.mp3loaded,false);Mb.addToEventsList("load",Mb.mobile.canvas.apiAudio.mp3loaded,request,false);request.send()},mp3loaded:function(event){var request=event.target;var response=request.response
;Mb.helpers.log("Info : Audio data decoding started.");Mb.mobile.canvas.audioContext.decodeAudioData(response,function(decodedData){Mb.helpers.log("Info : Audio data decoded.");Mb.mobile.canvas.apiAudio.buffer=decodedData;Mb.mobile.canvas.apiAudio.initAudio()},function(e){if(typeof e.err!=="undefined")Mb.helpers.log("Can't decode audio data : "+e.err);else Mb.helpers.log("Can't decode audio data : "+e);Mb.mobile.canvas.videoHasAudio=false})},initAudio:function(){
var source=Mb.mobile.canvas.audioContext.createBufferSource();var gainNode=Mb.mobile.canvas.audioContext.createGain();source.buffer=Mb.mobile.canvas.apiAudio.buffer;gainNode.gain.value=Mb.mobile.canvas.wantedVolume;source.connect(gainNode);gainNode.connect(Mb.mobile.canvas.audioContext.destination);Mb.mobile.canvas.apiAudio.source=source;Mb.mobile.canvas.apiAudio.gainNode=gainNode},play:function(currentTime){if(Mb.mobile.canvas.apiAudio.buffer!=null&&Mb.mobile.canvas.apiAudio.audioEnabled){
Mb.mobile.canvas.apiAudio.pause();Mb.mobile.canvas.apiAudio.initAudio();Mb.mobile.canvas.apiAudio.startTime=Mb.mobile.canvas.audioContext.currentTime;if(!currentTime){Mb.mobile.canvas.apiAudio.source.start(0,Mb.mobile.canvas.apiAudio.startOffset)}else{Mb.mobile.canvas.apiAudio.source.start(0,currentTime);Mb.mobile.canvas.apiAudio.startOffset=currentTime}Mb.mobile.canvas.apiAudio.stopped=false}},pause:function(){if(Mb.mobile.canvas.apiAudio.source!=null&&!Mb.mobile.canvas.apiAudio.stopped){
Mb.mobile.canvas.apiAudio.source.stop(0);Mb.mobile.canvas.apiAudio.startOffset+=Mb.mobile.canvas.audioContext.currentTime-Mb.mobile.canvas.apiAudio.startTime;Mb.mobile.canvas.apiAudio.stopped=true}},volume:function(vol){if(Mb.mobile.canvas.apiAudio.gainNode!=null){Mb.mobile.canvas.wantedVolume=vol;Mb.mobile.canvas.apiAudio.gainNode.gain.value=vol}},currentTime:function(){
if(Mb.mobile.canvas.apiAudio.stopped)var currentTime=Mb.mobile.canvas.apiAudio.startOffset;else var currentTime=Mb.mobile.canvas.apiAudio.startOffset+(Mb.mobile.canvas.audioContext.currentTime-Mb.mobile.canvas.apiAudio.startTime);return currentTime},setCurrentTime:function(currentTime){Mb.mobile.canvas.apiAudio.pause();Mb.mobile.canvas.apiAudio.play(currentTime)},enableUserGesture:function(initMp3Player){if(Mb.mobile.canvas.audioContext!=null){
var bufferSource=Mb.mobile.canvas.audioContext.createBufferSource();var buffer=Mb.mobile.canvas.audioContext.createBuffer(1,1,22050);bufferSource.buffer=buffer;bufferSource.connect(Mb.mobile.canvas.audioContext.destination);bufferSource.start(0);window.setTimeout(function(){if(typeof bufferSource.playbackState==="undefined"||typeof bufferSource.playbackState!=="undefined"&&(bufferSource.playbackState===bufferSource.PLAYING_STATE||bufferSource.playbackState===bufferSource.FINISHED_STATE)){
document.removeEventListener("touchcancel",initMp3Player);document.removeEventListener("touchstart",initMp3Player);Mb.mobile.canvas.mp3Enabled=true;bufferSource.disconnect();Mb.mobile.canvas.apiAudio.audioEnabled=true}},0)}},end:function(){Mb.mobile.canvas.apiAudio.pause();Mb.mobile.canvas.apiAudio.source=null;Mb.mobile.canvas.apiAudio.gainNode=null;Mb.mobile.canvas.apiAudio.buffer=null},reset:function(){Mb.mobile.canvas.apiAudio.source=null;Mb.mobile.canvas.apiAudio.gainNode=null
;Mb.mobile.canvas.apiAudio.buffer=null;Mb.mobile.canvas.apiAudio.stopped=true;Mb.mobile.canvas.apiAudio.startOffset=0;Mb.mobile.canvas.apiAudio.startTime=0}},htmlAudio:{init:function(mp3Url){Mb.mobile.canvas.mp3player.src=mp3Url;Mb.helpers.addEvent(Mb.mobile.canvas.mp3player,"error",Mb.mobile.canvas.htmlAudio.mp3LoadError);Mb.helpers.addEvent(Mb.mobile.canvas.mp3player,"canplay",Mb.mobile.canvas.htmlAudio.mp3Loaded);Mb.mobile.canvas.mp3player.preload="auto"
;Mb.mobile.canvas.audio=Mb.mobile.canvas.htmlAudio},mp3Loaded:function(event){if(Mb.mobile.canvas.mp3player.removeEventListener){Mb.mobile.canvas.mp3player.removeEventListener("error",Mb.mobile.canvas.htmlAudio.mp3LoadError,false);Mb.mobile.canvas.mp3player.removeEventListener("canplay",Mb.mobile.canvas.htmlAudio.mp3Loaded,false)}else if(Mb.mobile.canvas.mp3player.detachEvent){Mb.mobile.canvas.mp3player.detachEvent("onerror",Mb.mobile.canvas.htmlAudio.mp3LoadError)
;Mb.mobile.canvas.mp3player.detachEvent("oncanplay",Mb.mobile.canvas.htmlAudio.mp3Loaded)}},mp3LoadError:function(event){Mb.helpers.log("Error : Can't load audio data.");Mb.mobile.canvas.videoHasAudio=false},play:function(){if(Mb.mobile.canvas.wantedVolume!=0)Mb.mobile.canvas.mp3player.play()},pause:function(){Mb.mobile.canvas.mp3player.pause()},volume:function(vol){if(Mb.mobile.canvas.mp3player!=null){Mb.mobile.canvas.mp3player.volume=vol;Mb.mobile.canvas.wantedVolume=vol
;if(vol==0)Mb.mobile.canvas.mp3player.pause();else if(Mb.mobile.canvas.isPlaying&&Mb.mobile.canvas.hasStarted)Mb.mobile.canvas.mp3player.play()}},currentTime:function(){return Mb.mobile.canvas.mp3player.currentTime},setCurrentTime:function(currentTime){Mb.mobile.canvas.mp3player.currentTime=currentTime},enableUserGesture:function(initMp3Player){if(Mb.mobile.canvas.mp3player!=null&&Mb.mobile.canvas.videoHasAudio){Mb.mobile.canvas.mp3player.play()
;if(!Mb.mobile.canvas.isMpgLoaded||!Mb.mobile.canvas.isPlaying||Mb.mobile.canvas.wantedVolume==0)Mb.mobile.canvas.mp3player.pause();document.removeEventListener("touchcancel",initMp3Player);document.removeEventListener("touchstart",initMp3Player);Mb.mobile.canvas.mp3Enabled=true}},end:function(){Mb.mobile.canvas.mp3player.src=""},reset:function(){}}}};window.Mb.mobile=MB_mobile;(function(window){"use strict";var requestAnimFrame=function(){
return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();var jsmpeg=window.jsmpeg=function(url,opts){opts=opts||{};this.benchmark=!!opts.benchmark;this.canvas=opts.canvas||document.createElement("canvas");this.autoplay=!!opts.autoplay;this.loop=!!opts.loop;this.seekable=!!opts.seekable;this.externalLoadCallback=opts.onload||null;this.externalDecodeCallback=opts.ondecodeframe||null
;this.externalFinishedCallback=opts.onfinished||null;this.customIntraQuantMatrix=new Uint8Array(64);this.customNonIntraQuantMatrix=new Uint8Array(64);this.blockData=new Int32Array(64);this.zeroBlockData=new Int32Array(64);this.fillArray(this.zeroBlockData,0);if(!opts.forceCanvas2D&&this.initWebGL()){this.renderFrame=this.renderFrameGL}else{this.canvasContext=this.canvas.getContext("2d");this.renderFrame=this.renderFrame2D}if(url instanceof WebSocket){this.client=url
;this.client.onopen=this.initSocketClient.bind(this)}else{this.load(url)}};jsmpeg.prototype.intraFrames=[];jsmpeg.prototype.currentFrame=-1;jsmpeg.prototype.currentTime=0;jsmpeg.prototype.frameCount=0;jsmpeg.prototype.duration=0;jsmpeg.prototype.load=function(url){this.url=url;var request=new XMLHttpRequest;var that=this;request.onreadystatechange=function(){if(request.readyState==request.DONE&&request.status==200){that.loadCallback(request.response)}}
;request.onprogress=this.gl?this.updateLoaderGL.bind(this):this.updateLoader2D.bind(this);request.open("GET",url);request.responseType="arraybuffer";request.send()};jsmpeg.prototype.updateLoader2D=function(ev){var p=ev.loaded/ev.total,w=this.canvas.width,h=this.canvas.height,ctx=this.canvasContext;ctx.fillStyle="#222";ctx.fillRect(0,0,w,h);ctx.fillStyle="#fff";ctx.fillRect(0,h-h*p,w,h*p)};jsmpeg.prototype.updateLoaderGL=function(ev){var gl=this.gl
;gl.uniform1f(gl.getUniformLocation(this.loadingProgram,"loaded"),ev.loaded/ev.total);gl.drawArrays(gl.TRIANGLE_STRIP,0,4)};jsmpeg.prototype.loadCallback=function(file){this.buffer=new BitReader(file);if(this.seekable){this.collectIntraFrames();this.buffer.index=0}this.findStartCode(START_SEQUENCE);this.firstSequenceHeader=this.buffer.index;this.decodeSequenceHeader();this.duration=this.frameCount/this.pictureRate;this.nextFrame();if(this.autoplay){this.play()}if(this.externalLoadCallback){
this.externalLoadCallback(this)}};jsmpeg.prototype.collectIntraFrames=function(){var frame;for(frame=0;this.findStartCode(START_PICTURE)!==BitReader.NOT_FOUND;frame++){this.buffer.advance(10);if(this.buffer.getBits(3)==PICTURE_TYPE_I){this.intraFrames.push({frame:frame,index:this.buffer.index-13})}}this.frameCount=frame};jsmpeg.prototype.seekToFrame=function(seekFrame,seekExact){if(seekFrame<0||seekFrame>=this.frameCount||!this.intraFrames.length){return false}var target=null
;for(var i=0;i<this.intraFrames.length&&this.intraFrames[i].frame<=seekFrame;i++){target=this.intraFrames[i]}this.buffer.index=target.index;this.currentFrame=target.frame-1;if(seekExact){for(var frame=target.frame;frame<seekFrame;frame++){this.decodePicture(DECODE_SKIP_OUTPUT);this.findStartCode(START_PICTURE)}this.currentFrame=seekFrame-1}this.decodePicture();return true};jsmpeg.prototype.seekToTime=function(time,seekExact){this.seekToFrame(time*this.pictureRate|0,seekExact)}
;jsmpeg.prototype.play=function(file){if(this.playing){return}this.targetTime=this.now();this.playing=true;this.scheduleNextFrame()};jsmpeg.prototype.pause=function(file){this.playing=false};jsmpeg.prototype.stop=function(file){this.currentFrame=-1;if(this.buffer){this.buffer.index=this.firstSequenceHeader}this.playing=false;if(this.client){this.client.close();this.client=null}};jsmpeg.prototype.readCode=function(codeTable){var state=0;do{state=codeTable[state+this.buffer.getBits(1)]
}while(state>=0&&codeTable[state]!=0);return codeTable[state+2]};jsmpeg.prototype.findStartCode=function(code){var current=0;while(true){current=this.buffer.findNextMPEGStartCode();if(current==code||current==BitReader.NOT_FOUND){return current}}return BitReader.NOT_FOUND};jsmpeg.prototype.fillArray=function(a,value){for(var i=0,length=a.length;i<length;i++){a[i]=value}};jsmpeg.prototype.pictureRate=30;jsmpeg.prototype.lateTime=0;jsmpeg.prototype.firstSequenceHeader=0
;jsmpeg.prototype.targetTime=0;jsmpeg.prototype.benchmark=false;jsmpeg.prototype.benchFrame=0;jsmpeg.prototype.benchDecodeTimes=0;jsmpeg.prototype.benchAvgFrameTime=0;jsmpeg.prototype.now=function(){return window.performance?window.performance.now():Date.now()};jsmpeg.prototype.nextFrame=function(){if(!this.buffer){return}var frameStart=this.now();while(true){var code=this.buffer.findNextMPEGStartCode();if(code==START_SEQUENCE){this.decodeSequenceHeader()}else if(code==START_PICTURE){
if(this.playing){this.scheduleNextFrame()}this.decodePicture();this.benchDecodeTimes+=this.now()-frameStart;return this.canvas}else if(code==BitReader.NOT_FOUND){this.stop();if(this.externalFinishedCallback){this.externalFinishedCallback(this)}if(this.loop&&this.sequenceStarted){this.play()}return null}else{}}};jsmpeg.prototype.scheduleNextFrame=function(){this.lateTime=this.now()-this.targetTime;var wait=Math.max(0,1e3/this.pictureRate-this.lateTime);this.targetTime=this.now()+wait
;if(this.benchmark){this.benchFrame++;if(this.benchFrame>=120){this.benchAvgFrameTime=this.benchDecodeTimes/this.benchFrame;this.benchFrame=0;this.benchDecodeTimes=0;if(window.console){console.log("Average time per frame:",this.benchAvgFrameTime,"ms")}}setTimeout(this.nextFrame.bind(this),0)}else if(wait<18){this.scheduleAnimation()}else{setTimeout(this.scheduleAnimation.bind(this),wait)}};jsmpeg.prototype.scheduleAnimation=function(){requestAnimFrame(this.nextFrame.bind(this),this.canvas)}
;jsmpeg.prototype.decodeSequenceHeader=function(){this.width=this.buffer.getBits(12);this.height=this.buffer.getBits(12);this.buffer.advance(4);this.pictureRate=PICTURE_RATE[this.buffer.getBits(4)];this.buffer.advance(18+1+10+1);this.initBuffers();if(this.buffer.getBits(1)){for(var i=0;i<64;i++){this.customIntraQuantMatrix[ZIG_ZAG[i]]=this.buffer.getBits(8)}this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(var i=0;i<64;i++){
this.customNonIntraQuantMatrix[ZIG_ZAG[i]]=this.buffer.getBits(8)}this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}};jsmpeg.prototype.initBuffers=function(){this.intraQuantMatrix=DEFAULT_INTRA_QUANT_MATRIX;this.nonIntraQuantMatrix=DEFAULT_NON_INTRA_QUANT_MATRIX;this.mbWidth=this.width+15>>4;this.mbHeight=this.height+15>>4;this.mbSize=this.mbWidth*this.mbHeight;this.codedWidth=this.mbWidth<<4;this.codedHeight=this.mbHeight<<4;this.codedSize=this.codedWidth*this.codedHeight
;this.halfWidth=this.mbWidth<<3;this.halfHeight=this.mbHeight<<3;this.quarterSize=this.codedSize>>2;if(this.sequenceStarted){return}this.sequenceStarted=true;var MaybeClampedUint8Array=window.Uint8ClampedArray||window.Uint8Array;if(!window.Uint8ClampedArray){this.copyBlockToDestination=this.copyBlockToDestinationClamp;this.addBlockToDestination=this.addBlockToDestinationClamp}this.currentY=new MaybeClampedUint8Array(this.codedSize);this.currentY32=new Uint32Array(this.currentY.buffer)
;this.currentCr=new MaybeClampedUint8Array(this.codedSize>>2);this.currentCr32=new Uint32Array(this.currentCr.buffer);this.currentCb=new MaybeClampedUint8Array(this.codedSize>>2);this.currentCb32=new Uint32Array(this.currentCb.buffer);this.forwardY=new MaybeClampedUint8Array(this.codedSize);this.forwardY32=new Uint32Array(this.forwardY.buffer);this.forwardCr=new MaybeClampedUint8Array(this.codedSize>>2);this.forwardCr32=new Uint32Array(this.forwardCr.buffer)
;this.forwardCb=new MaybeClampedUint8Array(this.codedSize>>2);this.forwardCb32=new Uint32Array(this.forwardCb.buffer);this.canvas.width=this.width;this.canvas.height=this.height;if(this.gl){this.gl.useProgram(this.program);this.gl.viewport(0,0,this.width,this.height)}else{this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height);this.fillArray(this.currentRGBA.data,255)}};jsmpeg.prototype.currentY=null;jsmpeg.prototype.currentCr=null;jsmpeg.prototype.currentCb=null
;jsmpeg.prototype.currentRGBA=null;jsmpeg.prototype.pictureCodingType=0;jsmpeg.prototype.forwardY=null;jsmpeg.prototype.forwardCr=null;jsmpeg.prototype.forwardCb=null;jsmpeg.prototype.fullPelForward=false;jsmpeg.prototype.forwardFCode=0;jsmpeg.prototype.forwardRSize=0;jsmpeg.prototype.forwardF=0;jsmpeg.prototype.decodePicture=function(skipOutput){this.currentFrame++;this.currentTime=this.currentFrame/this.pictureRate;this.buffer.advance(10);this.pictureCodingType=this.buffer.getBits(3)
;this.buffer.advance(16);if(this.pictureCodingType<=0||this.pictureCodingType>=PICTURE_TYPE_B){return}if(this.pictureCodingType==PICTURE_TYPE_P){this.fullPelForward=this.buffer.getBits(1);this.forwardFCode=this.buffer.getBits(3);if(this.forwardFCode==0){return}this.forwardRSize=this.forwardFCode-1;this.forwardF=1<<this.forwardRSize}var code=0;do{code=this.buffer.findNextMPEGStartCode()}while(code==START_EXTENSION||code==START_USER_DATA);while(code>=START_SLICE_FIRST&&code<=START_SLICE_LAST){
this.decodeSlice(code&255);code=this.buffer.findNextMPEGStartCode()}this.buffer.rewind(32);if(skipOutput!=DECODE_SKIP_OUTPUT){this.renderFrame();if(this.externalDecodeCallback){this.externalDecodeCallback(this,this.canvas)}}if(this.pictureCodingType==PICTURE_TYPE_I||this.pictureCodingType==PICTURE_TYPE_P){var tmpY=this.forwardY,tmpY32=this.forwardY32,tmpCr=this.forwardCr,tmpCr32=this.forwardCr32,tmpCb=this.forwardCb,tmpCb32=this.forwardCb32;this.forwardY=this.currentY
;this.forwardY32=this.currentY32;this.forwardCr=this.currentCr;this.forwardCr32=this.currentCr32;this.forwardCb=this.currentCb;this.forwardCb32=this.currentCb32;this.currentY=tmpY;this.currentY32=tmpY32;this.currentCr=tmpCr;this.currentCr32=tmpCr32;this.currentCb=tmpCb;this.currentCb32=tmpCb32}};jsmpeg.prototype.YCbCrToRGBA=function(){var pY=this.currentY;var pCb=this.currentCb;var pCr=this.currentCr;var pRGBA=this.currentRGBA.data;var yIndex1=0;var yIndex2=this.codedWidth
;var yNext2Lines=this.codedWidth+(this.codedWidth-this.width);var cIndex=0;var cNextLine=this.halfWidth-(this.width>>1);var rgbaIndex1=0;var rgbaIndex2=this.width*4;var rgbaNext2Lines=this.width*4;var cols=this.width>>1;var rows=this.height>>1;var y,cb,cr,r,g,b;for(var row=0;row<rows;row++){for(var col=0;col<cols;col++){cb=pCb[cIndex];cr=pCr[cIndex];cIndex++;r=cr+(cr*103>>8)-179;g=(cb*88>>8)-44+(cr*183>>8)-91;b=cb+(cb*198>>8)-227;var y1=pY[yIndex1++];var y2=pY[yIndex1++];pRGBA[rgbaIndex1]=y1+r
;pRGBA[rgbaIndex1+1]=y1-g;pRGBA[rgbaIndex1+2]=y1+b;pRGBA[rgbaIndex1+4]=y2+r;pRGBA[rgbaIndex1+5]=y2-g;pRGBA[rgbaIndex1+6]=y2+b;rgbaIndex1+=8;var y3=pY[yIndex2++];var y4=pY[yIndex2++];pRGBA[rgbaIndex2]=y3+r;pRGBA[rgbaIndex2+1]=y3-g;pRGBA[rgbaIndex2+2]=y3+b;pRGBA[rgbaIndex2+4]=y4+r;pRGBA[rgbaIndex2+5]=y4-g;pRGBA[rgbaIndex2+6]=y4+b;rgbaIndex2+=8}yIndex1+=yNext2Lines;yIndex2+=yNext2Lines;rgbaIndex1+=rgbaNext2Lines;rgbaIndex2+=rgbaNext2Lines;cIndex+=cNextLine}}
;jsmpeg.prototype.renderFrame2D=function(){this.YCbCrToRGBA();this.canvasContext.putImageData(this.currentRGBA,0,0)};jsmpeg.prototype.gl=null;jsmpeg.prototype.program=null;jsmpeg.prototype.YTexture=null;jsmpeg.prototype.CBTexture=null;jsmpeg.prototype.CRTexture=null;jsmpeg.prototype.createTexture=function(index,name){var gl=this.gl;var texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR)
;gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.uniform1i(gl.getUniformLocation(this.program,name),index);return texture};jsmpeg.prototype.compileShader=function(type,source){var gl=this.gl;var shader=gl.createShader(type);gl.shaderSource(shader,source);gl.compileShader(shader);if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){
throw new Error(gl.getShaderInfoLog(shader))}return shader};jsmpeg.prototype.initWebGL=function(){try{var gl=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(e){return false}if(!gl){return false}this.buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this.buffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),gl.STATIC_DRAW);this.program=gl.createProgram()
;gl.attachShader(this.program,this.compileShader(gl.VERTEX_SHADER,SHADER_VERTEX_IDENTITY));gl.attachShader(this.program,this.compileShader(gl.FRAGMENT_SHADER,SHADER_FRAGMENT_YCBCRTORGBA));gl.linkProgram(this.program);if(!gl.getProgramParameter(this.program,gl.LINK_STATUS)){throw new Error(gl.getProgramInfoLog(this.program))}gl.useProgram(this.program);this.YTexture=this.createTexture(0,"YTexture");this.CBTexture=this.createTexture(1,"CBTexture");this.CRTexture=this.createTexture(2,"CRTexture")
;var vertexAttr=gl.getAttribLocation(this.program,"vertex");gl.enableVertexAttribArray(vertexAttr);gl.vertexAttribPointer(vertexAttr,2,gl.FLOAT,false,0,0);this.loadingProgram=gl.createProgram();gl.attachShader(this.loadingProgram,this.compileShader(gl.VERTEX_SHADER,SHADER_VERTEX_IDENTITY));gl.attachShader(this.loadingProgram,this.compileShader(gl.FRAGMENT_SHADER,SHADER_FRAGMENT_LOADING));gl.linkProgram(this.loadingProgram);gl.useProgram(this.loadingProgram)
;vertexAttr=gl.getAttribLocation(this.loadingProgram,"vertex");gl.enableVertexAttribArray(vertexAttr);gl.vertexAttribPointer(vertexAttr,2,gl.FLOAT,false,0,0);return true};jsmpeg.prototype.renderFrameGL=function(){var gl=this.gl;var uint8Y=new Uint8Array(this.currentY.buffer),uint8Cr=new Uint8Array(this.currentCr.buffer),uint8Cb=new Uint8Array(this.currentCb.buffer);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,this.YTexture)
;gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,this.codedWidth,this.height,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,uint8Y);gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,this.CBTexture);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,this.halfWidth,this.height/2,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,uint8Cr);gl.activeTexture(gl.TEXTURE2);gl.bindTexture(gl.TEXTURE_2D,this.CRTexture);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,this.halfWidth,this.height/2,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,uint8Cb)
;gl.drawArrays(gl.TRIANGLE_STRIP,0,4)};jsmpeg.prototype.quantizerScale=0;jsmpeg.prototype.sliceBegin=false;jsmpeg.prototype.decodeSlice=function(slice){this.sliceBegin=true;this.macroblockAddress=(slice-1)*this.mbWidth-1;this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0;this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;this.quantizerScale=this.buffer.getBits(5);while(this.buffer.getBits(1)){this.buffer.advance(8)}do{this.decodeMacroblock()
}while(!this.buffer.nextBytesAreStartCode())};jsmpeg.prototype.macroblockAddress=0;jsmpeg.prototype.mbRow=0;jsmpeg.prototype.mbCol=0;jsmpeg.prototype.macroblockType=0;jsmpeg.prototype.macroblockIntra=false;jsmpeg.prototype.macroblockMotFw=false;jsmpeg.prototype.motionFwH=0;jsmpeg.prototype.motionFwV=0;jsmpeg.prototype.motionFwHPrev=0;jsmpeg.prototype.motionFwVPrev=0;jsmpeg.prototype.decodeMacroblock=function(){var increment=0,t=this.readCode(MACROBLOCK_ADDRESS_INCREMENT);while(t==34){
t=this.readCode(MACROBLOCK_ADDRESS_INCREMENT)}while(t==35){increment+=33;t=this.readCode(MACROBLOCK_ADDRESS_INCREMENT)}increment+=t;if(this.sliceBegin){this.sliceBegin=false;this.macroblockAddress+=increment}else{if(this.macroblockAddress+increment>=this.mbSize){return}if(increment>1){this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;if(this.pictureCodingType==PICTURE_TYPE_P){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}}while(increment>1){
this.macroblockAddress++;this.mbRow=this.macroblockAddress/this.mbWidth|0;this.mbCol=this.macroblockAddress%this.mbWidth;this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb);increment--}this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0;this.mbCol=this.macroblockAddress%this.mbWidth;this.macroblockType=this.readCode(MACROBLOCK_TYPE_TABLES[this.pictureCodingType]);this.macroblockIntra=this.macroblockType&1
;this.macroblockMotFw=this.macroblockType&8;if((this.macroblockType&16)!=0){this.quantizerScale=this.buffer.getBits(5)}if(this.macroblockIntra){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}else{this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;this.decodeMotionVectors();this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb)}
var cbp=(this.macroblockType&2)!=0?this.readCode(CODE_BLOCK_PATTERN):this.macroblockIntra?63:0;for(var block=0,mask=32;block<6;block++){if((cbp&mask)!=0){this.decodeBlock(block)}mask>>=1}};jsmpeg.prototype.decodeMotionVectors=function(){var code,d,r=0;if(this.macroblockMotFw){code=this.readCode(MOTION);if(code!=0&&this.forwardF!=1){r=this.buffer.getBits(this.forwardRSize);d=(Math.abs(code)-1<<this.forwardRSize)+r+1;if(code<0){d=-d}}else{d=code}this.motionFwHPrev+=d
;if(this.motionFwHPrev>(this.forwardF<<4)-1){this.motionFwHPrev-=this.forwardF<<5}else if(this.motionFwHPrev<-this.forwardF<<4){this.motionFwHPrev+=this.forwardF<<5}this.motionFwH=this.motionFwHPrev;if(this.fullPelForward){this.motionFwH<<=1}code=this.readCode(MOTION);if(code!=0&&this.forwardF!=1){r=this.buffer.getBits(this.forwardRSize);d=(Math.abs(code)-1<<this.forwardRSize)+r+1;if(code<0){d=-d}}else{d=code}this.motionFwVPrev+=d;if(this.motionFwVPrev>(this.forwardF<<4)-1){
this.motionFwVPrev-=this.forwardF<<5}else if(this.motionFwVPrev<-this.forwardF<<4){this.motionFwVPrev+=this.forwardF<<5}this.motionFwV=this.motionFwVPrev;if(this.fullPelForward){this.motionFwV<<=1}}else if(this.pictureCodingType==PICTURE_TYPE_P){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}};jsmpeg.prototype.copyMacroblock=function(motionH,motionV,sY,sCr,sCb){var width,scan,H,V,oddH,oddV,src,dest,last;var dY=this.currentY32;var dCb=this.currentCb32
;var dCr=this.currentCr32;width=this.codedWidth;scan=width-16;H=motionH>>1;V=motionV>>1;oddH=(motionH&1)==1;oddV=(motionV&1)==1;src=((this.mbRow<<4)+V)*width+(this.mbCol<<4)+H;dest=this.mbRow*width+this.mbCol<<2;last=dest+(width<<2);var y1,y2,y;if(oddH){if(oddV){while(dest<last){y1=sY[src]+sY[src+width];src++;for(var x=0;x<4;x++){y2=sY[src]+sY[src+width];src++;y=y1+y2+2>>2&255;y1=sY[src]+sY[src+width];src++;y|=y1+y2+2<<6&65280;y2=sY[src]+sY[src+width];src++;y|=y1+y2+2<<14&16711680
;y1=sY[src]+sY[src+width];src++;y|=y1+y2+2<<22&4278190080;dY[dest++]=y}dest+=scan>>2;src+=scan-1}}else{while(dest<last){y1=sY[src++];for(var x=0;x<4;x++){y2=sY[src++];y=y1+y2+1>>1&255;y1=sY[src++];y|=y1+y2+1<<7&65280;y2=sY[src++];y|=y1+y2+1<<15&16711680;y1=sY[src++];y|=y1+y2+1<<23&4278190080;dY[dest++]=y}dest+=scan>>2;src+=scan-1}}}else{if(oddV){while(dest<last){for(var x=0;x<4;x++){y=sY[src]+sY[src+width]+1>>1&255;src++;y|=sY[src]+sY[src+width]+1<<7&65280;src++
;y|=sY[src]+sY[src+width]+1<<15&16711680;src++;y|=sY[src]+sY[src+width]+1<<23&4278190080;src++;dY[dest++]=y}dest+=scan>>2;src+=scan}}else{while(dest<last){for(var x=0;x<4;x++){y=sY[src];src++;y|=sY[src]<<8;src++;y|=sY[src]<<16;src++;y|=sY[src]<<24;src++;dY[dest++]=y}dest+=scan>>2;src+=scan}}}width=this.halfWidth;scan=width-8;H=motionH/2>>1;V=motionV/2>>1;oddH=(motionH/2&1)==1;oddV=(motionV/2&1)==1;src=((this.mbRow<<3)+V)*width+(this.mbCol<<3)+H;dest=this.mbRow*width+this.mbCol<<1
;last=dest+(width<<1);var cr1,cr2,cr;var cb1,cb2,cb;if(oddH){if(oddV){while(dest<last){cr1=sCr[src]+sCr[src+width];cb1=sCb[src]+sCb[src+width];src++;for(var x=0;x<2;x++){cr2=sCr[src]+sCr[src+width];cb2=sCb[src]+sCb[src+width];src++;cr=cr1+cr2+2>>2&255;cb=cb1+cb2+2>>2&255;cr1=sCr[src]+sCr[src+width];cb1=sCb[src]+sCb[src+width];src++;cr|=cr1+cr2+2<<6&65280;cb|=cb1+cb2+2<<6&65280;cr2=sCr[src]+sCr[src+width];cb2=sCb[src]+sCb[src+width];src++;cr|=cr1+cr2+2<<14&16711680;cb|=cb1+cb2+2<<14&16711680
;cr1=sCr[src]+sCr[src+width];cb1=sCb[src]+sCb[src+width];src++;cr|=cr1+cr2+2<<22&4278190080;cb|=cb1+cb2+2<<22&4278190080;dCr[dest]=cr;dCb[dest]=cb;dest++}dest+=scan>>2;src+=scan-1}}else{while(dest<last){cr1=sCr[src];cb1=sCb[src];src++;for(var x=0;x<2;x++){cr2=sCr[src];cb2=sCb[src++];cr=cr1+cr2+1>>1&255;cb=cb1+cb2+1>>1&255;cr1=sCr[src];cb1=sCb[src++];cr|=cr1+cr2+1<<7&65280;cb|=cb1+cb2+1<<7&65280;cr2=sCr[src];cb2=sCb[src++];cr|=cr1+cr2+1<<15&16711680;cb|=cb1+cb2+1<<15&16711680;cr1=sCr[src]
;cb1=sCb[src++];cr|=cr1+cr2+1<<23&4278190080;cb|=cb1+cb2+1<<23&4278190080;dCr[dest]=cr;dCb[dest]=cb;dest++}dest+=scan>>2;src+=scan-1}}}else{if(oddV){while(dest<last){for(var x=0;x<2;x++){cr=sCr[src]+sCr[src+width]+1>>1&255;cb=sCb[src]+sCb[src+width]+1>>1&255;src++;cr|=sCr[src]+sCr[src+width]+1<<7&65280;cb|=sCb[src]+sCb[src+width]+1<<7&65280;src++;cr|=sCr[src]+sCr[src+width]+1<<15&16711680;cb|=sCb[src]+sCb[src+width]+1<<15&16711680;src++;cr|=sCr[src]+sCr[src+width]+1<<23&4278190080
;cb|=sCb[src]+sCb[src+width]+1<<23&4278190080;src++;dCr[dest]=cr;dCb[dest]=cb;dest++}dest+=scan>>2;src+=scan}}else{while(dest<last){for(var x=0;x<2;x++){cr=sCr[src];cb=sCb[src];src++;cr|=sCr[src]<<8;cb|=sCb[src]<<8;src++;cr|=sCr[src]<<16;cb|=sCb[src]<<16;src++;cr|=sCr[src]<<24;cb|=sCb[src]<<24;src++;dCr[dest]=cr;dCb[dest]=cb;dest++}dest+=scan>>2;src+=scan}}}};jsmpeg.prototype.dcPredictorY;jsmpeg.prototype.dcPredictorCr;jsmpeg.prototype.dcPredictorCb;jsmpeg.prototype.blockData=null
;jsmpeg.prototype.decodeBlock=function(block){var n=0,quantMatrix;if(this.macroblockIntra){var predictor,dctSize;if(block<4){predictor=this.dcPredictorY;dctSize=this.readCode(DCT_DC_SIZE_LUMINANCE)}else{predictor=block==4?this.dcPredictorCr:this.dcPredictorCb;dctSize=this.readCode(DCT_DC_SIZE_CHROMINANCE)}if(dctSize>0){var differential=this.buffer.getBits(dctSize);if((differential&1<<dctSize-1)!=0){this.blockData[0]=predictor+differential}else{
this.blockData[0]=predictor+(-1<<dctSize|differential+1)}}else{this.blockData[0]=predictor}if(block<4){this.dcPredictorY=this.blockData[0]}else if(block==4){this.dcPredictorCr=this.blockData[0]}else{this.dcPredictorCb=this.blockData[0]}this.blockData[0]<<=3+5;quantMatrix=this.intraQuantMatrix;n=1}else{quantMatrix=this.nonIntraQuantMatrix}var level=0;while(true){var run=0,coeff=this.readCode(DCT_COEFF);if(coeff==1&&n>0&&this.buffer.getBits(1)==0){break}if(coeff==65535){run=this.buffer.getBits(6)
;level=this.buffer.getBits(8);if(level==0){level=this.buffer.getBits(8)}else if(level==128){level=this.buffer.getBits(8)-256}else if(level>128){level=level-256}}else{run=coeff>>8;level=coeff&255;if(this.buffer.getBits(1)){level=-level}}n+=run;var dezigZagged=ZIG_ZAG[n];n++;level<<=1;if(!this.macroblockIntra){level+=level<0?-1:1}level=level*this.quantizerScale*quantMatrix[dezigZagged]>>4;if((level&1)==0){level-=level>0?1:-1}if(level>2047){level=2047}else if(level<-2048){level=-2048}
this.blockData[dezigZagged]=level*PREMULTIPLIER_MATRIX[dezigZagged]}var destArray,destIndex,scan;if(block<4){destArray=this.currentY;scan=this.codedWidth-8;destIndex=this.mbRow*this.codedWidth+this.mbCol<<4;if((block&1)!=0){destIndex+=8}if((block&2)!=0){destIndex+=this.codedWidth<<3}}else{destArray=block==4?this.currentCb:this.currentCr;scan=(this.codedWidth>>1)-8;destIndex=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)}if(this.macroblockIntra){if(n==1){
this.copyValueToDestination(this.blockData[0]+128>>8,destArray,destIndex,scan);this.blockData[0]=0}else{this.IDCT();this.copyBlockToDestination(this.blockData,destArray,destIndex,scan);this.blockData.set(this.zeroBlockData)}}else{if(n==1){this.addValueToDestination(this.blockData[0]+128>>8,destArray,destIndex,scan);this.blockData[0]=0}else{this.IDCT();this.addBlockToDestination(this.blockData,destArray,destIndex,scan);this.blockData.set(this.zeroBlockData)}}n=0}
;jsmpeg.prototype.copyBlockToDestination=function(blockData,destArray,destIndex,scan){for(var n=0;n<64;n+=8,destIndex+=scan+8){destArray[destIndex+0]=blockData[n+0];destArray[destIndex+1]=blockData[n+1];destArray[destIndex+2]=blockData[n+2];destArray[destIndex+3]=blockData[n+3];destArray[destIndex+4]=blockData[n+4];destArray[destIndex+5]=blockData[n+5];destArray[destIndex+6]=blockData[n+6];destArray[destIndex+7]=blockData[n+7]}}
;jsmpeg.prototype.addBlockToDestination=function(blockData,destArray,destIndex,scan){for(var n=0;n<64;n+=8,destIndex+=scan+8){destArray[destIndex+0]+=blockData[n+0];destArray[destIndex+1]+=blockData[n+1];destArray[destIndex+2]+=blockData[n+2];destArray[destIndex+3]+=blockData[n+3];destArray[destIndex+4]+=blockData[n+4];destArray[destIndex+5]+=blockData[n+5];destArray[destIndex+6]+=blockData[n+6];destArray[destIndex+7]+=blockData[n+7]}}
;jsmpeg.prototype.copyValueToDestination=function(value,destArray,destIndex,scan){for(var n=0;n<64;n+=8,destIndex+=scan+8){destArray[destIndex+0]=value;destArray[destIndex+1]=value;destArray[destIndex+2]=value;destArray[destIndex+3]=value;destArray[destIndex+4]=value;destArray[destIndex+5]=value;destArray[destIndex+6]=value;destArray[destIndex+7]=value}};jsmpeg.prototype.addValueToDestination=function(value,destArray,destIndex,scan){for(var n=0;n<64;n+=8,destIndex+=scan+8){
destArray[destIndex+0]+=value;destArray[destIndex+1]+=value;destArray[destIndex+2]+=value;destArray[destIndex+3]+=value;destArray[destIndex+4]+=value;destArray[destIndex+5]+=value;destArray[destIndex+6]+=value;destArray[destIndex+7]+=value}};jsmpeg.prototype.copyBlockToDestinationClamp=function(blockData,destArray,destIndex,scan){var n=0;for(var i=0;i<8;i++){for(var j=0;j<8;j++){var p=blockData[n++];destArray[destIndex++]=p>255?255:p<0?0:p}destIndex+=scan}}
;jsmpeg.prototype.addBlockToDestinationClamp=function(blockData,destArray,destIndex,scan){var n=0;for(var i=0;i<8;i++){for(var j=0;j<8;j++){var p=blockData[n++]+destArray[destIndex];destArray[destIndex++]=p>255?255:p<0?0:p}destIndex+=scan}};jsmpeg.prototype.IDCT=function(){var b1,b3,b4,b6,b7,tmp1,tmp2,m0,x0,x1,x2,x3,x4,y3,y4,y5,y6,y7,i,blockData=this.blockData;for(i=0;i<8;++i){b1=blockData[4*8+i];b3=blockData[2*8+i]+blockData[6*8+i];b4=blockData[5*8+i]-blockData[3*8+i]
;tmp1=blockData[1*8+i]+blockData[7*8+i];tmp2=blockData[3*8+i]+blockData[5*8+i];b6=blockData[1*8+i]-blockData[7*8+i];b7=tmp1+tmp2;m0=blockData[0*8+i];x4=(b6*473-b4*196+128>>8)-b7;x0=x4-((tmp1-tmp2)*362+128>>8);x1=m0-b1;x2=((blockData[2*8+i]-blockData[6*8+i])*362+128>>8)-b3;x3=m0+b1;y3=x1+x2;y4=x3+b3;y5=x1-x2;y6=x3-b3;y7=-x0-(b4*473+b6*196+128>>8);blockData[0*8+i]=b7+y4;blockData[1*8+i]=x4+y3;blockData[2*8+i]=y5-x0;blockData[3*8+i]=y6-y7;blockData[4*8+i]=y6+y7;blockData[5*8+i]=x0+y5
;blockData[6*8+i]=y3-x4;blockData[7*8+i]=y4-b7}for(i=0;i<64;i+=8){b1=blockData[4+i];b3=blockData[2+i]+blockData[6+i];b4=blockData[5+i]-blockData[3+i];tmp1=blockData[1+i]+blockData[7+i];tmp2=blockData[3+i]+blockData[5+i];b6=blockData[1+i]-blockData[7+i];b7=tmp1+tmp2;m0=blockData[0+i];x4=(b6*473-b4*196+128>>8)-b7;x0=x4-((tmp1-tmp2)*362+128>>8);x1=m0-b1;x2=((blockData[2+i]-blockData[6+i])*362+128>>8)-b3;x3=m0+b1;y3=x1+x2;y4=x3+b3;y5=x1-x2;y6=x3-b3;y7=-x0-(b4*473+b6*196+128>>8)
;blockData[0+i]=b7+y4+128>>8;blockData[1+i]=x4+y3+128>>8;blockData[2+i]=y5-x0+128>>8;blockData[3+i]=y6-y7+128>>8;blockData[4+i]=y6+y7+128>>8;blockData[5+i]=x0+y5+128>>8;blockData[6+i]=y3-x4+128>>8;blockData[7+i]=y4-b7+128>>8}}
;var SOCKET_MAGIC_BYTES="jsmp",DECODE_SKIP_OUTPUT=1,PICTURE_RATE=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],ZIG_ZAG=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),DEFAULT_INTRA_QUANT_MATRIX=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),DEFAULT_NON_INTRA_QUANT_MATRIX=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),PREMULTIPLIER_MATRIX=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),MACROBLOCK_ADDRESS_INCREMENT=new Int16Array([1*3,2*3,0,3*3,4*3,0,0,0,1,5*3,6*3,0,7*3,8*3,0,9*3,10*3,0,11*3,12*3,0,0,0,3,0,0,2,13*3,14*3,0,15*3,16*3,0,0,0,5,0,0,4,17*3,18*3,0,19*3,20*3,0,0,0,7,0,0,6,21*3,22*3,0,23*3,24*3,0,25*3,26*3,0,27*3,28*3,0,-1,29*3,0,-1,30*3,0,31*3,32*3,0,33*3,34*3,0,35*3,36*3,0,37*3,38*3,0,0,0,9,0,0,8,39*3,40*3,0,41*3,42*3,0,43*3,44*3,0,45*3,46*3,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,47*3,-1,0,-1,48*3,0,49*3,50*3,0,51*3,52*3,0,53*3,54*3,0,55*3,56*3,0,57*3,58*3,0,59*3,60*3,0,61*3,-1,0,-1,62*3,0,63*3,64*3,0,65*3,66*3,0,67*3,68*3,0,69*3,70*3,0,71*3,72*3,0,73*3,74*3,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),MACROBLOCK_TYPE_I=new Int8Array([1*3,2*3,0,-1,3*3,0,0,0,1,0,0,17]),MACROBLOCK_TYPE_P=new Int8Array([1*3,2*3,0,3*3,4*3,0,0,0,10,5*3,6*3,0,0,0,2,7*3,8*3,0,0,0,8,9*3,10*3,0,11*3,12*3,0,-1,13*3,0,0,0,18,0,0,26,0,0,1,0,0,17]),MACROBLOCK_TYPE_B=new Int8Array([1*3,2*3,0,3*3,5*3,0,4*3,6*3,0,8*3,7*3,0,0,0,12,9*3,10*3,0,0,0,14,13*3,14*3,0,12*3,11*3,0,0,0,4,0,0,6,18*3,16*3,0,15*3,17*3,0,0,0,8,0,0,10,-1,19*3,0,0,0,1,20*3,21*3,0,0,0,30,0,0,17,0,0,22,0,0,26]),CODE_BLOCK_PATTERN=new Int16Array([2*3,1*3,0,3*3,6*3,0,4*3,5*3,0,8*3,11*3,0,12*3,13*3,0,9*3,7*3,0,10*3,14*3,0,20*3,19*3,0,18*3,16*3,0,23*3,17*3,0,27*3,25*3,0,21*3,28*3,0,15*3,22*3,0,24*3,26*3,0,0,0,60,35*3,40*3,0,44*3,48*3,0,38*3,36*3,0,42*3,47*3,0,29*3,31*3,0,39*3,32*3,0,0,0,32,45*3,46*3,0,33*3,41*3,0,43*3,34*3,0,0,0,4,30*3,37*3,0,0,0,8,0,0,16,0,0,44,50*3,56*3,0,0,0,28,0,0,52,0,0,62,61*3,59*3,0,52*3,60*3,0,0,0,1,55*3,54*3,0,0,0,61,0,0,56,57*3,58*3,0,0,0,2,0,0,40,51*3,62*3,0,0,0,48,64*3,63*3,0,49*3,53*3,0,0,0,20,0,0,12,80*3,83*3,0,0,0,63,77*3,75*3,0,65*3,73*3,0,84*3,66*3,0,0,0,24,0,0,36,0,0,3,69*3,87*3,0,81*3,79*3,0,68*3,71*3,0,70*3,78*3,0,67*3,76*3,0,72*3,74*3,0,86*3,85*3,0,88*3,82*3,0,-1,94*3,0,95*3,97*3,0,0,0,33,0,0,9,106*3,110*3,0,102*3,116*3,0,0,0,5,0,0,10,93*3,89*3,0,0,0,6,0,0,18,0,0,17,0,0,34,113*3,119*3,0,103*3,104*3,0,90*3,92*3,0,109*3,107*3,0,117*3,118*3,0,101*3,99*3,0,98*3,96*3,0,100*3,91*3,0,114*3,115*3,0,105*3,108*3,0,112*3,111*3,0,121*3,125*3,0,0,0,41,0,0,14,0,0,21,124*3,122*3,0,120*3,123*3,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),MOTION=new Int16Array([1*3,2*3,0,4*3,3*3,0,0,0,0,6*3,5*3,0,8*3,7*3,0,0,0,-1,0,0,1,9*3,10*3,0,12*3,11*3,0,0,0,2,0,0,-2,14*3,15*3,0,16*3,13*3,0,20*3,18*3,0,0,0,3,0,0,-3,17*3,19*3,0,-1,23*3,0,27*3,25*3,0,26*3,21*3,0,24*3,22*3,0,32*3,28*3,0,29*3,31*3,0,-1,33*3,0,36*3,35*3,0,0,0,-4,30*3,34*3,0,0,0,4,0,0,-7,0,0,5,37*3,41*3,0,0,0,-5,0,0,7,38*3,40*3,0,42*3,39*3,0,0,0,-6,0,0,6,51*3,54*3,0,50*3,49*3,0,45*3,46*3,0,52*3,47*3,0,43*3,53*3,0,44*3,48*3,0,0,0,10,0,0,9,0,0,8,0,0,-8,57*3,66*3,0,0,0,-9,60*3,64*3,0,56*3,61*3,0,55*3,62*3,0,58*3,63*3,0,0,0,-10,59*3,65*3,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),DCT_DC_SIZE_LUMINANCE=new Int8Array([2*3,1*3,0,6*3,5*3,0,3*3,4*3,0,0,0,1,0,0,2,9*3,8*3,0,7*3,10*3,0,0,0,0,12*3,11*3,0,0,0,4,0,0,3,13*3,14*3,0,0,0,5,0,0,6,16*3,15*3,0,17*3,-1,0,0,0,7,0,0,8]),DCT_DC_SIZE_CHROMINANCE=new Int8Array([2*3,1*3,0,4*3,3*3,0,6*3,5*3,0,8*3,7*3,0,0,0,2,0,0,1,0,0,0,10*3,9*3,0,0,0,3,12*3,11*3,0,0,0,4,14*3,13*3,0,0,0,5,16*3,15*3,0,0,0,6,17*3,-1,0,0,0,7,0,0,8]),DCT_COEFF=new Int32Array([1*3,2*3,0,4*3,3*3,0,0,0,1,7*3,8*3,0,6*3,5*3,0,13*3,9*3,0,11*3,10*3,0,14*3,12*3,0,0,0,257,20*3,22*3,0,18*3,21*3,0,16*3,19*3,0,0,0,513,17*3,15*3,0,0,0,2,0,0,3,27*3,25*3,0,29*3,31*3,0,24*3,26*3,0,32*3,30*3,0,0,0,1025,23*3,28*3,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,37*3,36*3,0,0,0,1281,35*3,34*3,0,39*3,38*3,0,33*3,42*3,0,40*3,41*3,0,52*3,50*3,0,54*3,53*3,0,48*3,49*3,0,43*3,45*3,0,46*3,44*3,0,0,0,2049,0,0,4,0,0,514,0,0,2305,51*3,47*3,0,55*3,57*3,0,60*3,56*3,0,59*3,58*3,0,61*3,62*3,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,76*3,75*3,0,67*3,70*3,0,73*3,71*3,0,78*3,74*3,0,72*3,77*3,0,69*3,64*3,0,68*3,63*3,0,66*3,65*3,0,81*3,87*3,0,91*3,80*3,0,82*3,79*3,0,83*3,86*3,0,93*3,92*3,0,84*3,85*3,0,90*3,94*3,0,88*3,89*3,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,105*3,107*3,0,111*3,114*3,0,104*3,97*3,0,125*3,119*3,0,96*3,98*3,0,-1,123*3,0,95*3,101*3,0,106*3,121*3,0,99*3,102*3,0,113*3,103*3,0,112*3,116*3,0,110*3,100*3,0,124*3,115*3,0,117*3,122*3,0,109*3,118*3,0,120*3,108*3,0,127*3,136*3,0,139*3,140*3,0,130*3,126*3,0,145*3,146*3,0,128*3,129*3,0,0,0,2050,132*3,134*3,0,155*3,154*3,0,0,0,8,137*3,133*3,0,143*3,144*3,0,151*3,138*3,0,142*3,141*3,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,148*3,152*3,0,0,0,1027,153*3,150*3,0,0,0,261,131*3,135*3,0,0,0,516,149*3,147*3,0,172*3,173*3,0,162*3,158*3,0,170*3,161*3,0,168*3,166*3,0,157*3,179*3,0,169*3,167*3,0,174*3,171*3,0,178*3,177*3,0,156*3,159*3,0,164*3,165*3,0,183*3,182*3,0,175*3,176*3,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,180*3,181*3,0,160*3,163*3,0,196*3,199*3,0,0,0,27,203*3,185*3,0,202*3,201*3,0,0,0,19,0,0,22,197*3,207*3,0,0,0,18,191*3,192*3,0,188*3,190*3,0,0,0,20,184*3,194*3,0,0,0,21,186*3,193*3,0,0,0,23,204*3,198*3,0,0,0,25,0,0,24,200*3,205*3,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,189*3,206*3,0,187*3,195*3,0,218*3,211*3,0,0,0,37,215*3,216*3,0,0,0,36,210*3,212*3,0,0,0,34,213*3,209*3,0,221*3,222*3,0,219*3,208*3,0,217*3,214*3,0,223*3,220*3,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),PICTURE_TYPE_I=1,PICTURE_TYPE_P=2,PICTURE_TYPE_B=3,PICTURE_TYPE_D=4,START_SEQUENCE=179,START_SLICE_FIRST=1,START_SLICE_LAST=175,START_PICTURE=0,START_EXTENSION=181,START_USER_DATA=178,SHADER_FRAGMENT_YCBCRTORGBA=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),SHADER_FRAGMENT_LOADING=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),SHADER_VERTEX_IDENTITY=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n")
;var MACROBLOCK_TYPE_TABLES=[null,MACROBLOCK_TYPE_I,MACROBLOCK_TYPE_P,MACROBLOCK_TYPE_B];var BitReader=function(arrayBuffer){this.bytes=new Uint8Array(arrayBuffer);this.length=this.bytes.length;this.writePos=this.bytes.length;this.index=0};BitReader.NOT_FOUND=-1;BitReader.prototype.findNextMPEGStartCode=function(){for(var i=this.index+7>>3;i<this.writePos;i++){if(this.bytes[i]==0&&this.bytes[i+1]==0&&this.bytes[i+2]==1){this.index=i+4<<3;return this.bytes[i+3]}}this.index=this.writePos<<3
;return BitReader.NOT_FOUND};BitReader.prototype.nextBytesAreStartCode=function(){var i=this.index+7>>3;return i>=this.writePos||this.bytes[i]==0&&this.bytes[i+1]==0&&this.bytes[i+2]==1};BitReader.prototype.nextBits=function(count){var byteOffset=this.index>>3,room=8-this.index%8;if(room>=count){return this.bytes[byteOffset]>>room-count&255>>8-count}var leftover=(this.index+count)%8,end=this.index+count-1>>3,value=this.bytes[byteOffset]&255>>8-room;for(byteOffset++;byteOffset<end;byteOffset++){
value<<=8;value|=this.bytes[byteOffset]}if(leftover>0){value<<=leftover;value|=this.bytes[byteOffset]>>8-leftover}else{value<<=8;value|=this.bytes[byteOffset]}return value};BitReader.prototype.getBits=function(count){var value=this.nextBits(count);this.index+=count;return value};BitReader.prototype.advance=function(count){return this.index+=count};BitReader.prototype.rewind=function(count){return this.index-=count}})(window);(function(window){"use strict"
;var mbjpeg=window.mbjpeg=function(url,options){this.canvas=options.canvas;this.onload=options.onload;this.onfinished=options.onfinished;this.currentTime=0;this.isPlaying=false;this.pictureRate=25;this.frames=[];this.indexFrame=0;this.waitDelay=1e3/this.pictureRate;this.canvasContext=this.canvas.getContext("2d");this.load(url)};mbjpeg.prototype.load=function(url){var request=new XMLHttpRequest;var that=this;request.onreadystatechange=function(){
if(request.readyState==request.DONE&&request.status==200){that.fileLoaded(request.responseText)}};request.open("GET",url);request.send()};mbjpeg.prototype.fileLoaded=function(file){var json_regexp=/^(\[(\[[0-9]+,[0-9]+\],?)+\])/;var json_text=json_regexp.exec(file);if(json_text){this.json=JSON.parse(json_text[1]);this.frameCount=this.json.length;this.duration=this.frameCount/this.pictureRate;this.file=file.slice(json_text[1].length,file.length);this.renderFrame();this.onload()}}
;mbjpeg.prototype.renderFrame=function(){this.currentTime=this.indexFrame/this.pictureRate;if(this.indexFrame>=this.frameCount||typeof this.json[this.indexFrame]==="undefined")return;if(typeof this.frames[this.indexFrame]==="undefined"){var jpeg_data=this.file.slice(this.json[this.indexFrame][0],this.json[this.indexFrame][0]+this.json[this.indexFrame][1]);this.frames[this.indexFrame]=jpeg_data}var that=this;var frame=this.frames[this.indexFrame];var jpeg=new Image
;jpeg.src="data:image/jpeg;base64,"+frame;jpeg.onload=function(){that.canvasContext.drawImage(jpeg,0,0)}};mbjpeg.prototype.play=function(){if(this.isPlaying)return;this.targetTime=Date.now();this.isPlaying=true;this.playing()};mbjpeg.prototype.pause=function(){this.isPlaying=false};mbjpeg.prototype.stop=function(file){this.indexFrame=0;this.isPlaying=false};mbjpeg.prototype.playing=function(){if(this.frameCount==this.indexFrame||typeof this.json[this.indexFrame]==="undefined"){this.stop()
;this.onfinished()}this.renderFrame();this.indexFrame++;this.lateTime=Date.now()-this.targetTime;var wait=Math.max(0,this.waitDelay-this.lateTime);this.targetTime=Date.now()+wait;if(this.isPlaying)window.setTimeout(this.playing.bind(this),wait)};mbjpeg.prototype.seekToFrame=function(seekFrame){if(seekFrame<0||seekFrame>=this.frameCount)return false;this.indexFrame=seekFrame;this.renderFrame()}})(window);